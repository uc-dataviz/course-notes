<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Day 3 Making plots pretty and clean | Data Visualization</title>
<meta name="author" content="Benjamin Soltoff">
<meta name="description" content="library(tidyverse) library(ggthemes) library(knitr) library(broom) library(stringr) library(socviz) library(patchwork) library(RColorBrewer) library(colorspace) library(dichromat) library(ggrepel)...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Day 3 Making plots pretty and clean | Data Visualization">
<meta property="og:type" content="book">
<meta property="og:description" content="library(tidyverse) library(ggthemes) library(knitr) library(broom) library(stringr) library(socviz) library(patchwork) library(RColorBrewer) library(colorspace) library(dichromat) library(ggrepel)...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Day 3 Making plots pretty and clean | Data Visualization">
<meta name="twitter:description" content="library(tidyverse) library(ggthemes) library(knitr) library(broom) library(stringr) library(socviz) library(patchwork) library(RColorBrewer) library(colorspace) library(dichromat) library(ggrepel)...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.21/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="MACS 20700/40700">Data Visualization</a>:
        <small class="text-muted">MACS 20700/40700</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Syllabus</a></li>
<li><a class="" href="intro-data-viz.html"><span class="header-section-number">1</span> Introduction to data visualization</a></li>
<li><a class="" href="show-the-numbers.html"><span class="header-section-number">2</span> Showing the right numbers</a></li>
<li><a class="active" href="science-polish.html"><span class="header-section-number">3</span> Making plots pretty and clean</a></li>
<li><a class="" href="geoviz.html"><span class="header-section-number">4</span> Geospatial visualizations</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">5</span> Shiny applications</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="science-polish" class="section level1" number="3">
<h1>
<span class="header-section-number">Day 3</span> Making plots pretty and clean<a class="anchor" aria-label="anchor" href="#science-polish"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://kjhealy.github.io/socviz/">socviz</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">RColorBrewer</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://colorspace.R-Forge.R-project.org/">colorspace</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">dichromat</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel">ggrepel</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span></code></pre></div>
<div id="learning-objectives-3" class="section level2 unnumbered">
<h2>Learning objectives<a class="anchor" aria-label="anchor" href="#learning-objectives-3"><i class="fas fa-link"></i></a>
</h2>
<div id="morning-2" class="section level3" number="3.0.1">
<h3>
<span class="header-section-number">3.0.1</span> Morning<a class="anchor" aria-label="anchor" href="#morning-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Define Tufte’s theory of data graphics, data-ink ratio, and chartjunk</li>
<li>Present and compare examples of minimalistic graphics to their original form</li>
<li>Assess visualizations under the engineer/designers philosophy</li>
</ul>
</div>
<div id="afternoon-2" class="section level3" number="3.0.2">
<h3>
<span class="header-section-number">3.0.2</span> Afternoon<a class="anchor" aria-label="anchor" href="#afternoon-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Demonstrate methods for visualizing uncertainty</li>
<li>Generate layered plots to highlight specific attributes of data</li>
<li>Adjust themes</li>
</ul>
</div>
</div>
<div id="assigned-readings-2" class="section level2 unnumbered">
<h2>Assigned readings<a class="anchor" aria-label="anchor" href="#assigned-readings-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Chapter 8, <span class="citation">Healy (<a href="references.html#ref-healy2018data" role="doc-biblioref">2018</a>)</span> - accessible via the <a href="https://socviz.co/">book’s website</a>
</li>
</ul>
</div>
<div id="tuftes-world" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Tufte’s world<a class="anchor" aria-label="anchor" href="#tuftes-world"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<p>Core purpose of visualization is to communicate quantitative information</p>
<ul>
<li>Art is secondary</li>
<li>“Above all else show the data”</li>
</ul>
</li>
<li>
<p>Goal is to maximize the data-ink ratio</p>
<p><span class="math display">\[\text{Data-ink ratio} = \frac{\text{data-ink}}{\text{total ink used to print the graphic}}\]</span></p>
</li>
<li>
<p><strong>Data-ink</strong> - non-erasable core of a graphic</p>
<ul>
<li>This is what Tufte says we should most care about</li>
<li>Minimize all extraneous fluff</li>
</ul>
</li>
<li>
<p>What should we consider to be part of the “data-ink”?</p>
<ul>
<li>Is this literally just the data? Don’t we need gridlines or axes? What else can be considered integral to the graph?</li>
</ul>
</li>
<li><p>He never offers proof of his hypothesis that less is better</p></li>
</ul>
<div id="what-is-integral" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> What is integral?<a class="anchor" aria-label="anchor" href="#what-is-integral"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Data points</li>
<li>Axis ticks</li>
<li>Axis tick labels</li>
<li>Axis labels</li>
<li>Background</li>
<li>Grid lines</li>
</ul>
<p>What happens if we strip away everything except the data?</p>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-void-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Hmm, so what do we actually need to keep? What should we consider “integral”? What if we remove the background color?</p>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-background-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Remove panel box</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-panelbox-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Remove minor grid lines</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-minor-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Remove all grid lines</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-major-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Remove tick marks</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-tick-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Use serif font</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/integral-serif-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>What have we lost? Is this easier to interpret? Harder?</p>
</div>
</div>
<div id="chart-junk" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Chart junk<a class="anchor" aria-label="anchor" href="#chart-junk"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/monster-costs.png" width="80%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src="images/mcdonalds.jpeg" width="80%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src="images/3d-ribbon-chart.jpeg" width="80%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src="images/wasted-space.jpeg" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>
<p>Vibrating moire effects</p>
<ul>
<li>Hard to produce in <code>ggplot2</code> - no support for them</li>
<li>Eye junk</li>
<li>Makes the graph harder to decode/interpret</li>
</ul>
</li>
<li>
<p>The grid</p>
<ul>
<li>Minimize/reduce the thickness of grid lines to ease interpretation</li>
<li>Less visual clutter to weed through</li>
<li>Add some compare/contrast with <code>ggplot</code>
</li>
</ul>
</li>
<li><p>The duck</p></li>
<li><p>Tufte concludes that forgoing chartjunk enables functionality and insight (as Cairo would describe it). Do you agree?</p></li>
</ul>
</div>
<div id="compare-tufte-minimal-graphs-to-traditional-graphs-using-ggplot2" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Compare Tufte minimal graphs to traditional graphs using <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#compare-tufte-minimal-graphs-to-traditional-graphs-using-ggplot2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://github.com/jrnold/ggthemes"><code>ggthemes</code></a></li>
<li>Compare other themes for the same basic plot<a href="references.html#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>
</li>
</ul>
<p>The goal of Tufte’s minimalism is to maximize the data-ink ratio, so we want to modify traditional or default graphs in R and <code>ggplot2</code> to minimize use of extraneous ink.</p>
<div id="minimal-line-plot" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Minimal line plot<a class="anchor" aria-label="anchor" href="#minimal-line-plot"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/line-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>We use <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> to draw the data points and <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code> to connect the points</li>
<li>What is the extraneous ink on this graph?
<ul>
<li>Background</li>
<li>Title of graph and y-axis labels - redundant</li>
<li>x-axis label - year is obvious/self-explanatory</li>
</ul>
</li>
<li>Missing context - how is this expansion meaningful over time?</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/minline-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Remove axis and graph titles</li>
<li>Adds text annotation within graph</li>
<li>Highlights a 5% increase in per capital expandures</li>
<li>Changes font to be more aesthetically pleasing, not so blockish</li>
</ul>
</div>
<div id="minimal-boxplot" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Minimal boxplot<a class="anchor" aria-label="anchor" href="#minimal-boxplot"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/boxplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Key features of a boxplot
<ul>
<li>Lines to indicate:
<ul>
<li>Maximum of IQR</li>
<li>3rd quartile</li>
<li>Median</li>
<li>1st quartile</li>
<li>Minimum of IQR</li>
</ul>
</li>
<li>Dots for outliers</li>
</ul>
</li>
<li>How many different line strokes do we use?
<ul>
<li>8 for each graph</li>
<li><span class="math inline">\(8 \times 22 = 176\)</span></li>
</ul>
</li>
<li>This is extraneous ink</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/minboxplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Now we use only 22 verticals to show the same data. It could easily be drawn by hand with a single vertical for each category on the x-axis</li>
<li>Doesn’t show outlier info, but is this really necessary?</li>
<li>Also removes the background color and gridlines</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/offset-boxplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Here we use offsetting lines to indicate the middle half of the data rather than using a gap</li>
<li>Is this prettier? Easier to interpret?</li>
</ul>
</div>
<div id="minimal-barchart" class="section level3" number="3.3.3">
<h3>
<span class="header-section-number">3.3.3</span> Minimal barchart<a class="anchor" aria-label="anchor" href="#minimal-barchart"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/bar-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Again, the background is the main culprit</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/minbar-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Erases the box/grid background</li>
<li>Removes vertical axis</li>
<li>Use a <strong>white grid</strong> to show coordinate lines through the absence of ink, rather than adding ink
<ul>
<li>Allows us to remove tick marks as well</li>
</ul>
</li>
</ul>
</div>
<div id="range-frame-scatterplot" class="section level3" number="3.3.4">
<h3>
<span class="header-section-number">3.3.4</span> Range-frame scatterplot<a class="anchor" aria-label="anchor" href="#range-frame-scatterplot"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>A standard bivariate scatterplot</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/scatterplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Use the frame/axis lines of the graph to communicate important information
<ul>
<li>Extends only to minimum/maximum values in the data, rather than arbitrary points</li>
<li>Explicitly identifies the minimum and maximum values</li>
</ul>
</li>
</ul>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/range-frame-1.png" width="80%" style="display: block; margin: auto;"></div>
<div id="with-a-quartile-plot" class="section level4" number="3.3.4.1">
<h4>
<span class="header-section-number">3.3.4.1</span> With a quartile plot<a class="anchor" aria-label="anchor" href="#with-a-quartile-plot"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/range-frame-quartile-1.png" width="80%" style="display: block; margin: auto;"></div>
<ul>
<li>Combine with info on the quartiles of the data to show case this info as well</li>
<li>Thicker bar indicates inner two quartiles</li>
<li>Median is explicitly labeled</li>
</ul>
</div>
</div>
</div>
<div id="reconsidering-tufte" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Reconsidering Tufte<a class="anchor" aria-label="anchor" href="#reconsidering-tufte"><i class="fas fa-link"></i></a>
</h2>
<div id="when-is-redundancy-better" class="section level3" number="3.4.1">
<h3>
<span class="header-section-number">3.4.1</span> When is redundancy better?<a class="anchor" aria-label="anchor" href="#when-is-redundancy-better"><i class="fas fa-link"></i></a>
</h3>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:double-bar-chart"></span>
<img src="https://dougmccune.com/blog/wp-content/uploads/2011/04/burglary1.png" alt="Double-time bar chart of crime in the city of San Francisco, 2009-10. Source: [Visualizing Time with the Double-Time Bar Chart](https://dougmccune.com/blog/2011/04/26/visualizing-time-with-the-double-time-bar-chart/)" width="80%"><p class="caption">
Figure 1.1: Double-time bar chart of crime in the city of San Francisco, 2009-10. Source: <a href="https://dougmccune.com/blog/2011/04/26/visualizing-time-with-the-double-time-bar-chart/">Visualizing Time with the Double-Time Bar Chart</a>
</p>
</div>
<ul>
<li>Each set of 24 bars show the same data. The top bars run from midnight to 11pm. The bottom bars run from noon to 11am.</li>
<li>Highlighted regions represent 6-5 (6am-5pm; 6pm-5am)</li>
<li>Colors represent (roughly) day and night (yellow for day, blue for night)</li>
<li>Enables representing trends over a 24 hour period without breaking arbitrarily at midnight</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:double-bar-chart-facet"></span>
<img src="https://dougmccune.com/blog/wp-content/uploads/2011/04/small_multiples_small.png" alt="Double-time bar chart of crime in the city of San Francisco, 2009-10. Source: [Visualizing Time with the Double-Time Bar Chart](https://dougmccune.com/blog/2011/04/26/visualizing-time-with-the-double-time-bar-chart/)" width="80%"><p class="caption">
Figure 1.2: Double-time bar chart of crime in the city of San Francisco, 2009-10. Source: <a href="https://dougmccune.com/blog/2011/04/26/visualizing-time-with-the-double-time-bar-chart/">Visualizing Time with the Double-Time Bar Chart</a>
</p>
</div>
<ul>
<li>The second graph is incredibly redundant, but which is easier to interpret?
<ul>
<li>Does it pass Tufte’s test?</li>
<li>What does it mean to be “integral”?</li>
</ul>
</li>
</ul>
</div>
<div id="does-minimalism-really-help-here" class="section level3" number="3.4.2">
<h3>
<span class="header-section-number">3.4.2</span> Does minimalism really help here?<a class="anchor" aria-label="anchor" href="#does-minimalism-really-help-here"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Accompanying an article declaring that student progress on NAEP tests has come to a virtual standstill</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:naep-junk"></span>
<img src="https://junkcharts.typepad.com/.a/6a00d8341e992c53ef01b7c8b60cd9970b-pi" alt="Chart from Harvard magazine. Source: [Involuntary head-shaking is probably not an intended consequence of data visualization](https://junkcharts.typepad.com/junk_charts/2016/11/involuntary-head-shaking-is-probably-not-an-intended-consequence-of-data-visualization.html)" width="80%"><p class="caption">
Figure 3.1: Chart from Harvard magazine. Source: <a href="https://junkcharts.typepad.com/junk_charts/2016/11/involuntary-head-shaking-is-probably-not-an-intended-consequence-of-data-visualization.html">Involuntary head-shaking is probably not an intended consequence of data visualization</a>
</p>
</div>
<ul>
<li>What is the comparison we should make?</li>
<li>Is this too much color?</li>
<li>Meets Tufte’s minimalist standards, probably has a decent data-ink ratio</li>
<li>Note Grade 4 math scores for whites in 2009-2015 - does this mean no progress or unknown scores?</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:naep-redesign"></span>
<img src="https://junkcharts.typepad.com/.a/6a00d8341e992c53ef01b8d23fe1c7970c-pi" alt="Redesigned chart from Harvard magazine. Source: [Involuntary head-shaking is probably not an intended consequence of data visualization](https://junkcharts.typepad.com/junk_charts/2016/11/involuntary-head-shaking-is-probably-not-an-intended-consequence-of-data-visualization.html)" width="80%"><p class="caption">
Figure 3.2: Redesigned chart from Harvard magazine. Source: <a href="https://junkcharts.typepad.com/junk_charts/2016/11/involuntary-head-shaking-is-probably-not-an-intended-consequence-of-data-visualization.html">Involuntary head-shaking is probably not an intended consequence of data visualization</a>
</p>
</div>
<ul>
<li>This version is much clearer - specifically tells us how to compare the scores</li>
<li>Removes color as a channel, using linetype instead
<ul>
<li>In this situation, is that better or worse?</li>
</ul>
</li>
<li>Title for the graph makes clear the point trying to be made</li>
</ul>
</div>
<div id="experimental-tests-of-tuftes-claims" class="section level3" number="3.4.3">
<h3>
<span class="header-section-number">3.4.3</span> Experimental tests of Tufte’s claims<a class="anchor" aria-label="anchor" href="#experimental-tests-of-tuftes-claims"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>How do we know Tufte’s claims are true? We can test them with experiments!</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:tufte-experiment"></span>
<img src="images/tufte_experiment.png" alt='Source: Figure 2 from [Bateman, Scott, et al. "Useful junk?: the effects of visual embellishment on comprehension and memorability of charts." *Proceedings of the SIGCHI Conference on Human Factors in Computing Systems*. ACM, 2010.](http://www.cedma-europe.org/newsletter%20articles/misc/The%20Effects%20of%20Visual%20Embellishment%20on%20Comprehension%20and%20Memorability%20of%20Charts.pdf)' width="80%"><p class="caption">
Figure 3.3: Source: Figure 2 from <a href="http://www.cedma-europe.org/newsletter%20articles/misc/The%20Effects%20of%20Visual%20Embellishment%20on%20Comprehension%20and%20Memorability%20of%20Charts.pdf">Bateman, Scott, et al. “Useful junk?: the effects of visual embellishment on comprehension and memorability of charts.” <em>Proceedings of the SIGCHI Conference on Human Factors in Computing Systems</em>. ACM, 2010.</a>
</p>
</div>
<div id="protocol" class="section level4" number="3.4.3.1">
<h4>
<span class="header-section-number">3.4.3.1</span> Protocol<a class="anchor" aria-label="anchor" href="#protocol"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>Compared chartjunk versions of graphs to standard/minimalist versions of graphs</li>
<li>Tested individuals on chart description and recall</li>
<li>20 subjects split into short and long-term recall groups
<ul>
<li>Quite a small sample of convenience (university population)</li>
</ul>
</li>
<li>Collected measures
<ul>
<li>Response scores - did the individual correctly read/interpret the chart?</li>
<li>Preferences - which type of chart did the individual prefer? Standard or embellished?</li>
<li>Gaze data - where did the subject look during the experiment? At data regions or embellishment regions?</li>
</ul>
</li>
</ul>
</div>
<div id="results" class="section level4" number="3.4.3.2">
<h4>
<span class="header-section-number">3.4.3.2</span> Results<a class="anchor" aria-label="anchor" href="#results"><i class="fas fa-link"></i></a>
</h4>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:tufte-experiment-results"></span>
<img src="images/tufte_experiment_results.png" alt='Source: Figures 4-6 from [Bateman, Scott, et al. "Useful junk?: the effects of visual embellishment on comprehension and memorability of charts." *Proceedings of the SIGCHI Conference on Human Factors in Computing Systems*. ACM, 2010.](http://www.cedma-europe.org/newsletter%20articles/misc/The%20Effects%20of%20Visual%20Embellishment%20on%20Comprehension%20and%20Memorability%20of%20Charts.pdf)' width="80%"><p class="caption">
Figure 3.4: Source: Figures 4-6 from <a href="http://www.cedma-europe.org/newsletter%20articles/misc/The%20Effects%20of%20Visual%20Embellishment%20on%20Comprehension%20and%20Memorability%20of%20Charts.pdf">Bateman, Scott, et al. “Useful junk?: the effects of visual embellishment on comprehension and memorability of charts.” <em>Proceedings of the SIGCHI Conference on Human Factors in Computing Systems</em>. ACM, 2010.</a>
</p>
</div>
<ul>
<li>No difference for description</li>
<li>No difference for immediate recall</li>
<li>Embellished images slightly better for long-term recall (12-22 days after treatment)</li>
</ul>
</div>
</div>
<div id="discussing-the-results" class="section level3" number="3.4.4">
<h3>
<span class="header-section-number">3.4.4</span> Discussing the results<a class="anchor" aria-label="anchor" href="#discussing-the-results"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Why did the chartjunk not lead to worse description and recall?
<ul>
<li>Chartjunk was related to the topic of the chart</li>
<li>“Gets to the point quicker”</li>
</ul>
</li>
<li>Why would the embellished images produce better long-term recall?
<ul>
<li>Very vivid image</li>
<li>Value message - individual believes author is trying to communicate a set of values</li>
<li>Embellished images produced more value messages</li>
</ul>
</li>
<li>Should visualizations be “objective”?
<ul>
<li>Tufte seems to think so: minimalism leads to the data speaking for itself - do we buy this?</li>
</ul>
</li>
</ul>
</div>
<div id="rethinking-tuftes-definition-of-visual-excellence" class="section level3" number="3.4.5">
<h3>
<span class="header-section-number">3.4.5</span> Rethinking Tufte’s definition of visual excellence<a class="anchor" aria-label="anchor" href="#rethinking-tuftes-definition-of-visual-excellence"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Too many of Tufte’s claims are based on nothing - no evidence to support his minimalistic approach to graphical design</li>
<li>Think of the hockey stick chart vs. xkcd on Earth’s temperature
<ul>
<li>According to Tufte, both probably have a lot of chartjunk (xkcd more so)</li>
<li>But if asked to remember the importance and story of the graph weeks later, which one do you think the average reader would recall better?</li>
</ul>
</li>
</ul>
</div>
<div id="testing-this-theory" class="section level3" number="3.4.6">
<h3>
<span class="header-section-number">3.4.6</span> Testing this theory<a class="anchor" aria-label="anchor" href="#testing-this-theory"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Design an experiment to test the impact/effectiveness of chartjunk vs. minimalism</li>
<li>What protocols/features could we use? How could we deploy the experiment?
<ul>
<li>If deployed on a platform such as Amazon MTurk, what are the benefits and drawbacks?</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="visualizing-uncertainty" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Visualizing uncertainty<a class="anchor" aria-label="anchor" href="#visualizing-uncertainty"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdnote">
<p>Download the necessary data files for the following coding exercises using <code>usethis::use_course("css-data-mining-viz/science-polish")</code>.</p>
</div>
<p>For this example, we’re going to use historical weather data from <a href="https://darksky.net/forecast/33.7546,-84.39/us12/en">Dark Sky</a> about wind speed and temperature trends for downtown Atlanta (<a href="https://www.google.com/maps/place/33%C2%B045'16.4%22N+84%C2%B023'24.0%22W/@33.754557,-84.3921977,17z/">specifically <code>33.754557, -84.390009</code></a>) in 2019. I downloaded this data using Dark Sky’s (about-to-be-retired-because-they-were-bought-by-Apple) API using the <a href="https://github.com/hrbrmstr/darksky"><strong>darksky</strong> package</a>.</p>
<ul>
<li><a href="/data/atl-weather-2019.csv"><code>atl-weather-2019.csv</code></a></li>
</ul>
<div id="load-and-clean-data-2" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> Load and clean data<a class="anchor" aria-label="anchor" href="#load-and-clean-data-2"><i class="fas fa-link"></i></a>
</h3>
<p>First, we load the libraries we’ll be using:</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/">ggridges</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/erocoar/gghalves">gghalves</a></span><span class="op">)</span></code></pre></div>
<p>Then we load the data with <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>. Here I assume that the CSV file lives in a subfolder in my project named <code>data</code>:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weather_atl_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/atl-weather-2019.csv"</span><span class="op">)</span></code></pre></div>
<p>We’ll add a couple columns that we can use for faceting and filling using the <code><a href="https://lubridate.tidyverse.org/reference/month.html">month()</a></code> and <code><a href="https://lubridate.tidyverse.org/reference/day.html">wday()</a></code> functions from <strong>lubridate</strong> for extracting parts of the date:</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weather_atl</span> <span class="op">&lt;-</span> <span class="va">weather_atl_raw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">time</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, abbr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
         Day <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">wday</a></span><span class="op">(</span><span class="va">time</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, abbr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now we’re ready to go!</p>
</div>
<div id="histograms-1" class="section level3" number="3.5.2">
<h3>
<span class="header-section-number">3.5.2</span> Histograms<a class="anchor" aria-label="anchor" href="#histograms-1"><i class="fas fa-link"></i></a>
</h3>
<p>We can first make a histogram of wind speed. We’ll use a bin width of 1 and color the edges of the bars white:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/basic-histogram-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>This is fine enough, but we can improve it by forcing the buckets/bins to start at whole numbers instead of containing ranges like 2.5–3.5. We’ll use the <code>boundary</code> argument for that. We also add <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> to add our own x-axis breaks instead of having things like 2.5, 5, and 7.5:</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"white"</span>, boundary <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/basic-histogram-better-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can show the distribution of wind speed by month if we map the <code>Month</code> column we made onto the fill aesthetic:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"white"</span>, boundary <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/histogram-by-month-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>This is colorful, but it’s impossible to actually interpret. Instead of only filling, we’ll also facet by month to see separate graphs for each month. We can turn off the fill legend because it’s now redundant.</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"white"</span>, boundary <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/histogram-by-month-facet-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Neat! January, March, and April appear to have the most variation in windy days, with a few wind-less days and a few very-windy days, while August was very wind-less.</p>
</div>
<div id="density-plots" class="section level3" number="3.5.3">
<h3>
<span class="header-section-number">3.5.3</span> Density plots<a class="anchor" aria-label="anchor" href="#density-plots"><i class="fas fa-link"></i></a>
</h3>
<p>The code to create a density plot is nearly identical to what we used for the histogram—the only thing we change is the <code>geom</code> layer:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey20"</span>, fill <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/basic-density-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>If we want, we can mess with some of the calculus options like the kernel and bandwidth:</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey20"</span>, fill <span class="op">=</span> <span class="st">"grey50"</span>,
               bw <span class="op">=</span> <span class="fl">0.1</span>, kernel <span class="op">=</span> <span class="st">"epanechnikov"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/density-kernel-bw-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can also fill by month. We’ll make the different layers 50% transparent so we can kind of see through the whole stack:</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/density-fill-by-month-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Even with the transparency, this is really hard to interpret. We can fix this by faceting, like we did with the histograms:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/density-facet-by-month-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Or we can stack the density plots behind each other with <a href="https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html"><strong>ggridges</strong></a>. For that to work, we also need to map <code>Month</code> to the y-axis. We can reverse the y-axis so that January is at the top if we use the <code><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev()</a></code> function:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/ggridges-basic-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can add some extra information to <code><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges()</a></code> with some other arguments like <code>quantile_lines</code>. We can use the <code>quantiles</code> argument to tell the plow how many parts to be cut into. Since we just want to show the median, we’ll set that to 2 so each density plot is divided in half:</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">windSpeed</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>quantile_lines <span class="op">=</span> <span class="cn">TRUE</span>, quantiles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/ggridges-quantile-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Now that we have good working code, we can easily substitute in other variables by changing the x mapping:</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">temperatureHigh</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>quantile_lines <span class="op">=</span> <span class="cn">TRUE</span>, quantiles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/ggridges-quantile-temp-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can get extra fancy if we fill by temperature instead of filling by month. To get this to work, we need to use <code><a href="https://wilkelab.org/ggridges/reference/geom_ridgeline_gradient.html">geom_density_ridges_gradient()</a></code>, and we need to change the <code>fill</code> mapping to the strange looking <code>..x..</code>, which is a weird ggplot trick that tells it to use the variable we mapped to the x-axis. For whatever reason, <code>fill = temperatureHigh</code> doesn’t work 🤷:</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">temperatureHigh</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">..x..</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_ridgeline_gradient.html">geom_density_ridges_gradient</a></span><span class="op">(</span>quantile_lines <span class="op">=</span> <span class="cn">TRUE</span>, quantiles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"plasma"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"High temperature"</span>, y <span class="op">=</span> <span class="cn">NULL</span>, color <span class="op">=</span> <span class="st">"Temp"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/ggridges-gradient-temp-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>And finally, we can get <em>extra</em> fancy and show the distributions for both the high and low temperatures each month. To make this work, we need to manipulate the data a little. Right now there are two columns for high and low temperature: <code>temperatureLow</code> and <code>temperatureHigh</code>. To be able to map temperature to the x-axis and high vs. low to another aesthetic (like <code>linetype</code>), we need a column with the temperature and a column with an indicator variable for whether it is high or low. This data needs to be tidied (since right now we have a variable (high/low) encoded in the column name). We can tidy this data using <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> from <strong>tidyr</strong>, which was already loaded with <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>. In the RStudio primers, you did this same thing with <code><a href="https://tidyr.tidyverse.org/reference/gather.html">gather()</a></code>—<code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> is the newer version of <code><a href="https://tidyr.tidyverse.org/reference/gather.html">gather()</a></code>:</p>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weather_atl_long</span> <span class="op">&lt;-</span> <span class="va">weather_atl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">temperatureLow</span>, <span class="va">temperatureHigh</span><span class="op">)</span>,
               names_to <span class="op">=</span> <span class="st">"temp_type"</span>,
               values_to <span class="op">=</span> <span class="st">"temp"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Clean up the new temp_type column so that "temperatureHigh" becomes "High", etc.</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>temp_type <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">temp_type</span>, 
                            temperatureHigh <span class="op">=</span> <span class="st">"High"</span>,
                            temperatureLow <span class="op">=</span> <span class="st">"Low"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># This is optional—just select a handful of columns</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">temp_type</span>, <span class="va">temp</span>, <span class="va">Month</span><span class="op">)</span> 

<span class="co"># Show the first few rows</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">weather_atl_long</span><span class="op">)</span>
<span class="co">## # A tibble: 6 × 4</span>
<span class="co">##   time                temp_type  temp Month  </span>
<span class="co">##   &lt;dttm&gt;              &lt;chr&gt;     &lt;dbl&gt; &lt;ord&gt;  </span>
<span class="co">## 1 2019-01-01 05:00:00 Low        50.6 January</span>
<span class="co">## 2 2019-01-01 05:00:00 High       63.9 January</span>
<span class="co">## 3 2019-01-02 05:00:00 Low        49.0 January</span>
<span class="co">## 4 2019-01-02 05:00:00 High       57.4 January</span>
<span class="co">## 5 2019-01-03 05:00:00 Low        53.1 January</span>
<span class="co">## 6 2019-01-03 05:00:00 High       55.3 January</span></code></pre></div>
<p>Now we have a column for the temperature (<code>temp</code>) and a column indicating if it is high or low (<code>temp_type</code>). The dataset is also twice as long (730 rows) because each day has two rows (high and low). Let’s plot it and map high/low to the <code>linetype</code> aesthetic to show high/low in the border of the plots:</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl_long</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">temp</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Month</span><span class="op">)</span>, 
                             fill <span class="op">=</span> <span class="va">..x..</span>, linetype <span class="op">=</span> <span class="va">temp_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_ridgeline_gradient.html">geom_density_ridges_gradient</a></span><span class="op">(</span>quantile_lines <span class="op">=</span> <span class="cn">TRUE</span>, quantiles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"plasma"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"High temperature"</span>, y <span class="op">=</span> <span class="cn">NULL</span>, color <span class="op">=</span> <span class="st">"Temp"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/ggridges-gradient-temp-high-low-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Super neat! We can see much wider temperature disparities during the summer, with large gaps between high and low, and relatively equal high/low temperatures during the winter.</p>
</div>
<div id="box-violin-and-rain-cloud-plots" class="section level3" number="3.5.4">
<h3>
<span class="header-section-number">3.5.4</span> Box, violin, and rain cloud plots<a class="anchor" aria-label="anchor" href="#box-violin-and-rain-cloud-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Finally, we can look at the distribution of variables with box plots, violin plots, and other similar graphs. First, we’ll make a box plot of windspeed, filled by the <code>Day</code> variable we made indicating weekday:</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">windSpeed</span>, fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/basic-boxplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can switch this to a violin plot by just changing the <code>geom</code> layer and mapping <code>Day</code> to the x-axis:</p>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">windSpeed</span>, x <span class="op">=</span> <span class="va">Day</span>, fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/basic-violin-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>With violin plots it’s typically good to overlay other geoms. We can add some jittered points for a strip plot:</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">windSpeed</span>, x <span class="op">=</span> <span class="va">Day</span>, fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html">position_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/violin-strip-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can also add larger points for the daily averages. We’ll use a special layer for this: <code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary()</a></code>. It has a slightly different syntax, since we’re not actually mapping a column from the dataset. Instead, we’re feeding a column from a dataset into a function (here <code>"mean"</code>) and then plotting that result:</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">windSpeed</span>, x <span class="op">=</span> <span class="va">Day</span>, fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"point"</span>, fun <span class="op">=</span> <span class="st">"mean"</span>, size <span class="op">=</span> <span class="fl">5</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html">position_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/violin-strip-mean-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can also show the mean and confidence interval at the same time by changing the summary function:</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">windSpeed</span>, x <span class="op">=</span> <span class="va">Day</span>, fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"pointrange"</span>, fun.data <span class="op">=</span> <span class="st">"mean_se"</span>, size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html">position_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/violin-strip-mean-ci-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Overlaying the points directly on top of the violins shows extra information, but it’s also really crowded and hard to read. If we use <a href="https://github.com/erocoar/gghalves">the <strong>gghalves</strong> package</a>, we can use special halved versions of some of these geoms like so:</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Day</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">temperatureHigh</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_point.html">geom_half_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"l"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_boxplot.html">geom_half_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="cn">FALSE</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/gghalves-point-boxplot-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Note the <code>side</code> argument for specifying which half of the column the geom goes. We can also use <code><a href="https://rdrr.io/pkg/gghalves/man/geom_half_violin.html">geom_half_violin()</a></code>:</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Day</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">temperatureHigh</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_point.html">geom_half_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"l"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_violin.html">geom_half_violin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="cn">FALSE</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/gghalves-point-violon-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>If we flip the plot, we can make a <a href="https://micahallen.org/2018/03/15/introducing-raincloud-plots/">rain cloud plot</a>:</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">weather_atl</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">Day</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">temperatureHigh</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_boxplot.html">geom_half_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"l"</span>, width <span class="op">=</span> <span class="fl">0.5</span>, nudge <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_point.html">geom_half_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"l"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gghalves/man/geom_half_violin.html">geom_half_violin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Day</span><span class="op">)</span>, side <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="cn">FALSE</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/gghalves-rain-cloud-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Neat!</p>
</div>
</div>
<div id="building-a-theme" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Building a <code>theme()</code><a class="anchor" aria-label="anchor" href="#building-a-theme"><i class="fas fa-link"></i></a>
</h2>
<p>Consider this example using <code>gapminder</code>:</p>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder_filtered</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">2000</span><span class="op">)</span>

<span class="va">base_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">gapminder_filtered</span>,
  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span>,
    color <span class="op">=</span> <span class="va">continent</span>, size <span class="op">=</span> <span class="va">pop</span>
  <span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Use dollars, and get rid of the cents part (i.e. $300 instead of $300.00)</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/label_dollar.html">dollar_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Format with commas</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="va">comma</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Use viridis</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"plasma"</span>, end <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"GDP per capita"</span>, y <span class="op">=</span> <span class="st">"Life expectancy"</span>,
    color <span class="op">=</span> <span class="st">"Continent"</span>, size <span class="op">=</span> <span class="st">"Population"</span>,
    title <span class="op">=</span> <span class="st">"Here's a cool title"</span>,
    subtitle <span class="op">=</span> <span class="st">"And here's a neat subtitle"</span>,
    caption <span class="op">=</span> <span class="st">"Source: The Gapminder Project"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>

<span class="va">base_plot</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/gapminder-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Now we have <code>base_plot</code> to work with. Here’s what it looks like with <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal()</a></code> applied to it:</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base_plot</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/base-minimal-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>That gets rid of the grey background and is a good start, but we can make lots of improvements. First let’s deal with the gridlines. There are too many. We can get rid of the minor gridlines with by setting them to <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank()</a></code>:</p>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base_plot</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/theme1-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Next let’s add some typographic contrast. We’ll use Roboto Condensed Regular as the base font. Before trying this, make sure you do the following:</p>
<p><strong>On macOS</strong>:</p>
<ul>
<li>Run <code><a href="https://rdrr.io/r/base/capabilities.html">capabilities()</a></code> in your console and verify that <code>TRUE</code> shows up under <code>cairo</code>
</li>
<li>If not, download and install <a href="https://www.xquartz.org/">XQuartz</a>
</li>
</ul>
<p><strong>On Windows</strong>:</p>
<ul>
<li>
<p>Run <code><a href="https://rdrr.io/r/grDevices/windowsFonts.html">windowsFonts()</a></code> in your console and you’ll see a list of all the fonts you can use with R. It’s not a very big list.</p>
<pre class="text"><code>#&gt; $serif
#&gt; [1] "TT Times New Roman"
#&gt;
#&gt; $sans
#&gt; [1] "TT Arial"
#&gt; 
#&gt; $mono
#&gt; [1] "TT Courier New"</code></pre>
<p>You can add Roboto Condensed to your current R session by running this in your console:</p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/grDevices/windowsFonts.html">windowsFonts</a></span><span class="op">(</span>`Roboto Condensed` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/windowsFonts.html">windowsFont</a></span><span class="op">(</span><span class="st">"Roboto Condensed"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now if you run <code><a href="https://rdrr.io/r/grDevices/windowsFonts.html">windowsFonts()</a></code>, you’ll see it in the list:</p>
<pre class="text"><code>#&gt; $serif
#&gt; [1] "TT Times New Roman"
#&gt;
#&gt; $sans
#&gt; [1] "TT Arial"
#&gt; 
#&gt; $mono
#&gt; [1] "TT Courier New"
#&gt;
#&gt; $`Roboto Condensed`
#&gt; [1] "Roboto Condensed"</code></pre>
<p>This only takes effect for your current R session, so if you are knitting a document or if you ever plan on closing RStudio, you’ll need to incorporate this font creation code into your script.</p>
</li>
</ul>
<p>We’ll use the font as the <code>base_family</code> argument. Note how I make it bold with <code>face</code> and change the size with <code><a href="https://ggplot2.tidyverse.org/reference/element.html">rel()</a></code>. Instead of manually setting some arbitrary size, I use <code><a href="https://ggplot2.tidyverse.org/reference/element.html">rel()</a></code> to resize the text in relation to the <code>base_size</code> argument. Using <code>rel(1.7)</code> means 1.7 × <code>base_size</code>, or 20.4 That will rescale according to whatever <code>base_size</code> is—if I shrink it to <code>base_size = 8</code>, the title will scale down accordingly.</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plot_with_good_typography</span> <span class="op">&lt;-</span> <span class="va">base_plot</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Roboto Condensed"</span>, base_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="co"># Bold, bigger title</span>
    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.7</span><span class="op">)</span><span class="op">)</span>,
    <span class="co"># Plain, slightly bigger subtitle that is grey</span>
    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"plain"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span>,
    <span class="co"># Italic, smaller, grey caption that is left-aligned</span>
    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>
      face <span class="op">=</span> <span class="st">"italic"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">0.7</span><span class="op">)</span>,
      color <span class="op">=</span> <span class="st">"grey70"</span>, hjust <span class="op">=</span> <span class="fl">0</span>
    <span class="op">)</span>,
    <span class="co"># Bold legend titles</span>
    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
    <span class="co"># Bold, slightly larger facet titles that are left-aligned for the sake of repetition</span>
    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
    <span class="co"># Bold axis titles</span>
    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
    <span class="co"># Add some space above the x-axis title and make it left-aligned</span>
    axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
    <span class="co"># Add some space to the right of the y-axis title and make it top-aligned</span>
    axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
  <span class="op">)</span>
<span class="va">plot_with_good_typography</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/theme2-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Whoa. That gets us most of the way there! We have good contrast with the typography, with the strong bold and the lighter regular font (<strong>contrast</strong>). Everything is aligned left (<strong>alignment</strong> and <strong>repetition</strong>). By moving the axis titles a little bit away from the labels, we’ve enhanced proximity, since they were too close together (<strong>proximity</strong>). We repeat grey in both the caption and the subtitle (<strong>repetition</strong>).</p>
<p>The only thing I don’t like is that the 2002 isn’t quite aligned with the title and subtitle. This is because the facet labels are in boxes along the top of each plot, and in some themes (like <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw()</a></code>) those facet labels have grey backgrounds. We can turn off the margin in those boxes, or we can add a background, which will then be perfectly aligned with the title and subtitle.</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plot_with_good_typography</span> <span class="op">+</span>
  <span class="co"># Add a light grey background to the facet titles, with no borders</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey90"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
    <span class="co"># Add a thin grey border around all the plots to tie in the facet titles</span>
    panel.border <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey90"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/theme3-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>That looks great!</p>
<p>To save ourselves time in the future, we can store this whole thing as an object that we can then reuse on other plots:</p>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_pretty_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Roboto Condensed"</span>, base_size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>
    panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="co"># Bold, bigger title</span>
    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.7</span><span class="op">)</span><span class="op">)</span>,
    <span class="co"># Plain, slightly bigger subtitle that is grey</span>
    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"plain"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span>,
    <span class="co"># Italic, smaller, grey caption that is left-aligned</span>
    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>
      face <span class="op">=</span> <span class="st">"italic"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">0.7</span><span class="op">)</span>,
      color <span class="op">=</span> <span class="st">"grey70"</span>, hjust <span class="op">=</span> <span class="fl">0</span>
    <span class="op">)</span>,
    <span class="co"># Bold legend titles</span>
    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
    <span class="co"># Bold, slightly larger facet titles that are left-aligned for the sake of repetition</span>
    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
    <span class="co"># Bold axis titles</span>
    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
    <span class="co"># Add some space above the x-axis title and make it left-aligned</span>
    axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
    <span class="co"># Add some space to the right of the y-axis title and make it top-aligned</span>
    axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
    <span class="co"># Add a light grey background to the facet titles, with no borders</span>
    strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey90"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
    <span class="co"># Add a thin grey border around all the plots to tie in the facet titles</span>
    panel.border <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey90"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>Now we can use it on any plot.</p>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mpg_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">mpg</span>,
  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Displacement"</span>, y <span class="op">=</span> <span class="st">"Highway MPG"</span>, color <span class="op">=</span> <span class="st">"Car class"</span>,
    title <span class="op">=</span> <span class="st">"Heavier cars get worse mileage"</span>,
    subtitle <span class="op">=</span> <span class="st">"Except two-seaters?"</span>,
    caption <span class="op">=</span> <span class="st">"Here's a caption"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="va">my_pretty_theme</span>
<span class="va">mpg_example</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/mpg-example-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Super neat!</p>
</div>
<div id="annotations" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Annotations<a class="anchor" aria-label="anchor" href="#annotations"><i class="fas fa-link"></i></a>
</h2>
<p>For this example, we’re again going to use cross-national data from the <a href="https://data.worldbank.org/">World Bank’s Open Data portal</a>. We’ll download the data with the <a href="https://cran.r-project.org/web/packages/WDI/index.html"><strong>WDI</strong> package</a>.</p>
<ul>
<li><a href="https://data-mining-viz.netlify.app/data/wdi_co2.csv"><code>wdi_co2.csv</code></a></li>
</ul>
<div id="load-data-1" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Load data<a class="anchor" aria-label="anchor" href="#load-data-1"><i class="fas fa-link"></i></a>
</h3>
<p>First, we load the libraries we’ll be using:</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>  <span class="co"># For ggplot, dplyr, and friends</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/WDI/">WDI</a></span><span class="op">)</span>        <span class="co"># Get data from the World Bank</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel">ggrepel</a></span><span class="op">)</span>    <span class="co"># For non-overlapping labels</span>

<span class="co"># You need to install ggtext from GitHub. Follow the instructions at </span>
<span class="co"># https://github.com/wilkelab/ggtext</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/">ggtext</a></span><span class="op">)</span>     <span class="co"># For fancier text handling</span></code></pre></div>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SP.POP.TOTL"</span>,     <span class="co"># Population</span>
                <span class="st">"EN.ATM.CO2E.PC"</span>,  <span class="co"># CO2 emissions</span>
                <span class="st">"NY.GDP.PCAP.KD"</span><span class="op">)</span>  <span class="co"># GDP per capita</span>

<span class="va">wdi_co2_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://vincentarelbundock.github.io/WDI/reference/WDI.html">WDI</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"all"</span>, <span class="va">indicators</span>, extra <span class="op">=</span> <span class="cn">TRUE</span>, 
                   start <span class="op">=</span> <span class="fl">1995</span>, end <span class="op">=</span> <span class="fl">2015</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wdi_co2_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"wdi_co2.csv"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Then we clean the data by removing non-country countries and renaming some of the columns.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wdi_clean</span> <span class="op">&lt;-</span> <span class="va">wdi_co2_raw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op">!=</span> <span class="st">"Aggregates"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">iso2c</span>, <span class="va">iso3c</span>, <span class="va">country</span>, <span class="va">year</span>, 
         population <span class="op">=</span> <span class="va">SP.POP.TOTL</span>,
         co2_emissions <span class="op">=</span> <span class="va">EN.ATM.CO2E.PC</span>, 
         gdp_per_cap <span class="op">=</span> <span class="va">NY.GDP.PCAP.KD</span>, 
         <span class="va">region</span>, <span class="va">income</span><span class="op">)</span></code></pre></div>
</div>
<div id="clean-and-reshape-data" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Clean and reshape data<a class="anchor" aria-label="anchor" href="#clean-and-reshape-data"><i class="fas fa-link"></i></a>
</h3>
<p>Next we’ll do some substantial filtering and reshaping so that we can end up with the rankings of CO<sub>2</sub> emissions in 1995 and 2014. I annotate as much as possible below so you can see what’s happening in each step.</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co2_rankings</span> <span class="op">&lt;-</span> <span class="va">wdi_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Get rid of smaller countries</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">population</span> <span class="op">&gt;</span> <span class="fl">200000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Only look at two years</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1995</span>, <span class="fl">2014</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Get rid of all the rows that have missing values in co2_emissions</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">co2_emissions</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Look at each year individually and rank countries based on their emissions that year</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ranking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html">rank</a></span><span class="op">(</span><span class="va">co2_emissions</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Only select a handful of columns, mostly just the newly created "ranking"</span>
  <span class="co"># column and some country identifiers</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">iso3c</span>, <span class="va">country</span>, <span class="va">year</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">ranking</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Right now the data is tidy and long, but we want to widen it and create</span>
  <span class="co"># separate columns for emissions in 1995 and in 2014. pivot_wider() will make</span>
  <span class="co"># new columns based on the existing "year" column (that's what `names_from`</span>
  <span class="co"># does), and it will add "rank_" as the prefix, so that the new columns will</span>
  <span class="co"># be "rank_1995" and "rank_2014". The values that go in those new columns will</span>
  <span class="co"># come from the existing "ranking" column</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">year</span>, names_prefix <span class="op">=</span> <span class="st">"rank_"</span>, values_from <span class="op">=</span> <span class="va">ranking</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Find the difference in ranking between 2014 and 1995</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank_diff <span class="op">=</span> <span class="va">rank_2014</span> <span class="op">-</span> <span class="va">rank_1995</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Remove all rows where there's a missing value in the rank_diff column</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">rank_diff</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Make an indicator variable that is true of the absolute value of the</span>
  <span class="co"># difference in rankings is greater than 25. 25 is arbitrary here—that just</span>
  <span class="co"># felt like a big change in rankings</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>big_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">rank_diff</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">25</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># Make another indicator variable that indicates if the rank improved by a</span>
  <span class="co"># lot, worsened by a lot, or didn't change much. We use the case_when()</span>
  <span class="co"># function, which is like a fancy version of ifelse() that takes multiple</span>
  <span class="co"># conditions. This is how it generally works:</span>
  <span class="co">#</span>
  <span class="co"># case_when(</span>
  <span class="co">#  some_test ~ value_if_true,</span>
  <span class="co">#  some_other_test ~ value_if_true,</span>
  <span class="co">#  TRUE ~ value_otherwise</span>
  <span class="co">#)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>better_big_change <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="va">rank_diff</span> <span class="op">&lt;=</span> <span class="op">-</span><span class="fl">25</span> <span class="op">~</span> <span class="st">"Rank improved"</span>,
    <span class="va">rank_diff</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">~</span> <span class="st">"Rank worsened"</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Rank changed a little"</span>
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Here’s what that reshaped data looked like before:</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wdi_clean</span><span class="op">)</span>
<span class="co">## # A tibble: 6 × 9</span>
<span class="co">##   iso2c iso3c country  year population co2_emissions gdp_per_cap region   income</span>
<span class="co">##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt; </span>
<span class="co">## 1 AD    AND   Andorra  1995      63850          6.66      32577. Europe … High …</span>
<span class="co">## 2 AD    AND   Andorra  1996      64360          7.07      33822. Europe … High …</span>
<span class="co">## 3 AD    AND   Andorra  1997      64327          7.24      36907. Europe … High …</span>
<span class="co">## 4 AD    AND   Andorra  1999      64370          7.98      39621. Europe … High …</span>
<span class="co">## 5 AD    AND   Andorra  2000      65390          8.02      40379. Europe … High …</span>
<span class="co">## 6 AD    AND   Andorra  2001      67341          7.79      42393. Europe … High …</span></code></pre></div>
<p>And here’s what it looks like now:</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">co2_rankings</span><span class="op">)</span>
<span class="co">## # A tibble: 6 × 9</span>
<span class="co">##   iso3c country           region income rank_1995 rank_2014 rank_diff big_change</span>
<span class="co">##   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;lgl&gt;     </span>
<span class="co">## 1 ARE   United Arab Emir… Middl… High …       170       176         6 FALSE     </span>
<span class="co">## 2 AFG   Afghanistan       South… Low i…         9        21        12 FALSE     </span>
<span class="co">## 3 ALB   Albania           Europ… Upper…        54        79        25 TRUE      </span>
<span class="co">## 4 ARM   Armenia           Europ… Upper…        71        77         6 FALSE     </span>
<span class="co">## 5 AGO   Angola            Sub-S… Lower…        59        69        10 FALSE     </span>
<span class="co">## 6 ARG   Argentina         Latin… Upper…       104       121        17 FALSE     </span>
<span class="co">## # … with 1 more variable: better_big_change &lt;chr&gt;</span></code></pre></div>
</div>
<div id="plot-the-data-and-annotate" class="section level3" number="3.7.3">
<h3>
<span class="header-section-number">3.7.3</span> Plot the data and annotate<a class="anchor" aria-label="anchor" href="#plot-the-data-and-annotate"><i class="fas fa-link"></i></a>
</h3>
<p>I use IBM Plex Sans in this plot. You can <a href="https://fonts.google.com/specimen/IBM+Plex+Sans">download it from Google Fonts</a>.</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># These three functions make it so all geoms that use text, label, and</span>
<span class="co"># label_repel will use IBM Plex Sans as the font. Those layers are *not*</span>
<span class="co"># influenced by whatever you include in the base_family argument in something</span>
<span class="co"># like theme_bw(), so ordinarily you'd need to specify the font in each</span>
<span class="co"># individual annotate(geom = "text") layer or geom_label() layer, and that's</span>
<span class="co"># tedious! This removes that tediousness.</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/update_defaults.html">update_geom_defaults</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"IBM Plex Sans"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/update_defaults.html">update_geom_defaults</a></span><span class="op">(</span><span class="st">"label"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"IBM Plex Sans"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/update_defaults.html">update_geom_defaults</a></span><span class="op">(</span><span class="st">"label_repel"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"IBM Plex Sans"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">co2_rankings</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rank_1995</span>, y <span class="op">=</span> <span class="va">rank_2014</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add a reference line that goes from the bottom corner to the top corner</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"segment"</span>, x <span class="op">=</span> <span class="fl">0</span>, xend <span class="op">=</span> <span class="fl">172</span>, y <span class="op">=</span> <span class="fl">0</span>, yend <span class="op">=</span> <span class="fl">178</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add points and color them by the type of change in rankings</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">better_big_change</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add repelled labels. Only use data where big_change is TRUE. Fill them by</span>
  <span class="co"># the type of change (so they match the color in geom_point() above) and use</span>
  <span class="co"># white text</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_label_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">co2_rankings</span>, <span class="va">big_change</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span>,
                   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">country</span>, fill <span class="op">=</span> <span class="va">better_big_change</span><span class="op">)</span>,
                   color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add notes about what the outliers mean in the bottom left and top right</span>
  <span class="co"># corners. These are italicized and light grey. The text in the bottom corner</span>
  <span class="co"># is justified to the right with hjust = 1, and the text in the top corner is</span>
  <span class="co"># justified to the left with hjust = 0</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">170</span>, y <span class="op">=</span> <span class="fl">6</span>, label <span class="op">=</span> <span class="st">"Outliers improving"</span>, 
           fontface <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">2</span>, y <span class="op">=</span> <span class="fl">170</span>, label <span class="op">=</span> <span class="st">"Outliers worsening"</span>, 
           fontface <span class="op">=</span> <span class="st">"italic"</span>, hjust <span class="op">=</span> <span class="fl">0</span>, color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add mostly transparent rectangles in the bottom right and top left corners</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"rect"</span>, xmin <span class="op">=</span> <span class="fl">0</span>, xmax <span class="op">=</span> <span class="fl">25</span>, ymin <span class="op">=</span> <span class="fl">0</span>, ymax <span class="op">=</span> <span class="fl">25</span>, 
           fill <span class="op">=</span> <span class="st">"#2ECC40"</span>, alpha <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"rect"</span>, xmin <span class="op">=</span> <span class="fl">150</span>, xmax <span class="op">=</span> <span class="fl">178</span>, ymin <span class="op">=</span> <span class="fl">150</span>, ymax <span class="op">=</span> <span class="fl">178</span>, 
           fill <span class="op">=</span> <span class="st">"#FF851B"</span>, alpha <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add text to define what the rectangles abovee actually mean. The \n in</span>
  <span class="co"># "highest\nemitters" will put a line break in the label</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">40</span>, y <span class="op">=</span> <span class="fl">6</span>, label <span class="op">=</span> <span class="st">"Lowest emitters"</span>, 
           hjust <span class="op">=</span> <span class="fl">0</span>, color <span class="op">=</span> <span class="st">"#2ECC40"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">162.5</span>, y <span class="op">=</span> <span class="fl">135</span>, label <span class="op">=</span> <span class="st">"Highest\nemitters"</span>, 
           hjust <span class="op">=</span> <span class="fl">0.5</span>, vjust <span class="op">=</span> <span class="fl">1</span>, lineheight <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"#FF851B"</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add arrows between the text and the rectangles. These use the segment geom,</span>
  <span class="co"># and the arrows are added with the arrow() function, which lets us define the</span>
  <span class="co"># angle of the arrowhead and the length of the arrowhead pieces. Here we use</span>
  <span class="co"># 0.5 lines, which is a unit of measurement that ggplot uses internally (think</span>
  <span class="co"># of how many lines of text fit in the plot). We could also use unit(1, "cm")</span>
  <span class="co"># or unit(0.25, "in") or anything else</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"segment"</span>, x <span class="op">=</span> <span class="fl">38</span>, xend <span class="op">=</span> <span class="fl">20</span>, y <span class="op">=</span> <span class="fl">6</span>, yend <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"#2ECC40"</span>, 
           arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">15</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"segment"</span>, x <span class="op">=</span> <span class="fl">162.5</span>, xend <span class="op">=</span> <span class="fl">162.5</span>, y <span class="op">=</span> <span class="fl">140</span>, yend <span class="op">=</span> <span class="fl">155</span>, color <span class="op">=</span> <span class="st">"#FF851B"</span>, 
           arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">15</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Use three different colors for the points</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey50"</span>, <span class="st">"#0074D9"</span>, <span class="st">"#FF4136"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Use two different colors for the filled labels. There are no grey labels, so</span>
  <span class="co"># we don't have to specify that color</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#0074D9"</span>, <span class="st">"#FF4136"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Make the x and y axes expand all the way to the edges of the plot area and</span>
  <span class="co"># add breaks every 25 units from 0 to 175</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">175</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">175</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Add labels! There are a couple fancy things here.</span>
  <span class="co"># 1. In the title we wrap the 2 of CO2 in the HTML &lt;sub&gt;&lt;/sub&gt; tag so that the</span>
  <span class="co">#    number gets subscripted. The only way this will actually get parsed as </span>
  <span class="co">#    HTML is if we tell the plot.title to use element_markdown() in the </span>
  <span class="co">#    theme() function, and element_markdown() comes from the ggtext package.</span>
  <span class="co"># 2. In the subtitle we bold the two words **improved** and **worsened** using</span>
  <span class="co">#    Markdown asterisks. We also wrap these words with HTML span tags with </span>
  <span class="co">#    inline CSS to specify the color of the text. Like the title, this will </span>
  <span class="co">#    only be processed and parsed as HTML and Markdown if we tell the p</span>
  <span class="co">#    lot.subtitle to use element_markdown() in the theme() function.</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Rank in 1995"</span>, y <span class="op">=</span> <span class="st">"Rank in 2014"</span>,
       title <span class="op">=</span> <span class="st">"Changes in CO&lt;sub&gt;2&lt;/sub&gt; emission rankings between 1995 and 2014"</span>,
       subtitle <span class="op">=</span> <span class="st">"Countries that &lt;span style='color: #0074D9'&gt;**improved**&lt;/span&gt; or &lt;span style='color: #FF4136'&gt;**worsened**&lt;/span&gt; more than 25 positions in the rankings highlighted"</span>,
       caption <span class="op">=</span> <span class="st">"Source: The World Bank.\nCountries with populations of less than 200,000 excluded."</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Turn off the legends for color and fill, since the subtitle includes that</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="cn">FALSE</span>, fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Use theme_bw() with IBM Plex Sans</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"IBM Plex Sans"</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Tell the title and subtitle to be treated as Markdown/HTML, make the title</span>
  <span class="co"># 1.6x the size of the base font, and make the subtitle 1.3x the size of the</span>
  <span class="co"># base font. Also add a little larger margin on the right of the plot so that</span>
  <span class="co"># the 175 doesn't get cut off.</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.6</span><span class="op">)</span><span class="op">)</span>,
        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span><span class="op">)</span>,
        plot.margin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span>, units <span class="op">=</span> <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-scientific-results-polish_files/figure-html/build-pretty-plot-1.png" width="80%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="acknowledgments-1" class="section level2 unnumbered">
<h2>Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Coding examples from <a href="https://datavizm20.classes.andrewheiss.com/">Andrew Heiss</a>
</li>
</ul>
</div>
<div id="session-info-2" class="section level2 unnumbered">
<h2>Session info<a class="anchor" aria-label="anchor" href="#session-info-2"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/sessioninfo/reference/session_info.html">session_info</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## ─ Session info ───────────────────────────────────────────────────────────────</span>
<span class="co">##  setting  value</span>
<span class="co">##  version  R version 4.1.2 (2021-11-01)</span>
<span class="co">##  os       macOS Monterey 12.2.1</span>
<span class="co">##  system   aarch64, darwin20</span>
<span class="co">##  ui       X11</span>
<span class="co">##  language (EN)</span>
<span class="co">##  collate  en_US.UTF-8</span>
<span class="co">##  ctype    en_US.UTF-8</span>
<span class="co">##  tz       America/Chicago</span>
<span class="co">##  date     2022-03-04</span>
<span class="co">##  pandoc   2.17.1.1 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/ (via rmarkdown)</span>
<span class="co">## </span>
<span class="co">## ─ Packages ───────────────────────────────────────────────────────────────────</span>
<span class="co">##  package      * version    date (UTC) lib source</span>
<span class="co">##  assertthat     0.2.1      2019-03-21 [1] CRAN (R 4.1.0)</span>
<span class="co">##  backports      1.4.1      2021-12-13 [1] CRAN (R 4.1.1)</span>
<span class="co">##  bit            4.0.4      2020-08-04 [1] CRAN (R 4.1.1)</span>
<span class="co">##  bit64          4.0.5      2020-08-30 [1] CRAN (R 4.1.0)</span>
<span class="co">##  bookdown       0.24       2021-09-02 [1] CRAN (R 4.1.1)</span>
<span class="co">##  brio           1.1.3      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  broom        * 0.7.12     2022-01-28 [1] CRAN (R 4.1.1)</span>
<span class="co">##  bslib          0.3.1      2021-10-06 [1] CRAN (R 4.1.1)</span>
<span class="co">##  cachem         1.0.6      2021-08-19 [1] CRAN (R 4.1.1)</span>
<span class="co">##  callr          3.7.0      2021-04-20 [1] CRAN (R 4.1.0)</span>
<span class="co">##  cellranger     1.1.0      2016-07-27 [1] CRAN (R 4.1.0)</span>
<span class="co">##  cli            3.2.0      2022-02-14 [1] CRAN (R 4.1.1)</span>
<span class="co">##  codetools      0.2-18     2020-11-04 [1] CRAN (R 4.1.2)</span>
<span class="co">##  colorspace   * 2.0-3      2022-02-21 [1] CRAN (R 4.1.1)</span>
<span class="co">##  crayon         1.5.0      2022-02-14 [1] CRAN (R 4.1.1)</span>
<span class="co">##  curl           4.3.2      2021-06-23 [1] CRAN (R 4.1.0)</span>
<span class="co">##  DBI            1.1.2      2021-12-20 [1] CRAN (R 4.1.1)</span>
<span class="co">##  dbplyr         2.1.1      2021-04-06 [1] CRAN (R 4.1.0)</span>
<span class="co">##  desc           1.4.0      2021-09-28 [1] CRAN (R 4.1.1)</span>
<span class="co">##  devtools     * 2.4.3      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  dichromat    * 2.0-0      2013-01-24 [1] CRAN (R 4.1.0)</span>
<span class="co">##  digest         0.6.29     2021-12-01 [1] CRAN (R 4.1.1)</span>
<span class="co">##  dplyr        * 1.0.8      2022-02-08 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ellipsis       0.3.2      2021-04-29 [1] CRAN (R 4.1.0)</span>
<span class="co">##  emo            0.0.0.9000 2022-01-06 [1] Github (hadley/emo@3f03b11)</span>
<span class="co">##  evaluate       0.15       2022-02-18 [1] CRAN (R 4.1.1)</span>
<span class="co">##  fansi          1.0.2      2022-01-14 [1] CRAN (R 4.1.1)</span>
<span class="co">##  farver         2.1.0      2021-02-28 [1] CRAN (R 4.1.0)</span>
<span class="co">##  fastmap        1.1.0      2021-01-25 [1] CRAN (R 4.1.0)</span>
<span class="co">##  forcats      * 0.5.1      2021-01-27 [1] CRAN (R 4.1.1)</span>
<span class="co">##  fs             1.5.2      2021-12-08 [1] CRAN (R 4.1.1)</span>
<span class="co">##  gapminder    * 0.3.0      2017-10-31 [1] CRAN (R 4.1.0)</span>
<span class="co">##  generics       0.1.2      2022-01-31 [1] CRAN (R 4.1.1)</span>
<span class="co">##  gghalves     * 0.1.1      2020-11-08 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ggplot2      * 3.3.5      2021-06-25 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ggrepel      * 0.9.1      2021-01-15 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ggridges     * 0.5.3      2021-01-08 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ggtext       * 0.1.1      2020-12-17 [1] CRAN (R 4.1.1)</span>
<span class="co">##  ggthemes     * 4.2.4      2021-01-20 [1] CRAN (R 4.1.0)</span>
<span class="co">##  glue           1.6.1      2022-01-22 [1] CRAN (R 4.1.1)</span>
<span class="co">##  gridtext       0.1.4      2020-12-10 [1] CRAN (R 4.1.0)</span>
<span class="co">##  gtable         0.3.0      2019-03-25 [1] CRAN (R 4.1.1)</span>
<span class="co">##  haven          2.4.3      2021-08-04 [1] CRAN (R 4.1.1)</span>
<span class="co">##  here         * 1.0.1      2020-12-13 [1] CRAN (R 4.1.0)</span>
<span class="co">##  highr          0.9        2021-04-16 [1] CRAN (R 4.1.0)</span>
<span class="co">##  hms            1.1.1      2021-09-26 [1] CRAN (R 4.1.1)</span>
<span class="co">##  htmltools      0.5.2      2021-08-25 [1] CRAN (R 4.1.1)</span>
<span class="co">##  httr           1.4.2      2020-07-20 [1] CRAN (R 4.1.0)</span>
<span class="co">##  jquerylib      0.1.4      2021-04-26 [1] CRAN (R 4.1.0)</span>
<span class="co">##  jsonlite       1.8.0      2022-02-22 [1] CRAN (R 4.1.1)</span>
<span class="co">##  knitr        * 1.37       2021-12-16 [1] CRAN (R 4.1.1)</span>
<span class="co">##  labeling       0.4.2      2020-10-20 [1] CRAN (R 4.1.0)</span>
<span class="co">##  lifecycle      1.0.1      2021-09-24 [1] CRAN (R 4.1.1)</span>
<span class="co">##  lubridate    * 1.8.0      2021-10-07 [1] CRAN (R 4.1.1)</span>
<span class="co">##  magrittr       2.0.2      2022-01-26 [1] CRAN (R 4.1.1)</span>
<span class="co">##  markdown       1.1        2019-08-07 [1] CRAN (R 4.1.0)</span>
<span class="co">##  memoise        2.0.1      2021-11-26 [1] CRAN (R 4.1.1)</span>
<span class="co">##  modelr         0.1.8      2020-05-19 [1] CRAN (R 4.1.0)</span>
<span class="co">##  munsell        0.5.0      2018-06-12 [1] CRAN (R 4.1.0)</span>
<span class="co">##  patchwork    * 1.1.1      2020-12-17 [1] CRAN (R 4.1.1)</span>
<span class="co">##  pillar         1.7.0      2022-02-01 [1] CRAN (R 4.1.1)</span>
<span class="co">##  pkgbuild       1.3.1      2021-12-20 [1] CRAN (R 4.1.1)</span>
<span class="co">##  pkgconfig      2.0.3      2019-09-22 [1] CRAN (R 4.1.0)</span>
<span class="co">##  pkgload        1.2.4      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  plyr           1.8.6      2020-03-03 [1] CRAN (R 4.1.0)</span>
<span class="co">##  prettyunits    1.1.1      2020-01-24 [1] CRAN (R 4.1.0)</span>
<span class="co">##  processx       3.5.2      2021-04-30 [1] CRAN (R 4.1.0)</span>
<span class="co">##  ps             1.6.0      2021-02-28 [1] CRAN (R 4.1.0)</span>
<span class="co">##  purrr        * 0.3.4      2020-04-17 [1] CRAN (R 4.1.0)</span>
<span class="co">##  R6             2.5.1      2021-08-19 [1] CRAN (R 4.1.1)</span>
<span class="co">##  RColorBrewer * 1.1-2      2014-12-07 [1] CRAN (R 4.1.0)</span>
<span class="co">##  Rcpp           1.0.8      2022-01-13 [1] CRAN (R 4.1.1)</span>
<span class="co">##  readr        * 2.1.2      2022-01-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  readxl         1.3.1      2019-03-13 [1] CRAN (R 4.1.0)</span>
<span class="co">##  remotes        2.4.2      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  reprex         2.0.1      2021-08-05 [1] CRAN (R 4.1.1)</span>
<span class="co">##  RJSONIO        1.3-1.6    2021-09-16 [1] CRAN (R 4.1.1)</span>
<span class="co">##  rlang          1.0.1      2022-02-03 [1] CRAN (R 4.1.1)</span>
<span class="co">##  rmarkdown      2.11       2021-09-14 [1] CRAN (R 4.1.1)</span>
<span class="co">##  rprojroot      2.0.2      2020-11-15 [1] CRAN (R 4.1.0)</span>
<span class="co">##  rstudioapi     0.13       2020-11-12 [1] CRAN (R 4.1.0)</span>
<span class="co">##  rvest          1.0.2      2021-10-16 [1] CRAN (R 4.1.1)</span>
<span class="co">##  sass           0.4.0      2021-05-12 [1] CRAN (R 4.1.0)</span>
<span class="co">##  scales       * 1.1.1      2020-05-11 [1] CRAN (R 4.1.0)</span>
<span class="co">##  sessioninfo    1.2.2      2021-12-06 [1] CRAN (R 4.1.1)</span>
<span class="co">##  socviz       * 1.2        2020-06-10 [1] CRAN (R 4.1.0)</span>
<span class="co">##  stringi        1.7.6      2021-11-29 [1] CRAN (R 4.1.1)</span>
<span class="co">##  stringr      * 1.4.0      2019-02-10 [1] CRAN (R 4.1.1)</span>
<span class="co">##  testthat       3.1.2      2022-01-20 [1] CRAN (R 4.1.1)</span>
<span class="co">##  tibble       * 3.1.6      2021-11-07 [1] CRAN (R 4.1.1)</span>
<span class="co">##  tidyr        * 1.2.0      2022-02-01 [1] CRAN (R 4.1.1)</span>
<span class="co">##  tidyselect     1.1.2      2022-02-21 [1] CRAN (R 4.1.1)</span>
<span class="co">##  tidyverse    * 1.3.1      2021-04-15 [1] CRAN (R 4.1.0)</span>
<span class="co">##  tzdb           0.2.0      2021-10-27 [1] CRAN (R 4.1.1)</span>
<span class="co">##  usethis      * 2.1.5      2021-12-09 [1] CRAN (R 4.1.1)</span>
<span class="co">##  utf8           1.2.2      2021-07-24 [1] CRAN (R 4.1.0)</span>
<span class="co">##  vctrs          0.3.8      2021-04-29 [1] CRAN (R 4.1.0)</span>
<span class="co">##  viridisLite    0.4.0      2021-04-13 [1] CRAN (R 4.1.0)</span>
<span class="co">##  vroom          1.5.7      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  WDI          * 2.7.6      2022-02-25 [1] CRAN (R 4.1.1)</span>
<span class="co">##  withr          2.4.3      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  xfun           0.29       2021-12-14 [1] CRAN (R 4.1.1)</span>
<span class="co">##  xml2           1.3.3      2021-11-30 [1] CRAN (R 4.1.1)</span>
<span class="co">##  yaml           2.3.5      2022-02-21 [1] CRAN (R 4.1.1)</span>
<span class="co">## </span>
<span class="co">##  [1] /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library</span>
<span class="co">## </span>
<span class="co">## ──────────────────────────────────────────────────────────────────────────────</span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="show-the-numbers.html"><span class="header-section-number">2</span> Showing the right numbers</a></div>
<div class="next"><a href="geoviz.html"><span class="header-section-number">4</span> Geospatial visualizations</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#science-polish"><span class="header-section-number">3</span> Making plots pretty and clean</a></li>
<li>
<a class="nav-link" href="#learning-objectives-3">Learning objectives</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#morning-2"><span class="header-section-number">3.0.1</span> Morning</a></li>
<li><a class="nav-link" href="#afternoon-2"><span class="header-section-number">3.0.2</span> Afternoon</a></li>
</ul>
</li>
<li><a class="nav-link" href="#assigned-readings-2">Assigned readings</a></li>
<li>
<a class="nav-link" href="#tuftes-world"><span class="header-section-number">3.1</span> Tufte’s world</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#what-is-integral"><span class="header-section-number">3.1.1</span> What is integral?</a></li></ul>
</li>
<li><a class="nav-link" href="#chart-junk"><span class="header-section-number">3.2</span> Chart junk</a></li>
<li>
<a class="nav-link" href="#compare-tufte-minimal-graphs-to-traditional-graphs-using-ggplot2"><span class="header-section-number">3.3</span> Compare Tufte minimal graphs to traditional graphs using ggplot2</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#minimal-line-plot"><span class="header-section-number">3.3.1</span> Minimal line plot</a></li>
<li><a class="nav-link" href="#minimal-boxplot"><span class="header-section-number">3.3.2</span> Minimal boxplot</a></li>
<li><a class="nav-link" href="#minimal-barchart"><span class="header-section-number">3.3.3</span> Minimal barchart</a></li>
<li><a class="nav-link" href="#range-frame-scatterplot"><span class="header-section-number">3.3.4</span> Range-frame scatterplot</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#reconsidering-tufte"><span class="header-section-number">3.4</span> Reconsidering Tufte</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#when-is-redundancy-better"><span class="header-section-number">3.4.1</span> When is redundancy better?</a></li>
<li><a class="nav-link" href="#does-minimalism-really-help-here"><span class="header-section-number">3.4.2</span> Does minimalism really help here?</a></li>
<li><a class="nav-link" href="#experimental-tests-of-tuftes-claims"><span class="header-section-number">3.4.3</span> Experimental tests of Tufte’s claims</a></li>
<li><a class="nav-link" href="#discussing-the-results"><span class="header-section-number">3.4.4</span> Discussing the results</a></li>
<li><a class="nav-link" href="#rethinking-tuftes-definition-of-visual-excellence"><span class="header-section-number">3.4.5</span> Rethinking Tufte’s definition of visual excellence</a></li>
<li><a class="nav-link" href="#testing-this-theory"><span class="header-section-number">3.4.6</span> Testing this theory</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualizing-uncertainty"><span class="header-section-number">3.5</span> Visualizing uncertainty</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#load-and-clean-data-2"><span class="header-section-number">3.5.1</span> Load and clean data</a></li>
<li><a class="nav-link" href="#histograms-1"><span class="header-section-number">3.5.2</span> Histograms</a></li>
<li><a class="nav-link" href="#density-plots"><span class="header-section-number">3.5.3</span> Density plots</a></li>
<li><a class="nav-link" href="#box-violin-and-rain-cloud-plots"><span class="header-section-number">3.5.4</span> Box, violin, and rain cloud plots</a></li>
</ul>
</li>
<li><a class="nav-link" href="#building-a-theme"><span class="header-section-number">3.6</span> Building a theme()</a></li>
<li>
<a class="nav-link" href="#annotations"><span class="header-section-number">3.7</span> Annotations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#load-data-1"><span class="header-section-number">3.7.1</span> Load data</a></li>
<li><a class="nav-link" href="#clean-and-reshape-data"><span class="header-section-number">3.7.2</span> Clean and reshape data</a></li>
<li><a class="nav-link" href="#plot-the-data-and-annotate"><span class="header-section-number">3.7.3</span> Plot the data and annotate</a></li>
</ul>
</li>
<li><a class="nav-link" href="#acknowledgments-1">Acknowledgments</a></li>
<li><a class="nav-link" href="#session-info-2">Session info</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Visualization</strong>: MACS 20700/40700" was written by Benjamin Soltoff. It was last built on 2022-03-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
