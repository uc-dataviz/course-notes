<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 2 Showing the right numbers | Data Visualization</title>
  <meta name="description" content="Contains notes for the spring 2022 course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 2 Showing the right numbers | Data Visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Contains notes for the spring 2022 course." />
  <meta name="github-repo" content="uc-dataviz/course-notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 2 Showing the right numbers | Data Visualization" />
  
  <meta name="twitter:description" content="Contains notes for the spring 2022 course." />
  

<meta name="author" content="Benjamin Soltoff" />


<meta name="date" content="2022-03-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-data-viz.html"/>
<link rel="next" href="science-polish.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.21/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact-information"><i class="fa fa-check"></i>Contact information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-schedule"><i class="fa fa-check"></i>Course schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-do-i-need-for-this-course"><i class="fa fa-check"></i>What do I need for this course?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-will-i-be-evaluated"><i class="fa fa-check"></i>How will I be evaluated?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#statement-on-disabilities"><i class="fa fa-check"></i>Statement on Disabilities</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-data-viz.html"><a href="intro-data-viz.html"><i class="fa fa-check"></i><b>1</b> Introduction to data visualization</a>
<ul>
<li class="chapter" data-level="" data-path="intro-data-viz.html"><a href="intro-data-viz.html#learning-objectives"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#morning"><i class="fa fa-check"></i><b>1.0.1</b> Morning</a></li>
<li class="chapter" data-level="1.0.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#afternoon"><i class="fa fa-check"></i><b>1.0.2</b> Afternoon</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-data-viz.html"><a href="intro-data-viz.html#assigned-readings"><i class="fa fa-check"></i>Assigned readings</a></li>
<li class="chapter" data-level="1.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#why-visualize-data"><i class="fa fa-check"></i><b>1.1</b> Why visualize data?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#anscombes-quartet"><i class="fa fa-check"></i><b>1.1.1</b> Anscombe’s quartet</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#datasaurus-dozen"><i class="fa fa-check"></i><b>1.1.2</b> Datasaurus dozen</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#outliers"><i class="fa fa-check"></i><b>1.1.3</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#what-makes-visualizations-bad"><i class="fa fa-check"></i><b>1.2</b> What makes visualizations bad</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#lies"><i class="fa fa-check"></i><b>1.2.1</b> Lies</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#dual-axes"><i class="fa fa-check"></i><b>1.2.2</b> Dual axes</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#lacking-functionality"><i class="fa fa-check"></i><b>1.2.3</b> Lacking functionality</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro-data-viz.html"><a href="intro-data-viz.html#junky"><i class="fa fa-check"></i><b>1.2.4</b> Junky</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#purpose-of-visualizations"><i class="fa fa-check"></i><b>1.3</b> Purpose of visualizations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#statistical-graphics"><i class="fa fa-check"></i><b>1.3.1</b> Statistical graphics</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#information-dashboards"><i class="fa fa-check"></i><b>1.3.2</b> Information dashboards</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#infographics"><i class="fa fa-check"></i><b>1.3.3</b> Infographics</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro-data-viz.html"><a href="intro-data-viz.html#informative-art"><i class="fa fa-check"></i><b>1.3.4</b> Informative art</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro-data-viz.html"><a href="intro-data-viz.html#what-makes-a-good-visualization"><i class="fa fa-check"></i><b>1.4</b> What makes a good visualization</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#dr.-john-snow-and-cholera-outbreak-in-london"><i class="fa fa-check"></i><b>1.4.1</b> Dr. John Snow and cholera outbreak in London</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#minards-map-of-napoleons-march-on-russia"><i class="fa fa-check"></i><b>1.4.2</b> Minard’s map of Napoleon’s march on Russia</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro-data-viz.html"><a href="intro-data-viz.html#perception-and-data-visualization"><i class="fa fa-check"></i><b>1.5</b> Perception and data visualization</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#visual-tasks-and-decoding-graphs"><i class="fa fa-check"></i><b>1.5.1</b> Visual tasks and decoding graphs</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#channels-and-decoding-information"><i class="fa fa-check"></i><b>1.5.2</b> Channels and decoding information</a></li>
<li class="chapter" data-level="1.5.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#example-of-decoding-information"><i class="fa fa-check"></i><b>1.5.3</b> Example of decoding information</a></li>
<li class="chapter" data-level="1.5.4" data-path="intro-data-viz.html"><a href="intro-data-viz.html#choropleths"><i class="fa fa-check"></i><b>1.5.4</b> Choropleths</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro-data-viz.html"><a href="intro-data-viz.html#identifying-appropriate-graphical-forms"><i class="fa fa-check"></i><b>1.6</b> Identifying appropriate graphical forms</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#cairos-truthful-art-suggested-approach"><i class="fa fa-check"></i><b>1.6.1</b> Cairo’s <em>Truthful Art</em> suggested approach</a></li>
<li class="chapter" data-level="1.6.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#what-is-the-story"><i class="fa fa-check"></i><b>1.6.2</b> What is the story?</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="intro-data-viz.html"><a href="intro-data-viz.html#grammar-of-graphics"><i class="fa fa-check"></i><b>1.7</b> Grammar of graphics</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#components-of-the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>1.7.1</b> Components of the layered grammar of graphics</a></li>
<li class="chapter" data-level="1.7.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#layer"><i class="fa fa-check"></i><b>1.7.2</b> Layer</a></li>
<li class="chapter" data-level="1.7.3" data-path="intro-data-viz.html"><a href="intro-data-viz.html#data-and-mapping"><i class="fa fa-check"></i><b>1.7.3</b> Data and mapping</a></li>
<li class="chapter" data-level="1.7.4" data-path="intro-data-viz.html"><a href="intro-data-viz.html#statistical-transformation"><i class="fa fa-check"></i><b>1.7.4</b> Statistical transformation</a></li>
<li class="chapter" data-level="1.7.5" data-path="intro-data-viz.html"><a href="intro-data-viz.html#geometric-objects"><i class="fa fa-check"></i><b>1.7.5</b> Geometric objects</a></li>
<li class="chapter" data-level="1.7.6" data-path="intro-data-viz.html"><a href="intro-data-viz.html#position-adjustment"><i class="fa fa-check"></i><b>1.7.6</b> Position adjustment</a></li>
<li class="chapter" data-level="1.7.7" data-path="intro-data-viz.html"><a href="intro-data-viz.html#scale"><i class="fa fa-check"></i><b>1.7.7</b> Scale</a></li>
<li class="chapter" data-level="1.7.8" data-path="intro-data-viz.html"><a href="intro-data-viz.html#coordinate-system"><i class="fa fa-check"></i><b>1.7.8</b> Coordinate system</a></li>
<li class="chapter" data-level="1.7.9" data-path="intro-data-viz.html"><a href="intro-data-viz.html#faceting"><i class="fa fa-check"></i><b>1.7.9</b> Faceting</a></li>
<li class="chapter" data-level="1.7.10" data-path="intro-data-viz.html"><a href="intro-data-viz.html#defaults"><i class="fa fa-check"></i><b>1.7.10</b> Defaults</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="intro-data-viz.html"><a href="intro-data-viz.html#building-minards-map-in-r"><i class="fa fa-check"></i><b>1.8</b> Building Minard’s map in R</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="intro-data-viz.html"><a href="intro-data-viz.html#exercise-define-the-grammar-of-graphics-for-this-graph"><i class="fa fa-check"></i><b>1.8.1</b> Exercise: Define the grammar of graphics for this graph</a></li>
<li class="chapter" data-level="1.8.2" data-path="intro-data-viz.html"><a href="intro-data-viz.html#write-the-r-code"><i class="fa fa-check"></i><b>1.8.2</b> Write the R code</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-data-viz.html"><a href="intro-data-viz.html#session-info"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="show-the-numbers.html"><a href="show-the-numbers.html"><i class="fa fa-check"></i><b>2</b> Showing the right numbers</a>
<ul>
<li class="chapter" data-level="" data-path="show-the-numbers.html"><a href="show-the-numbers.html#learning-objectives-1"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#morning-1"><i class="fa fa-check"></i><b>2.0.1</b> Morning</a></li>
<li class="chapter" data-level="2.0.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#afternoon-1"><i class="fa fa-check"></i><b>2.0.2</b> Afternoon</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="show-the-numbers.html"><a href="show-the-numbers.html#assigned-readings-1"><i class="fa fa-check"></i>Assigned readings</a></li>
<li class="chapter" data-level="2.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#grammar-of-graphics-review"><i class="fa fa-check"></i><b>2.1</b> Grammar of graphics (review)</a></li>
<li class="chapter" data-level="2.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#grouped-data-and-the-group-aesthetic"><i class="fa fa-check"></i><b>2.2</b> Grouped data and the <code>group</code> aesthetic</a></li>
<li class="chapter" data-level="2.3" data-path="show-the-numbers.html"><a href="show-the-numbers.html#geoms-can-transform-data"><i class="fa fa-check"></i><b>2.3</b> Geoms can transform data</a></li>
<li class="chapter" data-level="2.4" data-path="show-the-numbers.html"><a href="show-the-numbers.html#geom_-functions-call-their-default-stat_-functions-behind-the-scenes"><i class="fa fa-check"></i><b>2.4</b> <code>geom_*()</code> functions call their default <code>stat_*()</code> functions behind the scenes</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#color-in-a-bar-chart"><i class="fa fa-check"></i><b>2.4.1</b> Color in a bar chart</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="show-the-numbers.html"><a href="show-the-numbers.html#histograms-and-kernel-densities"><i class="fa fa-check"></i><b>2.5</b> Histograms and kernel densities</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#subsetting-data-on-the-fly"><i class="fa fa-check"></i><b>2.5.1</b> Subsetting data on the fly</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="show-the-numbers.html"><a href="show-the-numbers.html#avoiding-transformations-when-necessary"><i class="fa fa-check"></i><b>2.6</b> Avoiding transformations when necessary</a></li>
<li class="chapter" data-level="2.7" data-path="show-the-numbers.html"><a href="show-the-numbers.html#cross-tabulation-the-awkward-way"><i class="fa fa-check"></i><b>2.7</b> Cross-tabulation the awkward way</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#calculate-manually"><i class="fa fa-check"></i><b>2.7.1</b> Calculate manually</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="show-the-numbers.html"><a href="show-the-numbers.html#continuous-variables-by-group-or-category"><i class="fa fa-check"></i><b>2.8</b> Continuous variables by group or category</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#boxplots"><i class="fa fa-check"></i><b>2.8.1</b> Boxplots</a></li>
<li class="chapter" data-level="2.8.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#coord_flip"><i class="fa fa-check"></i><b>2.8.2</b> <code>coord_flip()</code></a></li>
<li class="chapter" data-level="2.8.3" data-path="show-the-numbers.html"><a href="show-the-numbers.html#reorder"><i class="fa fa-check"></i><b>2.8.3</b> <code>reorder()</code></a></li>
<li class="chapter" data-level="2.8.4" data-path="show-the-numbers.html"><a href="show-the-numbers.html#strip-chart"><i class="fa fa-check"></i><b>2.8.4</b> Strip chart</a></li>
<li class="chapter" data-level="2.8.5" data-path="show-the-numbers.html"><a href="show-the-numbers.html#cleveland-dotplot"><i class="fa fa-check"></i><b>2.8.5</b> Cleveland dotplot</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="show-the-numbers.html"><a href="show-the-numbers.html#plot-text-directly"><i class="fa fa-check"></i><b>2.9</b> Plot text directly</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#geom_text"><i class="fa fa-check"></i><b>2.9.1</b> <code>geom_text()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="show-the-numbers.html"><a href="show-the-numbers.html#ggrepelgeom_text_repel"><i class="fa fa-check"></i><b>2.10</b> <code>ggrepel::geom_text_repel()</code></a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#label-outliers-only"><i class="fa fa-check"></i><b>2.10.1</b> Label outliers only</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="show-the-numbers.html"><a href="show-the-numbers.html#scales-guides-and-themes"><i class="fa fa-check"></i><b>2.11</b> Scales, guides, and themes</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#labels-breaks-and-limits"><i class="fa fa-check"></i><b>2.11.1</b> Labels, breaks, and limits</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="show-the-numbers.html"><a href="show-the-numbers.html#mapping-data-to-graphics"><i class="fa fa-check"></i><b>2.12</b> Mapping data to graphics</a>
<ul>
<li class="chapter" data-level="2.12.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#load-and-clean-data"><i class="fa fa-check"></i><b>2.12.1</b> Load and clean data</a></li>
<li class="chapter" data-level="2.12.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#histograms"><i class="fa fa-check"></i><b>2.12.2</b> Histograms</a></li>
<li class="chapter" data-level="2.12.3" data-path="show-the-numbers.html"><a href="show-the-numbers.html#points"><i class="fa fa-check"></i><b>2.12.3</b> Points</a></li>
<li class="chapter" data-level="2.12.4" data-path="show-the-numbers.html"><a href="show-the-numbers.html#boxplots-1"><i class="fa fa-check"></i><b>2.12.4</b> Boxplots</a></li>
<li class="chapter" data-level="2.12.5" data-path="show-the-numbers.html"><a href="show-the-numbers.html#summaries"><i class="fa fa-check"></i><b>2.12.5</b> Summaries</a></li>
</ul></li>
<li class="chapter" data-level="2.13" data-path="show-the-numbers.html"><a href="show-the-numbers.html#amounts-and-proportions"><i class="fa fa-check"></i><b>2.13</b> Amounts and proportions</a>
<ul>
<li class="chapter" data-level="2.13.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#load-data"><i class="fa fa-check"></i><b>2.13.1</b> Load data</a></li>
<li class="chapter" data-level="2.13.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#wrangle-data"><i class="fa fa-check"></i><b>2.13.2</b> Wrangle data</a></li>
<li class="chapter" data-level="2.13.3" data-path="show-the-numbers.html"><a href="show-the-numbers.html#bar-plot"><i class="fa fa-check"></i><b>2.13.3</b> Bar plot</a></li>
<li class="chapter" data-level="2.13.4" data-path="show-the-numbers.html"><a href="show-the-numbers.html#lollipop-chart"><i class="fa fa-check"></i><b>2.13.4</b> Lollipop chart</a></li>
<li class="chapter" data-level="2.13.5" data-path="show-the-numbers.html"><a href="show-the-numbers.html#strip-plot"><i class="fa fa-check"></i><b>2.13.5</b> Strip plot</a></li>
<li class="chapter" data-level="2.13.6" data-path="show-the-numbers.html"><a href="show-the-numbers.html#beeswarm-plot"><i class="fa fa-check"></i><b>2.13.6</b> Beeswarm plot</a></li>
<li class="chapter" data-level="2.13.7" data-path="show-the-numbers.html"><a href="show-the-numbers.html#heatmap"><i class="fa fa-check"></i><b>2.13.7</b> Heatmap</a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="show-the-numbers.html"><a href="show-the-numbers.html#comparisons"><i class="fa fa-check"></i><b>2.14</b> Comparisons</a>
<ul>
<li class="chapter" data-level="2.14.1" data-path="show-the-numbers.html"><a href="show-the-numbers.html#load-and-clean-data-1"><i class="fa fa-check"></i><b>2.14.1</b> Load and clean data</a></li>
<li class="chapter" data-level="2.14.2" data-path="show-the-numbers.html"><a href="show-the-numbers.html#small-multiples"><i class="fa fa-check"></i><b>2.14.2</b> Small multiples</a></li>
<li class="chapter" data-level="2.14.3" data-path="show-the-numbers.html"><a href="show-the-numbers.html#sparklines"><i class="fa fa-check"></i><b>2.14.3</b> Sparklines</a></li>
<li class="chapter" data-level="2.14.4" data-path="show-the-numbers.html"><a href="show-the-numbers.html#slopegraphs"><i class="fa fa-check"></i><b>2.14.4</b> Slopegraphs</a></li>
<li class="chapter" data-level="2.14.5" data-path="show-the-numbers.html"><a href="show-the-numbers.html#bump-charts"><i class="fa fa-check"></i><b>2.14.5</b> Bump charts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="show-the-numbers.html"><a href="show-the-numbers.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="show-the-numbers.html"><a href="show-the-numbers.html#session-info-1"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="science-polish.html"><a href="science-polish.html"><i class="fa fa-check"></i><b>3</b> Making plots pretty and clean</a>
<ul>
<li class="chapter" data-level="" data-path="science-polish.html"><a href="science-polish.html#learning-objectives-2"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="science-polish.html"><a href="science-polish.html#morning-2"><i class="fa fa-check"></i><b>3.0.1</b> Morning</a></li>
<li class="chapter" data-level="3.0.2" data-path="science-polish.html"><a href="science-polish.html#afternoon-2"><i class="fa fa-check"></i><b>3.0.2</b> Afternoon</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="science-polish.html"><a href="science-polish.html#assigned-readings-2"><i class="fa fa-check"></i>Assigned readings</a></li>
<li class="chapter" data-level="3.1" data-path="science-polish.html"><a href="science-polish.html#tuftes-world"><i class="fa fa-check"></i><b>3.1</b> Tufte’s world</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="science-polish.html"><a href="science-polish.html#what-is-integral"><i class="fa fa-check"></i><b>3.1.1</b> What is integral?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="science-polish.html"><a href="science-polish.html#chart-junk"><i class="fa fa-check"></i><b>3.2</b> Chart junk</a></li>
<li class="chapter" data-level="3.3" data-path="science-polish.html"><a href="science-polish.html#compare-tufte-minimal-graphs-to-traditional-graphs-using-ggplot2"><i class="fa fa-check"></i><b>3.3</b> Compare Tufte minimal graphs to traditional graphs using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="science-polish.html"><a href="science-polish.html#minimal-line-plot"><i class="fa fa-check"></i><b>3.3.1</b> Minimal line plot</a></li>
<li class="chapter" data-level="3.3.2" data-path="science-polish.html"><a href="science-polish.html#minimal-boxplot"><i class="fa fa-check"></i><b>3.3.2</b> Minimal boxplot</a></li>
<li class="chapter" data-level="3.3.3" data-path="science-polish.html"><a href="science-polish.html#minimal-barchart"><i class="fa fa-check"></i><b>3.3.3</b> Minimal barchart</a></li>
<li class="chapter" data-level="3.3.4" data-path="science-polish.html"><a href="science-polish.html#range-frame-scatterplot"><i class="fa fa-check"></i><b>3.3.4</b> Range-frame scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="science-polish.html"><a href="science-polish.html#reconsidering-tufte"><i class="fa fa-check"></i><b>3.4</b> Reconsidering Tufte</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="science-polish.html"><a href="science-polish.html#when-is-redundancy-better"><i class="fa fa-check"></i><b>3.4.1</b> When is redundancy better?</a></li>
<li class="chapter" data-level="3.4.2" data-path="science-polish.html"><a href="science-polish.html#does-minimalism-really-help-here"><i class="fa fa-check"></i><b>3.4.2</b> Does minimalism really help here?</a></li>
<li class="chapter" data-level="3.4.3" data-path="science-polish.html"><a href="science-polish.html#experimental-tests-of-tuftes-claims"><i class="fa fa-check"></i><b>3.4.3</b> Experimental tests of Tufte’s claims</a></li>
<li class="chapter" data-level="3.4.4" data-path="science-polish.html"><a href="science-polish.html#discussing-the-results"><i class="fa fa-check"></i><b>3.4.4</b> Discussing the results</a></li>
<li class="chapter" data-level="3.4.5" data-path="science-polish.html"><a href="science-polish.html#rethinking-tuftes-definition-of-visual-excellence"><i class="fa fa-check"></i><b>3.4.5</b> Rethinking Tufte’s definition of visual excellence</a></li>
<li class="chapter" data-level="3.4.6" data-path="science-polish.html"><a href="science-polish.html#testing-this-theory"><i class="fa fa-check"></i><b>3.4.6</b> Testing this theory</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="science-polish.html"><a href="science-polish.html#visualizing-uncertainty"><i class="fa fa-check"></i><b>3.5</b> Visualizing uncertainty</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="science-polish.html"><a href="science-polish.html#load-and-clean-data-2"><i class="fa fa-check"></i><b>3.5.1</b> Load and clean data</a></li>
<li class="chapter" data-level="3.5.2" data-path="science-polish.html"><a href="science-polish.html#histograms-1"><i class="fa fa-check"></i><b>3.5.2</b> Histograms</a></li>
<li class="chapter" data-level="3.5.3" data-path="science-polish.html"><a href="science-polish.html#density-plots"><i class="fa fa-check"></i><b>3.5.3</b> Density plots</a></li>
<li class="chapter" data-level="3.5.4" data-path="science-polish.html"><a href="science-polish.html#box-violin-and-rain-cloud-plots"><i class="fa fa-check"></i><b>3.5.4</b> Box, violin, and rain cloud plots</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="science-polish.html"><a href="science-polish.html#building-a-theme"><i class="fa fa-check"></i><b>3.6</b> Building a <code>theme()</code></a></li>
<li class="chapter" data-level="3.7" data-path="science-polish.html"><a href="science-polish.html#annotations"><i class="fa fa-check"></i><b>3.7</b> Annotations</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="science-polish.html"><a href="science-polish.html#load-data-1"><i class="fa fa-check"></i><b>3.7.1</b> Load data</a></li>
<li class="chapter" data-level="3.7.2" data-path="science-polish.html"><a href="science-polish.html#clean-and-reshape-data"><i class="fa fa-check"></i><b>3.7.2</b> Clean and reshape data</a></li>
<li class="chapter" data-level="3.7.3" data-path="science-polish.html"><a href="science-polish.html#plot-the-data-and-annotate"><i class="fa fa-check"></i><b>3.7.3</b> Plot the data and annotate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="science-polish.html"><a href="science-polish.html#acknowledgments-1"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="science-polish.html"><a href="science-polish.html#session-info-2"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="geoviz.html"><a href="geoviz.html"><i class="fa fa-check"></i><b>4</b> Geospatial visualizations</a>
<ul>
<li class="chapter" data-level="" data-path="geoviz.html"><a href="geoviz.html#learning-objectives-3"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="geoviz.html"><a href="geoviz.html#morning-3"><i class="fa fa-check"></i><b>4.0.1</b> Morning</a></li>
<li class="chapter" data-level="4.0.2" data-path="geoviz.html"><a href="geoviz.html#afternoon-3"><i class="fa fa-check"></i><b>4.0.2</b> Afternoon</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="geoviz.html"><a href="geoviz.html#assigned-readings-3"><i class="fa fa-check"></i>Assigned readings</a></li>
<li class="chapter" data-level="4.1" data-path="geoviz.html"><a href="geoviz.html#introduction-to-geospatial-visualization"><i class="fa fa-check"></i><b>4.1</b> Introduction to geospatial visualization</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="geoviz.html"><a href="geoviz.html#john-snow-and-the-broad-street-water-pump"><i class="fa fa-check"></i><b>4.1.1</b> John Snow and the Broad Street water pump</a></li>
<li class="chapter" data-level="4.1.2" data-path="geoviz.html"><a href="geoviz.html#carte-figurative-des-pertes-successives-en-hommes-de-larmée-française-dans-la-campagne-de-russie-1812-1813"><i class="fa fa-check"></i><b>4.1.2</b> <em>Carte figurative des pertes successives en hommes de l’Armée Française dans la campagne de Russie 1812-1813)</em></a></li>
<li class="chapter" data-level="4.1.3" data-path="geoviz.html"><a href="geoviz.html#designing-modern-maps"><i class="fa fa-check"></i><b>4.1.3</b> Designing modern maps</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="geoviz.html"><a href="geoviz.html#drawing-raster-maps-with-ggmap"><i class="fa fa-check"></i><b>4.2</b> Drawing raster maps with <code>ggmap</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="geoviz.html"><a href="geoviz.html#obtain-map-images"><i class="fa fa-check"></i><b>4.2.1</b> Obtain map images</a></li>
<li class="chapter" data-level="4.2.2" data-path="geoviz.html"><a href="geoviz.html#specifying-map-regions"><i class="fa fa-check"></i><b>4.2.2</b> Specifying map regions</a></li>
<li class="chapter" data-level="4.2.3" data-path="geoviz.html"><a href="geoviz.html#types-of-map-tiles"><i class="fa fa-check"></i><b>4.2.3</b> Types of map tiles</a></li>
<li class="chapter" data-level="4.2.4" data-path="geoviz.html"><a href="geoviz.html#import-crime-data"><i class="fa fa-check"></i><b>4.2.4</b> Import crime data</a></li>
<li class="chapter" data-level="4.2.5" data-path="geoviz.html"><a href="geoviz.html#plot-high-level-map-of-crime"><i class="fa fa-check"></i><b>4.2.5</b> Plot high-level map of crime</a></li>
<li class="chapter" data-level="4.2.6" data-path="geoviz.html"><a href="geoviz.html#using-geom_point"><i class="fa fa-check"></i><b>4.2.6</b> Using <code>geom_point()</code></a></li>
<li class="chapter" data-level="4.2.7" data-path="geoviz.html"><a href="geoviz.html#using-stat_density_2d"><i class="fa fa-check"></i><b>4.2.7</b> Using <code>stat_density_2d()</code></a></li>
<li class="chapter" data-level="4.2.8" data-path="geoviz.html"><a href="geoviz.html#looking-for-variation"><i class="fa fa-check"></i><b>4.2.8</b> Looking for variation</a></li>
<li class="chapter" data-level="4.2.9" data-path="geoviz.html"><a href="geoviz.html#locations-of-murders"><i class="fa fa-check"></i><b>4.2.9</b> Locations of murders</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="geoviz.html"><a href="geoviz.html#exercise-chicago-311-data"><i class="fa fa-check"></i><b>4.3</b> Exercise: Chicago 311 data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="geoviz.html"><a href="geoviz.html#visualize-the-311-data"><i class="fa fa-check"></i><b>4.3.1</b> Visualize the 311 data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="geoviz.html"><a href="geoviz.html#importing-spatial-data-files-using-sf"><i class="fa fa-check"></i><b>4.4</b> Importing spatial data files using <code>sf</code></a></li>
<li class="chapter" data-level="4.5" data-path="geoviz.html"><a href="geoviz.html#file-formats"><i class="fa fa-check"></i><b>4.5</b> File formats</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="geoviz.html"><a href="geoviz.html#shapefile"><i class="fa fa-check"></i><b>4.5.1</b> Shapefile</a></li>
<li class="chapter" data-level="4.5.2" data-path="geoviz.html"><a href="geoviz.html#geojson"><i class="fa fa-check"></i><b>4.5.2</b> GeoJSON</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="geoviz.html"><a href="geoviz.html#simple-features"><i class="fa fa-check"></i><b>4.6</b> Simple features</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="geoviz.html"><a href="geoviz.html#what-is-a-feature"><i class="fa fa-check"></i><b>4.6.1</b> What is a feature?</a></li>
<li class="chapter" data-level="4.6.2" data-path="geoviz.html"><a href="geoviz.html#dimensions"><i class="fa fa-check"></i><b>4.6.2</b> Dimensions</a></li>
<li class="chapter" data-level="4.6.3" data-path="geoviz.html"><a href="geoviz.html#simple-feature-geometry-types"><i class="fa fa-check"></i><b>4.6.3</b> Simple feature geometry types</a></li>
<li class="chapter" data-level="4.6.4" data-path="geoviz.html"><a href="geoviz.html#coordinate-reference-system"><i class="fa fa-check"></i><b>4.6.4</b> Coordinate reference system</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="geoviz.html"><a href="geoviz.html#simple-features-in-r"><i class="fa fa-check"></i><b>4.7</b> Simple features in R</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="geoviz.html"><a href="geoviz.html#importing-spatial-data-using-sf"><i class="fa fa-check"></i><b>4.7.1</b> Importing spatial data using <code>sf</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="geoviz.html"><a href="geoviz.html#drawing-vector-maps-with-sf-and-ggplot2"><i class="fa fa-check"></i><b>4.8</b> Drawing vector maps with <code>sf</code> and <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="geoviz.html"><a href="geoviz.html#import-usa-state-boundaries"><i class="fa fa-check"></i><b>4.8.1</b> Import USA state boundaries</a></li>
<li class="chapter" data-level="4.8.2" data-path="geoviz.html"><a href="geoviz.html#draw-the-boundaries"><i class="fa fa-check"></i><b>4.8.2</b> Draw the boundaries</a></li>
<li class="chapter" data-level="4.8.3" data-path="geoviz.html"><a href="geoviz.html#add-data-to-the-map"><i class="fa fa-check"></i><b>4.8.3</b> Add data to the map</a></li>
<li class="chapter" data-level="4.8.4" data-path="geoviz.html"><a href="geoviz.html#changing-map-projection"><i class="fa fa-check"></i><b>4.8.4</b> Changing map projection</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="geoviz.html"><a href="geoviz.html#practice-drawing-vector-maps"><i class="fa fa-check"></i><b>4.9</b> Practice drawing vector maps</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="geoviz.html"><a href="geoviz.html#american-community-survey"><i class="fa fa-check"></i><b>4.9.1</b> American Community Survey</a></li>
<li class="chapter" data-level="4.9.2" data-path="geoviz.html"><a href="geoviz.html#exercise-visualize-income-data"><i class="fa fa-check"></i><b>4.9.2</b> Exercise: Visualize income data</a></li>
<li class="chapter" data-level="4.9.3" data-path="geoviz.html"><a href="geoviz.html#exercise-customize-your-maps"><i class="fa fa-check"></i><b>4.9.3</b> Exercise: Customize your maps</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="geoviz.html"><a href="geoviz.html#selecting-optimal-color-palettes"><i class="fa fa-check"></i><b>4.10</b> Selecting optimal color palettes</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="geoviz.html"><a href="geoviz.html#color-brewer"><i class="fa fa-check"></i><b>4.10.1</b> Color Brewer</a></li>
<li class="chapter" data-level="4.10.2" data-path="geoviz.html"><a href="geoviz.html#viridis"><i class="fa fa-check"></i><b>4.10.2</b> Viridis</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="geoviz.html"><a href="geoviz.html#session-info-3"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>5</b> Shiny applications</a>
<ul>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#learning-objectives-4"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="shiny.html"><a href="shiny.html#morning-4"><i class="fa fa-check"></i><b>5.0.1</b> Morning</a></li>
<li class="chapter" data-level="5.0.2" data-path="shiny.html"><a href="shiny.html#afternoon-4"><i class="fa fa-check"></i><b>5.0.2</b> Afternoon</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#assigned-readings-4"><i class="fa fa-check"></i>Assigned readings</a></li>
<li class="chapter" data-level="5.1" data-path="shiny.html"><a href="shiny.html#what-is-shiny"><i class="fa fa-check"></i><b>5.1</b> What is Shiny?</a></li>
<li class="chapter" data-level="5.2" data-path="shiny.html"><a href="shiny.html#before-we-begin"><i class="fa fa-check"></i><b>5.2</b> Before we begin</a></li>
<li class="chapter" data-level="5.3" data-path="shiny.html"><a href="shiny.html#shiny-app-basics"><i class="fa fa-check"></i><b>5.3</b> Shiny app basics</a></li>
<li class="chapter" data-level="5.4" data-path="shiny.html"><a href="shiny.html#create-an-empty-shiny-app"><i class="fa fa-check"></i><b>5.4</b> Create an empty Shiny app</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="shiny.html"><a href="shiny.html#alternate-way-to-create-a-shiny-app-separate-ui-and-server-files"><i class="fa fa-check"></i><b>5.4.1</b> Alternate way to create a Shiny app: separate UI and server files</a></li>
<li class="chapter" data-level="5.4.2" data-path="shiny.html"><a href="shiny.html#let-rstudio-fill-out-a-shiny-app-template-for-you"><i class="fa fa-check"></i><b>5.4.2</b> Let RStudio fill out a Shiny app template for you</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="shiny.html"><a href="shiny.html#load-the-dataset"><i class="fa fa-check"></i><b>5.5</b> Load the dataset</a></li>
<li class="chapter" data-level="5.6" data-path="shiny.html"><a href="shiny.html#build-the-basic-ui"><i class="fa fa-check"></i><b>5.6</b> Build the basic UI</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="shiny.html"><a href="shiny.html#add-plain-text-to-the-ui"><i class="fa fa-check"></i><b>5.6.1</b> Add plain text to the UI</a></li>
<li class="chapter" data-level="5.6.2" data-path="shiny.html"><a href="shiny.html#add-formatted-text-and-other-html-elements"><i class="fa fa-check"></i><b>5.6.2</b> Add formatted text and other HTML elements</a></li>
<li class="chapter" data-level="5.6.3" data-path="shiny.html"><a href="shiny.html#add-a-title"><i class="fa fa-check"></i><b>5.6.3</b> Add a title</a></li>
<li class="chapter" data-level="5.6.4" data-path="shiny.html"><a href="shiny.html#add-a-layout"><i class="fa fa-check"></i><b>5.6.4</b> Add a layout</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="shiny.html"><a href="shiny.html#all-ui-functions-are-simply-html-wrappers"><i class="fa fa-check"></i><b>5.7</b> All UI functions are simply HTML wrappers</a></li>
<li class="chapter" data-level="5.8" data-path="shiny.html"><a href="shiny.html#add-inputs-to-the-ui"><i class="fa fa-check"></i><b>5.8</b> Add inputs to the UI</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="shiny.html"><a href="shiny.html#input-for-hourly-wage"><i class="fa fa-check"></i><b>5.8.1</b> Input for hourly wage</a></li>
<li class="chapter" data-level="5.8.2" data-path="shiny.html"><a href="shiny.html#input-for-fullpart-time"><i class="fa fa-check"></i><b>5.8.2</b> Input for full/part-time</a></li>
<li class="chapter" data-level="5.8.3" data-path="shiny.html"><a href="shiny.html#input-for-department"><i class="fa fa-check"></i><b>5.8.3</b> Input for department</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="shiny.html"><a href="shiny.html#add-placeholders-for-outputs"><i class="fa fa-check"></i><b>5.9</b> Add placeholders for outputs</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="shiny.html"><a href="shiny.html#output-for-a-plot-of-the-results"><i class="fa fa-check"></i><b>5.9.1</b> Output for a plot of the results</a></li>
<li class="chapter" data-level="5.9.2" data-path="shiny.html"><a href="shiny.html#output-for-a-table-summary-of-the-results"><i class="fa fa-check"></i><b>5.9.2</b> Output for a table summary of the results</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="shiny.html"><a href="shiny.html#checkpoint-what-our-app-looks-like-after-implementing-the-ui"><i class="fa fa-check"></i><b>5.10</b> Checkpoint: what our app looks like after implementing the UI</a></li>
<li class="chapter" data-level="5.11" data-path="shiny.html"><a href="shiny.html#implement-server-logic-to-create-outputs"><i class="fa fa-check"></i><b>5.11</b> Implement server logic to create outputs</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="shiny.html"><a href="shiny.html#building-an-output"><i class="fa fa-check"></i><b>5.11.1</b> Building an output</a></li>
<li class="chapter" data-level="5.11.2" data-path="shiny.html"><a href="shiny.html#making-an-output-react-to-an-input"><i class="fa fa-check"></i><b>5.11.2</b> Making an output react to an input</a></li>
<li class="chapter" data-level="5.11.3" data-path="shiny.html"><a href="shiny.html#building-the-plot-output"><i class="fa fa-check"></i><b>5.11.3</b> Building the plot output</a></li>
<li class="chapter" data-level="5.11.4" data-path="shiny.html"><a href="shiny.html#building-the-table-output"><i class="fa fa-check"></i><b>5.11.4</b> Building the table output</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="shiny.html"><a href="shiny.html#reactivity-101"><i class="fa fa-check"></i><b>5.12</b> Reactivity 101</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="shiny.html"><a href="shiny.html#creating-and-accessing-reactive-variables"><i class="fa fa-check"></i><b>5.12.1</b> Creating and accessing reactive variables</a></li>
<li class="chapter" data-level="5.12.2" data-path="shiny.html"><a href="shiny.html#using-reactive-variables-to-reduce-code-duplication"><i class="fa fa-check"></i><b>5.12.2</b> Using reactive variables to reduce code duplication</a></li>
<li class="chapter" data-level="5.12.3" data-path="shiny.html"><a href="shiny.html#blank-plots-showing-up"><i class="fa fa-check"></i><b>5.12.3</b> Blank plots showing up</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="shiny.html"><a href="shiny.html#using-uioutput-to-create-ui-elements-dynamically"><i class="fa fa-check"></i><b>5.13</b> Using <code>uiOutput()</code> to create UI elements dynamically</a>
<ul>
<li class="chapter" data-level="5.13.1" data-path="shiny.html"><a href="shiny.html#basic-example-of-uioutput"><i class="fa fa-check"></i><b>5.13.1</b> Basic example of <code>uiOutput()</code></a></li>
<li class="chapter" data-level="5.13.2" data-path="shiny.html"><a href="shiny.html#use-uioutput-in-our-app-to-populate-the-job-titles"><i class="fa fa-check"></i><b>5.13.2</b> Use <code>uiOutput()</code> in our app to populate the job titles</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="shiny.html"><a href="shiny.html#final-shiny-app-code"><i class="fa fa-check"></i><b>5.14</b> Final Shiny app code</a></li>
<li class="chapter" data-level="5.15" data-path="shiny.html"><a href="shiny.html#share-your-app-with-the-world"><i class="fa fa-check"></i><b>5.15</b> Share your app with the world</a>
<ul>
<li class="chapter" data-level="5.15.1" data-path="shiny.html"><a href="shiny.html#host-on-shinyapps.io"><i class="fa fa-check"></i><b>5.15.1</b> Host on shinyapps.io</a></li>
<li class="chapter" data-level="5.15.2" data-path="shiny.html"><a href="shiny.html#host-on-a-shiny-server"><i class="fa fa-check"></i><b>5.15.2</b> Host on a Shiny Server</a></li>
</ul></li>
<li class="chapter" data-level="5.16" data-path="shiny.html"><a href="shiny.html#more-shiny-features-to-check-out"><i class="fa fa-check"></i><b>5.16</b> More Shiny features to check out</a>
<ul>
<li class="chapter" data-level="5.16.1" data-path="shiny.html"><a href="shiny.html#shiny-in-rmarkdown"><i class="fa fa-check"></i><b>5.16.1</b> Shiny in Rmarkdown</a></li>
<li class="chapter" data-level="5.16.2" data-path="shiny.html"><a href="shiny.html#use-conditionalpanel-to-conditionally-show-ui-elements"><i class="fa fa-check"></i><b>5.16.2</b> Use <code>conditionalPanel()</code> to conditionally show UI elements</a></li>
<li class="chapter" data-level="5.16.3" data-path="shiny.html"><a href="shiny.html#use-navbarpage-or-tabsetpanel-to-have-multiple-tabs-in-the-ui"><i class="fa fa-check"></i><b>5.16.3</b> Use <code>navbarPage()</code> or <code>tabsetPanel()</code> to have multiple tabs in the UI</a></li>
<li class="chapter" data-level="5.16.4" data-path="shiny.html"><a href="shiny.html#use-dt-for-beautiful-interactive-tables"><i class="fa fa-check"></i><b>5.16.4</b> Use DT for beautiful, interactive tables</a></li>
<li class="chapter" data-level="5.16.5" data-path="shiny.html"><a href="shiny.html#use-isolate-function-to-remove-a-dependency-on-a-reactive-variable"><i class="fa fa-check"></i><b>5.16.5</b> Use isolate() function to remove a dependency on a reactive variable</a></li>
<li class="chapter" data-level="5.16.6" data-path="shiny.html"><a href="shiny.html#use-updateinput-functions-to-update-input-values-programmatically"><i class="fa fa-check"></i><b>5.16.6</b> Use <code>update*Input()</code> functions to update input values programmatically</a></li>
<li class="chapter" data-level="5.16.7" data-path="shiny.html"><a href="shiny.html#scoping-rules-in-shiny-apps"><i class="fa fa-check"></i><b>5.16.7</b> Scoping rules in Shiny apps</a></li>
<li class="chapter" data-level="5.16.8" data-path="shiny.html"><a href="shiny.html#use-global.r-to-define-objects-available-to-both-ui.r-and-server.r"><i class="fa fa-check"></i><b>5.16.8</b> Use global.R to define objects available to both ui.R and server.R</a></li>
<li class="chapter" data-level="5.16.9" data-path="shiny.html"><a href="shiny.html#add-images"><i class="fa fa-check"></i><b>5.16.9</b> Add images</a></li>
<li class="chapter" data-level="5.16.10" data-path="shiny.html"><a href="shiny.html#add-javascriptcss"><i class="fa fa-check"></i><b>5.16.10</b> Add JavaScript/CSS</a></li>
</ul></li>
<li class="chapter" data-level="5.17" data-path="shiny.html"><a href="shiny.html#awesome-add-on-packages-to-shiny"><i class="fa fa-check"></i><b>5.17</b> Awesome add-on packages to Shiny</a></li>
<li class="chapter" data-level="5.18" data-path="shiny.html"><a href="shiny.html#resources"><i class="fa fa-check"></i><b>5.18</b> Resources</a></li>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#acknowledgments-2"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#session-info-4"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="show-the-numbers" class="section level1" number="2">
<h1><span class="header-section-number">Day 2</span> Showing the right numbers</h1>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="show-the-numbers.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-2"><a href="show-the-numbers.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb25-3"><a href="show-the-numbers.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(socviz)</span>
<span id="cb25-4"><a href="show-the-numbers.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb25-5"><a href="show-the-numbers.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb25-6"><a href="show-the-numbers.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb25-7"><a href="show-the-numbers.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb25-8"><a href="show-the-numbers.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb25-9"><a href="show-the-numbers.html#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<div id="learning-objectives-1" class="section level2 unnumbered">
<h2>Learning objectives</h2>
<div id="morning-1" class="section level3" number="2.0.1">
<h3><span class="header-section-number">2.0.1</span> Morning</h3>
<ul>
<li>Expand on the different types of geometric objects used by <code>ggplot2</code></li>
<li>Demonstrate the ability of <code>ggplot2</code> to calculate statistical transformations</li>
<li>Review the grammar of graphics and <code>ggplot2</code> workflow</li>
<li>Combine <code>ggplot2</code> with <code>dplyr</code> and data transformation prior to constructing the graph</li>
</ul>
</div>
<div id="afternoon-1" class="section level3" number="2.0.2">
<h3><span class="header-section-number">2.0.2</span> Afternoon</h3>
<ul>
<li>Demonstrate techniques for mapping data to graphics</li>
<li>Introduce alternative visualizations for displaying amounts and proportions</li>
<li>Consider advanced visualizations for comparisons</li>
</ul>
</div>
</div>
<div id="assigned-readings-1" class="section level2 unnumbered">
<h2>Assigned readings</h2>
<ul>
<li>Chapters 4-5, <span class="citation">Healy (<a href="#ref-healy2018data" role="doc-biblioref">2018</a>)</span> - accessible via the <a href="https://socviz.co/">book’s website</a></li>
</ul>
</div>
<div id="grammar-of-graphics-review" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Grammar of graphics (review)</h2>
<p>The <strong>grammar of graphics</strong> is a set of rules for how to produce graphics from data, taking <strong>pieces of data</strong> and <strong>mapping</strong> them to <strong>geometric objects</strong> (like points and lines) that have <strong>aesthetic attributes</strong> (like position, color, and size), together with further rules for <strong>transforming the data if needed</strong>, adjusting <strong>scales</strong>, or projecting the results onto a <strong>coordinate system</strong>.</p>
</div>
<div id="grouped-data-and-the-group-aesthetic" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Grouped data and the <code>group</code> aesthetic</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="show-the-numbers.html#cb26-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb26-2"><a href="show-the-numbers.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gapminder,</span>
<span id="cb26-3"><a href="show-the-numbers.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb26-4"><a href="show-the-numbers.html#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> year,</span>
<span id="cb26-5"><a href="show-the-numbers.html#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> gdpPercap</span>
<span id="cb26-6"><a href="show-the-numbers.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-7"><a href="show-the-numbers.html#cb26-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-8"><a href="show-the-numbers.html#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="show-the-numbers.html#cb26-9" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/gapminder-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>This doesn’t look right. It is trying to draw a single line for all the observations. But look at the structure of <code>gapminder</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="show-the-numbers.html#cb27-1" aria-hidden="true" tabindex="-1"></a>gapminder</span>
<span id="cb27-2"><a href="show-the-numbers.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1,704 × 6</span></span>
<span id="cb27-3"><a href="show-the-numbers.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb27-4"><a href="show-the-numbers.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb27-5"><a href="show-the-numbers.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb27-6"><a href="show-the-numbers.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb27-7"><a href="show-the-numbers.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb27-8"><a href="show-the-numbers.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb27-9"><a href="show-the-numbers.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb27-10"><a href="show-the-numbers.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb27-11"><a href="show-the-numbers.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb27-12"><a href="show-the-numbers.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb27-13"><a href="show-the-numbers.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb27-14"><a href="show-the-numbers.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb27-15"><a href="show-the-numbers.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 1,694 more rows</span></span></code></pre></div>
<p>It is one-row-per-country-per-year. We use <code>group</code> to identify the column that tells us this structure so we draw one line per country.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="show-the-numbers.html#cb28-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> gapminder, <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb28-2"><a href="show-the-numbers.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> year,</span>
<span id="cb28-3"><a href="show-the-numbers.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> gdpPercap</span>
<span id="cb28-4"><a href="show-the-numbers.html#cb28-4" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb28-5"><a href="show-the-numbers.html#cb28-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> country))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/gapminder-group-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="show-the-numbers.html#cb29-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb29-2"><a href="show-the-numbers.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gapminder,</span>
<span id="cb29-3"><a href="show-the-numbers.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb29-4"><a href="show-the-numbers.html#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> year,</span>
<span id="cb29-5"><a href="show-the-numbers.html#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> gdpPercap</span>
<span id="cb29-6"><a href="show-the-numbers.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-7"><a href="show-the-numbers.html#cb29-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-8"><a href="show-the-numbers.html#cb29-8" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_line</span>(</span>
<span id="cb29-9"><a href="show-the-numbers.html#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span></span>
<span id="cb29-10"><a href="show-the-numbers.html#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">group =</span> country)</span>
<span id="cb29-11"><a href="show-the-numbers.html#cb29-11" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb29-12"><a href="show-the-numbers.html#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/gapminder-facet-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>A <strong>facet</strong> is not a geom. It is a way of arranging geoms. Facet’s use R’s formula syntax. Read the <code>~</code> as “on” or “by”.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="show-the-numbers.html#cb30-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_line</span>(</span>
<span id="cb30-2"><a href="show-the-numbers.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="st">&quot;gray70&quot;</span>,</span>
<span id="cb30-3"><a href="show-the-numbers.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">group =</span> country)</span>
<span id="cb30-4"><a href="show-the-numbers.html#cb30-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb30-5"><a href="show-the-numbers.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(</span>
<span id="cb30-6"><a href="show-the-numbers.html#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.1</span>,</span>
<span id="cb30-7"><a href="show-the-numbers.html#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">&quot;loess&quot;</span>,</span>
<span id="cb30-8"><a href="show-the-numbers.html#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> <span class="cn">FALSE</span></span>
<span id="cb30-9"><a href="show-the-numbers.html#cb30-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-10"><a href="show-the-numbers.html#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb30-11"><a href="show-the-numbers.html#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent, <span class="at">ncol =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb30-12"><a href="show-the-numbers.html#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-13"><a href="show-the-numbers.html#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb30-14"><a href="show-the-numbers.html#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;GDP per capita&quot;</span>,</span>
<span id="cb30-15"><a href="show-the-numbers.html#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;GDP per capita on Five Continents&quot;</span></span>
<span id="cb30-16"><a href="show-the-numbers.html#cb30-16" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/labs-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The <code>labs()</code> function lets you name labels, title, subtitle, etc.</p>
</div>
<div id="geoms-can-transform-data" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Geoms can transform data</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="show-the-numbers.html#cb31-1" aria-hidden="true" tabindex="-1"></a>gss_sm</span>
<span id="cb31-2"><a href="show-the-numbers.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,867 × 32</span></span>
<span id="cb31-3"><a href="show-the-numbers.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="do">##     year    id ballot       age childs sibs   degree race  sex   region income16</span></span>
<span id="cb31-4"><a href="show-the-numbers.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt; &lt;labelled&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;labe&gt; &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt;   </span></span>
<span id="cb31-5"><a href="show-the-numbers.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  2016     1 1             47      3 2      Bache… White Male  New E… $170000…</span></span>
<span id="cb31-6"><a href="show-the-numbers.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  2016     2 2             61      0 3      High … White Male  New E… $50000 …</span></span>
<span id="cb31-7"><a href="show-the-numbers.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  2016     3 3             72      2 3      Bache… White Male  New E… $75000 …</span></span>
<span id="cb31-8"><a href="show-the-numbers.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  2016     4 1             43      4 3      High … White Fema… New E… $170000…</span></span>
<span id="cb31-9"><a href="show-the-numbers.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  2016     5 3             55      2 2      Gradu… White Fema… New E… $170000…</span></span>
<span id="cb31-10"><a href="show-the-numbers.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  2016     6 2             53      2 2      Junio… White Fema… New E… $60000 …</span></span>
<span id="cb31-11"><a href="show-the-numbers.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7  2016     7 1             50      2 2      High … White Male  New E… $170000…</span></span>
<span id="cb31-12"><a href="show-the-numbers.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8  2016     8 3             23      3 6      High … Other Fema… Middl… $30000 …</span></span>
<span id="cb31-13"><a href="show-the-numbers.html#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9  2016     9 1             45      3 5      High … Black Male  Middl… $60000 …</span></span>
<span id="cb31-14"><a href="show-the-numbers.html#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  2016    10 3             71      4 1      Junio… White Male  Middl… $60000 …</span></span>
<span id="cb31-15"><a href="show-the-numbers.html#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 2,857 more rows, and 21 more variables: relig &lt;fct&gt;, marital &lt;fct&gt;,</span></span>
<span id="cb31-16"><a href="show-the-numbers.html#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="do">## #   padeg &lt;fct&gt;, madeg &lt;fct&gt;, partyid &lt;fct&gt;, polviews &lt;fct&gt;, happy &lt;fct&gt;,</span></span>
<span id="cb31-17"><a href="show-the-numbers.html#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="do">## #   partners &lt;fct&gt;, grass &lt;fct&gt;, zodiac &lt;fct&gt;, pres12 &lt;labelled&gt;,</span></span>
<span id="cb31-18"><a href="show-the-numbers.html#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="do">## #   wtssall &lt;dbl&gt;, income_rc &lt;fct&gt;, agegrp &lt;fct&gt;, ageq &lt;fct&gt;, siblings &lt;fct&gt;,</span></span>
<span id="cb31-19"><a href="show-the-numbers.html#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="do">## #   kids &lt;fct&gt;, religion &lt;fct&gt;, bigregion &lt;fct&gt;, partners_rc &lt;fct&gt;, obama &lt;dbl&gt;</span></span></code></pre></div>
<p><code>gss_sm</code> contains a subset of General Social Survey questions from 2016.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="show-the-numbers.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(<span class="at">x =</span> gss_sm, religion)</span>
<span id="cb32-2"><a href="show-the-numbers.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 2</span></span>
<span id="cb32-3"><a href="show-the-numbers.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   religion       n</span></span>
<span id="cb32-4"><a href="show-the-numbers.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;      &lt;int&gt;</span></span>
<span id="cb32-5"><a href="show-the-numbers.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Protestant  1371</span></span>
<span id="cb32-6"><a href="show-the-numbers.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Catholic     649</span></span>
<span id="cb32-7"><a href="show-the-numbers.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Jewish        51</span></span>
<span id="cb32-8"><a href="show-the-numbers.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 None         619</span></span>
<span id="cb32-9"><a href="show-the-numbers.html#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 Other        159</span></span>
<span id="cb32-10"><a href="show-the-numbers.html#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 &lt;NA&gt;          18</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="show-the-numbers.html#cb33-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb33-2"><a href="show-the-numbers.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb33-3"><a href="show-the-numbers.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bigregion)</span>
<span id="cb33-4"><a href="show-the-numbers.html#cb33-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-5"><a href="show-the-numbers.html#cb33-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/obtain-count-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The <code>y</code>-axis variable <code>count</code> is not in the data. Instead, ggplot has calculated it for us. It does this by using the default <code>stat_*()</code> function associated with <code>geom_bar()</code>, <code>stat_count()</code>. This function can compute two new variables, <code>count</code> and <code>prop</code> (short for <strong>proportion</strong>). The <code>count</code> statistic is the default one used.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="show-the-numbers.html#cb34-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb34-2"><a href="show-the-numbers.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb34-3"><a href="show-the-numbers.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bigregion)</span>
<span id="cb34-4"><a href="show-the-numbers.html#cb34-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-5"><a href="show-the-numbers.html#cb34-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">stat</span>(prop)))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/prop-wrong-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="show-the-numbers.html#cb35-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb35-2"><a href="show-the-numbers.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb35-3"><a href="show-the-numbers.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bigregion)</span>
<span id="cb35-4"><a href="show-the-numbers.html#cb35-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-5"><a href="show-the-numbers.html#cb35-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">stat</span>(prop), <span class="at">group =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/prop-right-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>By default <code>stat(prop)</code> is calculated within each bar. If you want to calculate the proportion of all the rows in the data frame, add <code>group = 1</code>.</p>
</div>
<div id="geom_-functions-call-their-default-stat_-functions-behind-the-scenes" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> <code>geom_*()</code> functions call their default <code>stat_*()</code> functions behind the scenes</h2>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="show-the-numbers.html#cb36-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>()</span>
<span id="cb36-2"><a href="show-the-numbers.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="show-the-numbers.html#cb36-3" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">stat_count</span>()</span></code></pre></div>
<div id="color-in-a-bar-chart" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Color in a bar chart</h3>
<p>If you want to use color as an aesthetic to communicate additional information in a bar chart, pass it using the <code>fill</code> aesthetic. <code>color</code> defines the border of the bar.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="show-the-numbers.html#cb37-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb37-2"><a href="show-the-numbers.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb37-3"><a href="show-the-numbers.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> religion)</span>
<span id="cb37-4"><a href="show-the-numbers.html#cb37-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-5"><a href="show-the-numbers.html#cb37-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/bar-chart-color-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="show-the-numbers.html#cb38-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb38-2"><a href="show-the-numbers.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb38-3"><a href="show-the-numbers.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> religion, <span class="at">color =</span> religion)</span>
<span id="cb38-4"><a href="show-the-numbers.html#cb38-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-5"><a href="show-the-numbers.html#cb38-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/bar-chart-color-2.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="show-the-numbers.html#cb39-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb39-2"><a href="show-the-numbers.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb39-3"><a href="show-the-numbers.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> religion, <span class="at">fill =</span> religion)</span>
<span id="cb39-4"><a href="show-the-numbers.html#cb39-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-5"><a href="show-the-numbers.html#cb39-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/bar-chart-color-3.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="show-the-numbers.html#cb40-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb40-2"><a href="show-the-numbers.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb40-3"><a href="show-the-numbers.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> religion, <span class="at">fill =</span> religion)</span>
<span id="cb40-4"><a href="show-the-numbers.html#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-5"><a href="show-the-numbers.html#cb40-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/bar-chart-color-4.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="histograms-and-kernel-densities" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Histograms and kernel densities</h2>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="show-the-numbers.html#cb41-1" aria-hidden="true" tabindex="-1"></a>midwest</span>
<span id="cb41-2"><a href="show-the-numbers.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 437 × 28</span></span>
<span id="cb41-3"><a href="show-the-numbers.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="do">##      PID county  state  area poptotal popdensity popwhite popblack popamerindian</span></span>
<span id="cb41-4"><a href="show-the-numbers.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;    &lt;int&gt;      &lt;dbl&gt;    &lt;int&gt;    &lt;int&gt;         &lt;int&gt;</span></span>
<span id="cb41-5"><a href="show-the-numbers.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1   561 ADAMS   IL    0.052    66090      1271.    63917     1702            98</span></span>
<span id="cb41-6"><a href="show-the-numbers.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2   562 ALEXAN… IL    0.014    10626       759      7054     3496            19</span></span>
<span id="cb41-7"><a href="show-the-numbers.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3   563 BOND    IL    0.022    14991       681.    14477      429            35</span></span>
<span id="cb41-8"><a href="show-the-numbers.html#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4   564 BOONE   IL    0.017    30806      1812.    29344      127            46</span></span>
<span id="cb41-9"><a href="show-the-numbers.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5   565 BROWN   IL    0.018     5836       324.     5264      547            14</span></span>
<span id="cb41-10"><a href="show-the-numbers.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6   566 BUREAU  IL    0.05     35688       714.    35157       50            65</span></span>
<span id="cb41-11"><a href="show-the-numbers.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7   567 CALHOUN IL    0.017     5322       313.     5298        1             8</span></span>
<span id="cb41-12"><a href="show-the-numbers.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8   568 CARROLL IL    0.027    16805       622.    16519      111            30</span></span>
<span id="cb41-13"><a href="show-the-numbers.html#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9   569 CASS    IL    0.024    13437       560.    13384       16             8</span></span>
<span id="cb41-14"><a href="show-the-numbers.html#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10   570 CHAMPA… IL    0.058   173025      2983.   146506    16559           331</span></span>
<span id="cb41-15"><a href="show-the-numbers.html#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 427 more rows, and 19 more variables: popasian &lt;int&gt;, popother &lt;int&gt;,</span></span>
<span id="cb41-16"><a href="show-the-numbers.html#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="do">## #   percwhite &lt;dbl&gt;, percblack &lt;dbl&gt;, percamerindan &lt;dbl&gt;, percasian &lt;dbl&gt;,</span></span>
<span id="cb41-17"><a href="show-the-numbers.html#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="do">## #   percother &lt;dbl&gt;, popadults &lt;int&gt;, perchsd &lt;dbl&gt;, percollege &lt;dbl&gt;,</span></span>
<span id="cb41-18"><a href="show-the-numbers.html#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="do">## #   percprof &lt;dbl&gt;, poppovertyknown &lt;int&gt;, percpovertyknown &lt;dbl&gt;,</span></span>
<span id="cb41-19"><a href="show-the-numbers.html#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="do">## #   percbelowpoverty &lt;dbl&gt;, percchildbelowpovert &lt;dbl&gt;, percadultpoverty &lt;dbl&gt;,</span></span>
<span id="cb41-20"><a href="show-the-numbers.html#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="do">## #   percelderlypoverty &lt;dbl&gt;, inmetro &lt;int&gt;, category &lt;chr&gt;</span></span></code></pre></div>
<p><code>midwest</code> contains county-level census data for Midwestern states.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="show-the-numbers.html#cb42-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb42-2"><a href="show-the-numbers.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> midwest,</span>
<span id="cb42-3"><a href="show-the-numbers.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> area)</span>
<span id="cb42-4"><a href="show-the-numbers.html#cb42-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-5"><a href="show-the-numbers.html#cb42-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/histogram-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The default <code>stat</code> for this geom has to make a choice, so the message is letting us know we might want to override it.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="show-the-numbers.html#cb43-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb43-2"><a href="show-the-numbers.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> midwest,</span>
<span id="cb43-3"><a href="show-the-numbers.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> area)</span>
<span id="cb43-4"><a href="show-the-numbers.html#cb43-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-5"><a href="show-the-numbers.html#cb43-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/histogram-10-bins-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div id="subsetting-data-on-the-fly" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Subsetting data on the fly</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="show-the-numbers.html#cb44-1" aria-hidden="true" tabindex="-1"></a>oh_wi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;OH&quot;</span>, <span class="st">&quot;WI&quot;</span>)</span>
<span id="cb44-2"><a href="show-the-numbers.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="show-the-numbers.html#cb44-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb44-4"><a href="show-the-numbers.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">filter</span>(midwest, state <span class="sc">%in%</span> oh_wi),</span>
<span id="cb44-5"><a href="show-the-numbers.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> percollege, <span class="at">fill =</span> state)</span>
<span id="cb44-6"><a href="show-the-numbers.html#cb44-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-7"><a href="show-the-numbers.html#cb44-7" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>(</span>
<span id="cb44-8"><a href="show-the-numbers.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb44-9"><a href="show-the-numbers.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">bins =</span> <span class="dv">20</span></span>
<span id="cb44-10"><a href="show-the-numbers.html#cb44-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/unnamed-chunk-1-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>While this can be done, it is somewhat challenging to read intuitively. You must use <code>alpha</code> to incorporate transparency otherwise all hope at interpreting is lost.</p>
<p>Alternatively, you could use a continuous counterpart, <code>geom_density()</code>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="show-the-numbers.html#cb45-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb45-2"><a href="show-the-numbers.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> midwest,</span>
<span id="cb45-3"><a href="show-the-numbers.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> area)</span>
<span id="cb45-4"><a href="show-the-numbers.html#cb45-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-5"><a href="show-the-numbers.html#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="show-the-numbers.html#cb45-6" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/density-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="show-the-numbers.html#cb46-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb46-2"><a href="show-the-numbers.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> midwest,</span>
<span id="cb46-3"><a href="show-the-numbers.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb46-4"><a href="show-the-numbers.html#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> area,</span>
<span id="cb46-5"><a href="show-the-numbers.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> state,</span>
<span id="cb46-6"><a href="show-the-numbers.html#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> state</span>
<span id="cb46-7"><a href="show-the-numbers.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-8"><a href="show-the-numbers.html#cb46-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-9"><a href="show-the-numbers.html#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="show-the-numbers.html#cb46-10" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/density-fill-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="avoiding-transformations-when-necessary" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Avoiding transformations when necessary</h2>
<p>Sometimes no transformation is necessary. Consider the <code>titanic</code> dataset</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="show-the-numbers.html#cb47-1" aria-hidden="true" tabindex="-1"></a>titanic</span>
<span id="cb47-2"><a href="show-the-numbers.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="do">##       fate    sex    n percent</span></span>
<span id="cb47-3"><a href="show-the-numbers.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 perished   male 1364    62.0</span></span>
<span id="cb47-4"><a href="show-the-numbers.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 perished female  126     5.7</span></span>
<span id="cb47-5"><a href="show-the-numbers.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 survived   male  367    16.7</span></span>
<span id="cb47-6"><a href="show-the-numbers.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 survived female  344    15.6</span></span></code></pre></div>
<p>Here the data has already been summarized. What if we want to make a bar chart?</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="show-the-numbers.html#cb48-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb48-2"><a href="show-the-numbers.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> titanic,</span>
<span id="cb48-3"><a href="show-the-numbers.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb48-4"><a href="show-the-numbers.html#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> fate,</span>
<span id="cb48-5"><a href="show-the-numbers.html#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> percent,</span>
<span id="cb48-6"><a href="show-the-numbers.html#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> sex</span>
<span id="cb48-7"><a href="show-the-numbers.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-8"><a href="show-the-numbers.html#cb48-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-9"><a href="show-the-numbers.html#cb48-9" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_bar</span>(</span>
<span id="cb48-10"><a href="show-the-numbers.html#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb48-11"><a href="show-the-numbers.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb48-12"><a href="show-the-numbers.html#cb48-12" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/titanic-bar-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Even more conveniently, use <code>geom_col()</code></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="show-the-numbers.html#cb49-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> titanic, <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb49-2"><a href="show-the-numbers.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> fate,</span>
<span id="cb49-3"><a href="show-the-numbers.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> percent,</span>
<span id="cb49-4"><a href="show-the-numbers.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill =</span> sex</span>
<span id="cb49-5"><a href="show-the-numbers.html#cb49-5" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb49-6"><a href="show-the-numbers.html#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="show-the-numbers.html#cb49-7" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/titanic-col-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="show-the-numbers.html#cb50-1" aria-hidden="true" tabindex="-1"></a>oecd_sum</span>
<span id="cb50-2"><a href="show-the-numbers.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 57 × 5</span></span>
<span id="cb50-3"><a href="show-the-numbers.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   year [57]</span></span>
<span id="cb50-4"><a href="show-the-numbers.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     year other   usa  diff hi_lo</span></span>
<span id="cb50-5"><a href="show-the-numbers.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb50-6"><a href="show-the-numbers.html#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  1960  68.6  69.9 1.30  Below</span></span>
<span id="cb50-7"><a href="show-the-numbers.html#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  1961  69.2  70.4 1.20  Below</span></span>
<span id="cb50-8"><a href="show-the-numbers.html#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  1962  68.9  70.2 1.30  Below</span></span>
<span id="cb50-9"><a href="show-the-numbers.html#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  1963  69.1  70   0.900 Below</span></span>
<span id="cb50-10"><a href="show-the-numbers.html#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  1964  69.5  70.3 0.800 Below</span></span>
<span id="cb50-11"><a href="show-the-numbers.html#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  1965  69.6  70.3 0.700 Below</span></span>
<span id="cb50-12"><a href="show-the-numbers.html#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7  1966  69.9  70.3 0.400 Below</span></span>
<span id="cb50-13"><a href="show-the-numbers.html#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8  1967  70.1  70.7 0.600 Below</span></span>
<span id="cb50-14"><a href="show-the-numbers.html#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9  1968  70.1  70.4 0.300 Below</span></span>
<span id="cb50-15"><a href="show-the-numbers.html#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  1969  70.1  70.6 0.5   Below</span></span>
<span id="cb50-16"><a href="show-the-numbers.html#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 47 more rows</span></span>
<span id="cb50-17"><a href="show-the-numbers.html#cb50-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-18"><a href="show-the-numbers.html#cb50-18" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb50-19"><a href="show-the-numbers.html#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> oecd_sum,</span>
<span id="cb50-20"><a href="show-the-numbers.html#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> diff, <span class="at">fill =</span> hi_lo)</span>
<span id="cb50-21"><a href="show-the-numbers.html#cb50-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-22"><a href="show-the-numbers.html#cb50-22" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">labs</span>(</span>
<span id="cb50-23"><a href="show-the-numbers.html#cb50-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Difference in Years&quot;</span>,</span>
<span id="cb50-24"><a href="show-the-numbers.html#cb50-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;The US Life Expectancy Gap&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Difference between US and OECD</span></span>
<span id="cb50-25"><a href="show-the-numbers.html#cb50-25" aria-hidden="true" tabindex="-1"></a><span class="st">average life expectancies, 1960-2015&quot;</span>,</span>
<span id="cb50-26"><a href="show-the-numbers.html#cb50-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Data: OECD. After a chart by Christopher Ingraham,</span></span>
<span id="cb50-27"><a href="show-the-numbers.html#cb50-27" aria-hidden="true" tabindex="-1"></a><span class="st">Washington Post, December 27th 2017.&quot;</span></span>
<span id="cb50-28"><a href="show-the-numbers.html#cb50-28" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/oecd-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="cross-tabulation-the-awkward-way" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Cross-tabulation the awkward way</h2>
<p>More commonly, we would add color to a bar graph to cross-classify two categorical variables. This is the graphical equivalent of a frequency table. We can do this directly within <code>ggplot()</code>, however it is also more convoluted.</p>
<p>Consider examining religious preference by census region.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="show-the-numbers.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb51-2"><a href="show-the-numbers.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb51-3"><a href="show-the-numbers.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb51-4"><a href="show-the-numbers.html#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb51-5"><a href="show-the-numbers.html#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb51-6"><a href="show-the-numbers.html#cb51-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-7"><a href="show-the-numbers.html#cb51-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb51-8"><a href="show-the-numbers.html#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>By default we get a stacked bar chart. If we want to make comparisons easier, we could convert this to a proportional bar chart.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="show-the-numbers.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb52-2"><a href="show-the-numbers.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb52-3"><a href="show-the-numbers.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb52-4"><a href="show-the-numbers.html#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb52-5"><a href="show-the-numbers.html#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb52-6"><a href="show-the-numbers.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-7"><a href="show-the-numbers.html#cb52-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb52-8"><a href="show-the-numbers.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-fill-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Now all the bars are the same height, but we lost the ability to see the relative size of each region with respect to the overall total. What if we wanted to show the proportion of religions within regions of the country, but instead of stacking the bars we want separate bars? The first attempt may use <code>position = "dodge"</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="show-the-numbers.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb53-2"><a href="show-the-numbers.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb53-3"><a href="show-the-numbers.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb53-4"><a href="show-the-numbers.html#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb53-5"><a href="show-the-numbers.html#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb53-6"><a href="show-the-numbers.html#cb53-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-7"><a href="show-the-numbers.html#cb53-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb53-8"><a href="show-the-numbers.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-dodge-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Good structure, but we’re back to counts. Let’s directly map the <code>stat(prop)</code> variable to the <code>y</code> aesthetic as well to preserve the proportion on the y-axis.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="show-the-numbers.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb54-2"><a href="show-the-numbers.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb54-3"><a href="show-the-numbers.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb54-4"><a href="show-the-numbers.html#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb54-5"><a href="show-the-numbers.html#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb54-6"><a href="show-the-numbers.html#cb54-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-7"><a href="show-the-numbers.html#cb54-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb54-8"><a href="show-the-numbers.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">stat</span>(prop)), <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-dodge-prop-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Still not correct. Same problem as before. Each individual bar sums to 1. If we want overall proportions for a single variable, we mapped <code>group = 1</code>. What if we do that here but with respect to <code>religion</code>?</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="show-the-numbers.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb55-2"><a href="show-the-numbers.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb55-3"><a href="show-the-numbers.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb55-4"><a href="show-the-numbers.html#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb55-5"><a href="show-the-numbers.html#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb55-6"><a href="show-the-numbers.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-7"><a href="show-the-numbers.html#cb55-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb55-8"><a href="show-the-numbers.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb55-9"><a href="show-the-numbers.html#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">stat</span>(prop),</span>
<span id="cb55-10"><a href="show-the-numbers.html#cb55-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> religion</span>
<span id="cb55-11"><a href="show-the-numbers.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-dodge-prop-religion-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Looks better, but we still have a problem. Bars within a single region do not sum to 1. Instead, bars for any particular religion sum to 1.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="show-the-numbers.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb56-2"><a href="show-the-numbers.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss_sm,</span>
<span id="cb56-3"><a href="show-the-numbers.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> religion)</span>
<span id="cb56-4"><a href="show-the-numbers.html#cb56-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb56-5"><a href="show-the-numbers.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb56-6"><a href="show-the-numbers.html#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">stat</span>(prop),</span>
<span id="cb56-7"><a href="show-the-numbers.html#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> bigregion</span>
<span id="cb56-8"><a href="show-the-numbers.html#cb56-8" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-9"><a href="show-the-numbers.html#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>bigregion)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/region-religion-facet-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The easiest approach is to use <code>facet_wrap()</code> and not force <code>geom_bar()</code> and <code>stat_count()</code> to do all the work in a single step. Instead, we can ask <code>ggplot()</code> to give us a proportional bar chart of religious affiliation, and then facet that by region. The proportions are calculated within each panel, which is the breakdown we wanted. This has the added advantage of not producing too many bars within each category.</p>
<div id="calculate-manually" class="section level3" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Calculate manually</h3>
<p>Rather than doing all the summarizing in <code>ggplot()</code>, we could instead calculate the frequencies and proportions manually using <code>dplyr</code> functions first, then use the summarized data frame as the basis for the bar graph.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="show-the-numbers.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(gss_sm)</span>
<span id="cb57-2"><a href="show-the-numbers.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 2,867</span></span>
<span id="cb57-3"><a href="show-the-numbers.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 32</span></span>
<span id="cb57-4"><a href="show-the-numbers.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ year        &lt;dbl&gt; 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016…</span></span>
<span id="cb57-5"><a href="show-the-numbers.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ id          &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…</span></span>
<span id="cb57-6"><a href="show-the-numbers.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ballot      &lt;labelled&gt; 1, 2, 3, 1, 3, 2, 1, 3, 1, 3, 2, 1, 2, 3, 2, 3, 3, 2,…</span></span>
<span id="cb57-7"><a href="show-the-numbers.html#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ age         &lt;dbl&gt; 47, 61, 72, 43, 55, 53, 50, 23, 45, 71, 33, 86, 32, 60, 76…</span></span>
<span id="cb57-8"><a href="show-the-numbers.html#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ childs      &lt;dbl&gt; 3, 0, 2, 4, 2, 2, 2, 3, 3, 4, 5, 4, 3, 5, 7, 2, 6, 5, 0, 2…</span></span>
<span id="cb57-9"><a href="show-the-numbers.html#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ sibs        &lt;labelled&gt; 2, 3, 3, 3, 2, 2, 2, 6, 5, 1, 4, 4, 3, 6, 0, 1, 3, 8,…</span></span>
<span id="cb57-10"><a href="show-the-numbers.html#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ degree      &lt;fct&gt; Bachelor, High School, Bachelor, High School, Graduate, Ju…</span></span>
<span id="cb57-11"><a href="show-the-numbers.html#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ race        &lt;fct&gt; White, White, White, White, White, White, White, Other, Bl…</span></span>
<span id="cb57-12"><a href="show-the-numbers.html#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ sex         &lt;fct&gt; Male, Male, Male, Female, Female, Female, Male, Female, Ma…</span></span>
<span id="cb57-13"><a href="show-the-numbers.html#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ region      &lt;fct&gt; New England, New England, New England, New England, New En…</span></span>
<span id="cb57-14"><a href="show-the-numbers.html#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ income16    &lt;fct&gt; $170000 or over, $50000 to 59999, $75000 to $89999, $17000…</span></span>
<span id="cb57-15"><a href="show-the-numbers.html#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ relig       &lt;fct&gt; None, None, Catholic, Catholic, None, None, None, Catholic…</span></span>
<span id="cb57-16"><a href="show-the-numbers.html#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ marital     &lt;fct&gt; Married, Never Married, Married, Married, Married, Married…</span></span>
<span id="cb57-17"><a href="show-the-numbers.html#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ padeg       &lt;fct&gt; Graduate, Lt High School, High School, NA, Bachelor, NA, H…</span></span>
<span id="cb57-18"><a href="show-the-numbers.html#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ madeg       &lt;fct&gt; High School, High School, Lt High School, High School, Hig…</span></span>
<span id="cb57-19"><a href="show-the-numbers.html#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ partyid     &lt;fct&gt; &quot;Independent&quot;, &quot;Ind,near Dem&quot;, &quot;Not Str Republican&quot;, &quot;Not …</span></span>
<span id="cb57-20"><a href="show-the-numbers.html#cb57-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ polviews    &lt;fct&gt; Moderate, Liberal, Conservative, Moderate, Slightly Libera…</span></span>
<span id="cb57-21"><a href="show-the-numbers.html#cb57-21" aria-hidden="true" tabindex="-1"></a><span class="do">## $ happy       &lt;fct&gt; Pretty Happy, Pretty Happy, Very Happy, Pretty Happy, Very…</span></span>
<span id="cb57-22"><a href="show-the-numbers.html#cb57-22" aria-hidden="true" tabindex="-1"></a><span class="do">## $ partners    &lt;fct&gt; NA, &quot;1 Partner&quot;, &quot;1 Partner&quot;, NA, &quot;1 Partner&quot;, &quot;1 Partner&quot;…</span></span>
<span id="cb57-23"><a href="show-the-numbers.html#cb57-23" aria-hidden="true" tabindex="-1"></a><span class="do">## $ grass       &lt;fct&gt; NA, Legal, Not Legal, NA, Legal, Legal, NA, Not Legal, NA,…</span></span>
<span id="cb57-24"><a href="show-the-numbers.html#cb57-24" aria-hidden="true" tabindex="-1"></a><span class="do">## $ zodiac      &lt;fct&gt; Aquarius, Scorpio, Pisces, Cancer, Scorpio, Scorpio, Capri…</span></span>
<span id="cb57-25"><a href="show-the-numbers.html#cb57-25" aria-hidden="true" tabindex="-1"></a><span class="do">## $ pres12      &lt;labelled&gt; 3, 1, 2, 2, 1, 1, NA, NA, NA, 2, NA, NA, 1, 1, 2, 1, …</span></span>
<span id="cb57-26"><a href="show-the-numbers.html#cb57-26" aria-hidden="true" tabindex="-1"></a><span class="do">## $ wtssall     &lt;dbl&gt; 0.957, 0.478, 0.957, 1.914, 1.435, 0.957, 1.435, 0.957, 0.…</span></span>
<span id="cb57-27"><a href="show-the-numbers.html#cb57-27" aria-hidden="true" tabindex="-1"></a><span class="do">## $ income_rc   &lt;fct&gt; Gt $170000, Gt $50000, Gt $75000, Gt $170000, Gt $170000, …</span></span>
<span id="cb57-28"><a href="show-the-numbers.html#cb57-28" aria-hidden="true" tabindex="-1"></a><span class="do">## $ agegrp      &lt;fct&gt; Age 45-55, Age 55-65, Age 65+, Age 35-45, Age 45-55, Age 4…</span></span>
<span id="cb57-29"><a href="show-the-numbers.html#cb57-29" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ageq        &lt;fct&gt; Age 34-49, Age 49-62, Age 62+, Age 34-49, Age 49-62, Age 4…</span></span>
<span id="cb57-30"><a href="show-the-numbers.html#cb57-30" aria-hidden="true" tabindex="-1"></a><span class="do">## $ siblings    &lt;fct&gt; 2, 3, 3, 3, 2, 2, 2, 6+, 5, 1, 4, 4, 3, 6+, 0, 1, 3, 6+, 2…</span></span>
<span id="cb57-31"><a href="show-the-numbers.html#cb57-31" aria-hidden="true" tabindex="-1"></a><span class="do">## $ kids        &lt;fct&gt; 3, 0, 2, 4+, 2, 2, 2, 3, 3, 4+, 4+, 4+, 3, 4+, 4+, 2, 4+, …</span></span>
<span id="cb57-32"><a href="show-the-numbers.html#cb57-32" aria-hidden="true" tabindex="-1"></a><span class="do">## $ religion    &lt;fct&gt; None, None, Catholic, Catholic, None, None, None, Catholic…</span></span>
<span id="cb57-33"><a href="show-the-numbers.html#cb57-33" aria-hidden="true" tabindex="-1"></a><span class="do">## $ bigregion   &lt;fct&gt; Northeast, Northeast, Northeast, Northeast, Northeast, Nor…</span></span>
<span id="cb57-34"><a href="show-the-numbers.html#cb57-34" aria-hidden="true" tabindex="-1"></a><span class="do">## $ partners_rc &lt;fct&gt; NA, 1, 1, NA, 1, 1, NA, 1, NA, 3, 1, NA, 1, NA, 0, 1, 0, N…</span></span>
<span id="cb57-35"><a href="show-the-numbers.html#cb57-35" aria-hidden="true" tabindex="-1"></a><span class="do">## $ obama       &lt;dbl&gt; 0, 1, 0, 0, 1, 1, NA, NA, NA, 0, NA, NA, 1, 1, 0, 1, 0, 1,…</span></span>
<span id="cb57-36"><a href="show-the-numbers.html#cb57-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-37"><a href="show-the-numbers.html#cb57-37" aria-hidden="true" tabindex="-1"></a>(rel_by_region <span class="ot">&lt;-</span> gss_sm <span class="sc">%&gt;%</span></span>
<span id="cb57-38"><a href="show-the-numbers.html#cb57-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(bigregion, religion) <span class="sc">%&gt;%</span></span>
<span id="cb57-39"><a href="show-the-numbers.html#cb57-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-40"><a href="show-the-numbers.html#cb57-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">freq =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb57-41"><a href="show-the-numbers.html#cb57-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct =</span> <span class="fu">round</span>((freq <span class="sc">*</span> <span class="dv">100</span>), <span class="dv">0</span>)</span>
<span id="cb57-42"><a href="show-the-numbers.html#cb57-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-43"><a href="show-the-numbers.html#cb57-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>())</span>
<span id="cb57-44"><a href="show-the-numbers.html#cb57-44" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 20 × 5</span></span>
<span id="cb57-45"><a href="show-the-numbers.html#cb57-45" aria-hidden="true" tabindex="-1"></a><span class="do">##    bigregion religion       n    freq   pct</span></span>
<span id="cb57-46"><a href="show-the-numbers.html#cb57-46" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb57-47"><a href="show-the-numbers.html#cb57-47" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Northeast Protestant   158 0.0551      6</span></span>
<span id="cb57-48"><a href="show-the-numbers.html#cb57-48" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Northeast Catholic     162 0.0565      6</span></span>
<span id="cb57-49"><a href="show-the-numbers.html#cb57-49" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Northeast Jewish        27 0.00942     1</span></span>
<span id="cb57-50"><a href="show-the-numbers.html#cb57-50" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Northeast None         112 0.0391      4</span></span>
<span id="cb57-51"><a href="show-the-numbers.html#cb57-51" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Northeast Other         28 0.00977     1</span></span>
<span id="cb57-52"><a href="show-the-numbers.html#cb57-52" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Midwest   Protestant   325 0.113      11</span></span>
<span id="cb57-53"><a href="show-the-numbers.html#cb57-53" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Midwest   Catholic     172 0.0600      6</span></span>
<span id="cb57-54"><a href="show-the-numbers.html#cb57-54" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Midwest   Jewish         3 0.00105     0</span></span>
<span id="cb57-55"><a href="show-the-numbers.html#cb57-55" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Midwest   None         157 0.0548      5</span></span>
<span id="cb57-56"><a href="show-the-numbers.html#cb57-56" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Midwest   Other         33 0.0115      1</span></span>
<span id="cb57-57"><a href="show-the-numbers.html#cb57-57" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 South     Protestant   650 0.227      23</span></span>
<span id="cb57-58"><a href="show-the-numbers.html#cb57-58" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 South     Catholic     160 0.0558      6</span></span>
<span id="cb57-59"><a href="show-the-numbers.html#cb57-59" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 South     Jewish        11 0.00384     0</span></span>
<span id="cb57-60"><a href="show-the-numbers.html#cb57-60" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 South     None         170 0.0593      6</span></span>
<span id="cb57-61"><a href="show-the-numbers.html#cb57-61" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 South     Other         50 0.0174      2</span></span>
<span id="cb57-62"><a href="show-the-numbers.html#cb57-62" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 West      Protestant   238 0.0830      8</span></span>
<span id="cb57-63"><a href="show-the-numbers.html#cb57-63" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 West      Catholic     155 0.0541      5</span></span>
<span id="cb57-64"><a href="show-the-numbers.html#cb57-64" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 West      Jewish        10 0.00349     0</span></span>
<span id="cb57-65"><a href="show-the-numbers.html#cb57-65" aria-hidden="true" tabindex="-1"></a><span class="do">## 19 West      None         180 0.0628      6</span></span>
<span id="cb57-66"><a href="show-the-numbers.html#cb57-66" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 West      Other         48 0.0167      2</span></span></code></pre></div>
<p>Now this is easy to pass into <code>ggplot()</code> and draw the bar graph.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="show-the-numbers.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb58-2"><a href="show-the-numbers.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rel_by_region,</span>
<span id="cb58-3"><a href="show-the-numbers.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb58-4"><a href="show-the-numbers.html#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> bigregion,</span>
<span id="cb58-5"><a href="show-the-numbers.html#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> pct,</span>
<span id="cb58-6"><a href="show-the-numbers.html#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb58-7"><a href="show-the-numbers.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb58-8"><a href="show-the-numbers.html#cb58-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb58-9"><a href="show-the-numbers.html#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge2&quot;</span>) <span class="sc">+</span></span>
<span id="cb58-10"><a href="show-the-numbers.html#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Percent&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Religion&quot;</span>) <span class="sc">+</span></span>
<span id="cb58-11"><a href="show-the-numbers.html#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/rel-by-region-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Instead of using <code>geom_bar()</code>, we use <code>geom_col()</code> because we already summarized the data - we want <code>stat_identity()</code>, not <code>stat_count()</code>. While this figure works, it is not the best we can do. It is generally crowded. Instead, let’s convert it to a faceted plot:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="show-the-numbers.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb59-2"><a href="show-the-numbers.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rel_by_region,</span>
<span id="cb59-3"><a href="show-the-numbers.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb59-4"><a href="show-the-numbers.html#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> religion,</span>
<span id="cb59-5"><a href="show-the-numbers.html#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> pct,</span>
<span id="cb59-6"><a href="show-the-numbers.html#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> religion</span>
<span id="cb59-7"><a href="show-the-numbers.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb59-8"><a href="show-the-numbers.html#cb59-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb59-9"><a href="show-the-numbers.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge2&quot;</span>) <span class="sc">+</span></span>
<span id="cb59-10"><a href="show-the-numbers.html#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Percent&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Religion&quot;</span>) <span class="sc">+</span></span>
<span id="cb59-11"><a href="show-the-numbers.html#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb59-12"><a href="show-the-numbers.html#cb59-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb59-13"><a href="show-the-numbers.html#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>bigregion)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/rel-by-region-plot-facet-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="continuous-variables-by-group-or-category" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Continuous variables by group or category</h2>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="show-the-numbers.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(organdata)</span>
<span id="cb60-2"><a href="show-the-numbers.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 238</span></span>
<span id="cb60-3"><a href="show-the-numbers.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 21</span></span>
<span id="cb60-4"><a href="show-the-numbers.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country          &lt;chr&gt; &quot;Australia&quot;, &quot;Australia&quot;, &quot;Australia&quot;, &quot;Australia&quot;, &quot;…</span></span>
<span id="cb60-5"><a href="show-the-numbers.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ year             &lt;date&gt; NA, 1991-01-01, 1992-01-01, 1993-01-01, 1994-01-01, …</span></span>
<span id="cb60-6"><a href="show-the-numbers.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ donors           &lt;dbl&gt; NA, 12.09, 12.35, 12.51, 10.25, 10.18, 10.59, 10.26, …</span></span>
<span id="cb60-7"><a href="show-the-numbers.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ pop              &lt;int&gt; 17065, 17284, 17495, 17667, 17855, 18072, 18311, 1851…</span></span>
<span id="cb60-8"><a href="show-the-numbers.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ pop_dens         &lt;dbl&gt; 0.220, 0.223, 0.226, 0.228, 0.231, 0.233, 0.237, 0.23…</span></span>
<span id="cb60-9"><a href="show-the-numbers.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ gdp              &lt;int&gt; 16774, 17171, 17914, 18883, 19849, 21079, 21923, 2296…</span></span>
<span id="cb60-10"><a href="show-the-numbers.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ gdp_lag          &lt;int&gt; 16591, 16774, 17171, 17914, 18883, 19849, 21079, 2192…</span></span>
<span id="cb60-11"><a href="show-the-numbers.html#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ health           &lt;dbl&gt; 1300, 1379, 1455, 1540, 1626, 1737, 1846, 1948, 2077,…</span></span>
<span id="cb60-12"><a href="show-the-numbers.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ health_lag       &lt;dbl&gt; 1224, 1300, 1379, 1455, 1540, 1626, 1737, 1846, 1948,…</span></span>
<span id="cb60-13"><a href="show-the-numbers.html#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ pubhealth        &lt;dbl&gt; 4.8, 5.4, 5.4, 5.4, 5.4, 5.5, 5.6, 5.7, 5.9, 6.1, 6.2…</span></span>
<span id="cb60-14"><a href="show-the-numbers.html#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ roads            &lt;dbl&gt; 136.6, 122.3, 112.8, 110.5, 108.0, 111.6, 107.6, 95.4…</span></span>
<span id="cb60-15"><a href="show-the-numbers.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cerebvas         &lt;int&gt; 682, 647, 630, 611, 631, 592, 576, 525, 516, 493, 474…</span></span>
<span id="cb60-16"><a href="show-the-numbers.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ assault          &lt;int&gt; 21, 19, 17, 18, 17, 16, 17, 17, 16, 15, 16, 15, 14, N…</span></span>
<span id="cb60-17"><a href="show-the-numbers.html#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ external         &lt;int&gt; 444, 425, 406, 376, 387, 371, 395, 385, 410, 409, 393…</span></span>
<span id="cb60-18"><a href="show-the-numbers.html#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ txp_pop          &lt;dbl&gt; 0.938, 0.926, 0.915, 0.906, 0.896, 0.885, 0.874, 0.86…</span></span>
<span id="cb60-19"><a href="show-the-numbers.html#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ world            &lt;chr&gt; &quot;Liberal&quot;, &quot;Liberal&quot;, &quot;Liberal&quot;, &quot;Liberal&quot;, &quot;Liberal&quot;…</span></span>
<span id="cb60-20"><a href="show-the-numbers.html#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ opt              &lt;chr&gt; &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;, &quot;In&quot;,…</span></span>
<span id="cb60-21"><a href="show-the-numbers.html#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="do">## $ consent_law      &lt;chr&gt; &quot;Informed&quot;, &quot;Informed&quot;, &quot;Informed&quot;, &quot;Informed&quot;, &quot;Info…</span></span>
<span id="cb60-22"><a href="show-the-numbers.html#cb60-22" aria-hidden="true" tabindex="-1"></a><span class="do">## $ consent_practice &lt;chr&gt; &quot;Informed&quot;, &quot;Informed&quot;, &quot;Informed&quot;, &quot;Informed&quot;, &quot;Info…</span></span>
<span id="cb60-23"><a href="show-the-numbers.html#cb60-23" aria-hidden="true" tabindex="-1"></a><span class="do">## $ consistent       &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes…</span></span>
<span id="cb60-24"><a href="show-the-numbers.html#cb60-24" aria-hidden="true" tabindex="-1"></a><span class="do">## $ ccode            &lt;chr&gt; &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;, &quot;Oz&quot;,…</span></span></code></pre></div>
<div id="boxplots" class="section level3" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Boxplots</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="show-the-numbers.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb61-2"><a href="show-the-numbers.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb61-3"><a href="show-the-numbers.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> donors)</span>
<span id="cb61-4"><a href="show-the-numbers.html#cb61-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb61-5"><a href="show-the-numbers.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-box-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Awkward to have country labels on x-axis. Switch to y-axis.</p>
</div>
<div id="coord_flip" class="section level3" number="2.8.2">
<h3><span class="header-section-number">2.8.2</span> <code>coord_flip()</code></h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="show-the-numbers.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb62-2"><a href="show-the-numbers.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb62-3"><a href="show-the-numbers.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> donors)</span>
<span id="cb62-4"><a href="show-the-numbers.html#cb62-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb62-5"><a href="show-the-numbers.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb62-6"><a href="show-the-numbers.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-flip-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Explicit use of a coordinate transformation system.</p>
</div>
<div id="reorder" class="section level3" number="2.8.3">
<h3><span class="header-section-number">2.8.3</span> <code>reorder()</code></h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="show-the-numbers.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb63-2"><a href="show-the-numbers.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb63-3"><a href="show-the-numbers.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb63-4"><a href="show-the-numbers.html#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(country, donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb63-5"><a href="show-the-numbers.html#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors</span>
<span id="cb63-6"><a href="show-the-numbers.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb63-7"><a href="show-the-numbers.html#cb63-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb63-8"><a href="show-the-numbers.html#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb63-9"><a href="show-the-numbers.html#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb63-10"><a href="show-the-numbers.html#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-reorder-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Place on a more meaningful order.</p>
<p>Add color aesthetic.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="show-the-numbers.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb64-2"><a href="show-the-numbers.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb64-3"><a href="show-the-numbers.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb64-4"><a href="show-the-numbers.html#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(country, donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb64-5"><a href="show-the-numbers.html#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors, <span class="at">fill =</span> world</span>
<span id="cb64-6"><a href="show-the-numbers.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb64-7"><a href="show-the-numbers.html#cb64-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb64-8"><a href="show-the-numbers.html#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb64-9"><a href="show-the-numbers.html#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb64-10"><a href="show-the-numbers.html#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb64-11"><a href="show-the-numbers.html#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-world-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="strip-chart" class="section level3" number="2.8.4">
<h3><span class="header-section-number">2.8.4</span> Strip chart</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="show-the-numbers.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb65-2"><a href="show-the-numbers.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb65-3"><a href="show-the-numbers.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb65-4"><a href="show-the-numbers.html#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(country, donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb65-5"><a href="show-the-numbers.html#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors, <span class="at">color =</span> world</span>
<span id="cb65-6"><a href="show-the-numbers.html#cb65-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-7"><a href="show-the-numbers.html#cb65-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb65-8"><a href="show-the-numbers.html#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb65-9"><a href="show-the-numbers.html#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb65-10"><a href="show-the-numbers.html#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb65-11"><a href="show-the-numbers.html#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/strip-chart-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Hard to see all the points. Add jitter.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="show-the-numbers.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb66-2"><a href="show-the-numbers.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb66-3"><a href="show-the-numbers.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb66-4"><a href="show-the-numbers.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(country, donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb66-5"><a href="show-the-numbers.html#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors, <span class="at">color =</span> world</span>
<span id="cb66-6"><a href="show-the-numbers.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb66-7"><a href="show-the-numbers.html#cb66-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb66-8"><a href="show-the-numbers.html#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb66-9"><a href="show-the-numbers.html#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb66-10"><a href="show-the-numbers.html#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb66-11"><a href="show-the-numbers.html#cb66-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/strip-jitter-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="cleveland-dotplot" class="section level3" number="2.8.5">
<h3><span class="header-section-number">2.8.5</span> Cleveland dotplot</h3>
<div id="calculate-summary-statistics" class="section level4" number="2.8.5.1">
<h4><span class="header-section-number">2.8.5.1</span> Calculate summary statistics</h4>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="show-the-numbers.html#cb67-1" aria-hidden="true" tabindex="-1"></a>(by_country <span class="ot">&lt;-</span> organdata <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="show-the-numbers.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(consent_law, country) <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="show-the-numbers.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb67-4"><a href="show-the-numbers.html#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">donors_mean =</span> <span class="fu">mean</span>(donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb67-5"><a href="show-the-numbers.html#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">donors_sd =</span> <span class="fu">sd</span>(donors, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb67-6"><a href="show-the-numbers.html#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_mean =</span> <span class="fu">mean</span>(gdp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb67-7"><a href="show-the-numbers.html#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">health_mean =</span> <span class="fu">mean</span>(health, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb67-8"><a href="show-the-numbers.html#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">roads_mean =</span> <span class="fu">mean</span>(roads, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb67-9"><a href="show-the-numbers.html#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">cerebvas_mean =</span> <span class="fu">mean</span>(cerebvas, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-10"><a href="show-the-numbers.html#cb67-10" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-11"><a href="show-the-numbers.html#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 17 × 8</span></span>
<span id="cb67-12"><a href="show-the-numbers.html#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   consent_law [2]</span></span>
<span id="cb67-13"><a href="show-the-numbers.html#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="do">##    consent_law country     donors_mean donors_sd gdp_mean health_mean roads_mean</span></span>
<span id="cb67-14"><a href="show-the-numbers.html#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;       &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb67-15"><a href="show-the-numbers.html#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Informed    Australia          10.6     1.14    22179.       1958.      105. </span></span>
<span id="cb67-16"><a href="show-the-numbers.html#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Informed    Canada             14.0     0.751   23711.       2272.      109. </span></span>
<span id="cb67-17"><a href="show-the-numbers.html#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Informed    Denmark            13.1     1.47    23722.       2054.      102. </span></span>
<span id="cb67-18"><a href="show-the-numbers.html#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Informed    Germany            13.0     0.611   22163.       2349.      113. </span></span>
<span id="cb67-19"><a href="show-the-numbers.html#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Informed    Ireland            19.8     2.48    20824.       1480.      118. </span></span>
<span id="cb67-20"><a href="show-the-numbers.html#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Informed    Netherlands        13.7     1.55    23013.       1993.       76.1</span></span>
<span id="cb67-21"><a href="show-the-numbers.html#cb67-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Informed    United Kin…        13.5     0.775   21359.       1561.       67.9</span></span>
<span id="cb67-22"><a href="show-the-numbers.html#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Informed    United Sta…        20.0     1.33    29212.       3988.      155. </span></span>
<span id="cb67-23"><a href="show-the-numbers.html#cb67-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Presumed    Austria            23.5     2.42    23876.       1875.      150. </span></span>
<span id="cb67-24"><a href="show-the-numbers.html#cb67-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Presumed    Belgium            21.9     1.94    22500.       1958.      155. </span></span>
<span id="cb67-25"><a href="show-the-numbers.html#cb67-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 Presumed    Finland            18.4     1.53    21019.       1615.       93.6</span></span>
<span id="cb67-26"><a href="show-the-numbers.html#cb67-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 Presumed    France             16.8     1.60    22603.       2160.      156. </span></span>
<span id="cb67-27"><a href="show-the-numbers.html#cb67-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 Presumed    Italy              11.1     4.28    21554.       1757       122. </span></span>
<span id="cb67-28"><a href="show-the-numbers.html#cb67-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 Presumed    Norway             15.4     1.11    26448.       2217.       70.0</span></span>
<span id="cb67-29"><a href="show-the-numbers.html#cb67-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 Presumed    Spain              28.1     4.96    16933        1289.      161. </span></span>
<span id="cb67-30"><a href="show-the-numbers.html#cb67-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 Presumed    Sweden             13.1     1.75    22415.       1951.       72.3</span></span>
<span id="cb67-31"><a href="show-the-numbers.html#cb67-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 Presumed    Switzerland        14.2     1.71    27233        2776.       96.4</span></span>
<span id="cb67-32"><a href="show-the-numbers.html#cb67-32" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 1 more variable: cerebvas_mean &lt;dbl&gt;</span></span></code></pre></div>
<p>Better approach using efficient code.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="show-the-numbers.html#cb68-1" aria-hidden="true" tabindex="-1"></a>(by_country <span class="ot">&lt;-</span> organdata <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="show-the-numbers.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(consent_law, country) <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="show-the-numbers.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="fu">list</span>(<span class="at">mean =</span> mean, <span class="at">sd =</span> sd), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb68-4"><a href="show-the-numbers.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>())</span>
<span id="cb68-5"><a href="show-the-numbers.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 17 × 28</span></span>
<span id="cb68-6"><a href="show-the-numbers.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    consent_law country       donors_mean donors_sd pop_mean pop_sd pop_dens_mean</span></span>
<span id="cb68-7"><a href="show-the-numbers.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb68-8"><a href="show-the-numbers.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Informed    Australia            10.6     1.14    18318. 8.31e2         0.237</span></span>
<span id="cb68-9"><a href="show-the-numbers.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Informed    Canada               14.0     0.751   29608. 1.19e3         0.297</span></span>
<span id="cb68-10"><a href="show-the-numbers.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Informed    Denmark              13.1     1.47     5257. 8.06e1        12.2  </span></span>
<span id="cb68-11"><a href="show-the-numbers.html#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Informed    Germany              13.0     0.611   80255. 5.16e3        22.5  </span></span>
<span id="cb68-12"><a href="show-the-numbers.html#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Informed    Ireland              19.8     2.48     3674. 1.32e2         5.23 </span></span>
<span id="cb68-13"><a href="show-the-numbers.html#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Informed    Netherlands          13.7     1.55    15548. 3.73e2        37.4  </span></span>
<span id="cb68-14"><a href="show-the-numbers.html#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Informed    United Kingd…        13.5     0.775   58187. 6.26e2        24.0  </span></span>
<span id="cb68-15"><a href="show-the-numbers.html#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Informed    United States        20.0     1.33   269330. 1.25e4         2.80 </span></span>
<span id="cb68-16"><a href="show-the-numbers.html#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Presumed    Austria              23.5     2.42     7927. 1.09e2         9.45 </span></span>
<span id="cb68-17"><a href="show-the-numbers.html#cb68-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Presumed    Belgium              21.9     1.94    10153. 1.09e2        30.7  </span></span>
<span id="cb68-18"><a href="show-the-numbers.html#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 Presumed    Finland              18.4     1.53     5112. 6.86e1         1.51 </span></span>
<span id="cb68-19"><a href="show-the-numbers.html#cb68-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 Presumed    France               16.8     1.60    58056. 8.51e2        10.5  </span></span>
<span id="cb68-20"><a href="show-the-numbers.html#cb68-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 Presumed    Italy                11.1     4.28    57360. 4.25e2        19.0  </span></span>
<span id="cb68-21"><a href="show-the-numbers.html#cb68-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 Presumed    Norway               15.4     1.11     4386. 9.73e1         1.35 </span></span>
<span id="cb68-22"><a href="show-the-numbers.html#cb68-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 Presumed    Spain                28.1     4.96    39666. 9.51e2         7.84 </span></span>
<span id="cb68-23"><a href="show-the-numbers.html#cb68-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 Presumed    Sweden               13.1     1.75     8789. 1.14e2         1.95 </span></span>
<span id="cb68-24"><a href="show-the-numbers.html#cb68-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 Presumed    Switzerland          14.2     1.71     7037. 1.70e2        17.0  </span></span>
<span id="cb68-25"><a href="show-the-numbers.html#cb68-25" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 21 more variables: pop_dens_sd &lt;dbl&gt;, gdp_mean &lt;dbl&gt;, gdp_sd &lt;dbl&gt;,</span></span>
<span id="cb68-26"><a href="show-the-numbers.html#cb68-26" aria-hidden="true" tabindex="-1"></a><span class="do">## #   gdp_lag_mean &lt;dbl&gt;, gdp_lag_sd &lt;dbl&gt;, health_mean &lt;dbl&gt;, health_sd &lt;dbl&gt;,</span></span>
<span id="cb68-27"><a href="show-the-numbers.html#cb68-27" aria-hidden="true" tabindex="-1"></a><span class="do">## #   health_lag_mean &lt;dbl&gt;, health_lag_sd &lt;dbl&gt;, pubhealth_mean &lt;dbl&gt;,</span></span>
<span id="cb68-28"><a href="show-the-numbers.html#cb68-28" aria-hidden="true" tabindex="-1"></a><span class="do">## #   pubhealth_sd &lt;dbl&gt;, roads_mean &lt;dbl&gt;, roads_sd &lt;dbl&gt;, cerebvas_mean &lt;dbl&gt;,</span></span>
<span id="cb68-29"><a href="show-the-numbers.html#cb68-29" aria-hidden="true" tabindex="-1"></a><span class="do">## #   cerebvas_sd &lt;dbl&gt;, assault_mean &lt;dbl&gt;, assault_sd &lt;dbl&gt;,</span></span>
<span id="cb68-30"><a href="show-the-numbers.html#cb68-30" aria-hidden="true" tabindex="-1"></a><span class="do">## #   external_mean &lt;dbl&gt;, external_sd &lt;dbl&gt;, txp_pop_mean &lt;dbl&gt;,</span></span>
<span id="cb68-31"><a href="show-the-numbers.html#cb68-31" aria-hidden="true" tabindex="-1"></a><span class="do">## #   txp_pop_sd &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div id="draw-the-plot" class="section level4" number="2.8.5.2">
<h4><span class="header-section-number">2.8.5.2</span> Draw the plot</h4>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="show-the-numbers.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb69-2"><a href="show-the-numbers.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb69-3"><a href="show-the-numbers.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb69-4"><a href="show-the-numbers.html#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> donors_mean,</span>
<span id="cb69-5"><a href="show-the-numbers.html#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">reorder</span>(country, donors_mean),</span>
<span id="cb69-6"><a href="show-the-numbers.html#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> consent_law</span>
<span id="cb69-7"><a href="show-the-numbers.html#cb69-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-8"><a href="show-the-numbers.html#cb69-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb69-9"><a href="show-the-numbers.html#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb69-10"><a href="show-the-numbers.html#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb69-11"><a href="show-the-numbers.html#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Donor Procurement Rate&quot;</span>,</span>
<span id="cb69-12"><a href="show-the-numbers.html#cb69-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Consent Law&quot;</span></span>
<span id="cb69-13"><a href="show-the-numbers.html#cb69-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb69-14"><a href="show-the-numbers.html#cb69-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-donor-mean-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="use-facet-instead-of-color" class="section level4" number="2.8.5.3">
<h4><span class="header-section-number">2.8.5.3</span> Use facet instead of color</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="show-the-numbers.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb70-2"><a href="show-the-numbers.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb70-3"><a href="show-the-numbers.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb70-4"><a href="show-the-numbers.html#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> donors_mean,</span>
<span id="cb70-5"><a href="show-the-numbers.html#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">reorder</span>(country, donors_mean)</span>
<span id="cb70-6"><a href="show-the-numbers.html#cb70-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-7"><a href="show-the-numbers.html#cb70-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb70-8"><a href="show-the-numbers.html#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb70-9"><a href="show-the-numbers.html#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>consent_law, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb70-10"><a href="show-the-numbers.html#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb70-11"><a href="show-the-numbers.html#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Donor Procurement Rate&quot;</span>,</span>
<span id="cb70-12"><a href="show-the-numbers.html#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Consent Law&quot;</span></span>
<span id="cb70-13"><a href="show-the-numbers.html#cb70-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-donor-facet-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="show-the-numbers.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb71-2"><a href="show-the-numbers.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb71-3"><a href="show-the-numbers.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb71-4"><a href="show-the-numbers.html#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> donors_mean,</span>
<span id="cb71-5"><a href="show-the-numbers.html#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">reorder</span>(country, donors_mean)</span>
<span id="cb71-6"><a href="show-the-numbers.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb71-7"><a href="show-the-numbers.html#cb71-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb71-8"><a href="show-the-numbers.html#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb71-9"><a href="show-the-numbers.html#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>consent_law, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb71-10"><a href="show-the-numbers.html#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb71-11"><a href="show-the-numbers.html#cb71-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Donor Procurement Rate&quot;</span>,</span>
<span id="cb71-12"><a href="show-the-numbers.html#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Consent Law&quot;</span></span>
<span id="cb71-13"><a href="show-the-numbers.html#cb71-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-free-scale-y-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Allow the <span class="math inline">\(y\)</span>-axis to vary and only include matching countries.</p>
</div>
<div id="add-standard-deviation" class="section level4" number="2.8.5.4">
<h4><span class="header-section-number">2.8.5.4</span> Add standard deviation</h4>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="show-the-numbers.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb72-2"><a href="show-the-numbers.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb72-3"><a href="show-the-numbers.html#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb72-4"><a href="show-the-numbers.html#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(country, donors_mean),</span>
<span id="cb72-5"><a href="show-the-numbers.html#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors_mean</span>
<span id="cb72-6"><a href="show-the-numbers.html#cb72-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb72-7"><a href="show-the-numbers.html#cb72-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb72-8"><a href="show-the-numbers.html#cb72-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb72-9"><a href="show-the-numbers.html#cb72-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymin =</span> donors_mean <span class="sc">-</span> donors_sd,</span>
<span id="cb72-10"><a href="show-the-numbers.html#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymax =</span> donors_mean <span class="sc">+</span> donors_sd</span>
<span id="cb72-11"><a href="show-the-numbers.html#cb72-11" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb72-12"><a href="show-the-numbers.html#cb72-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb72-13"><a href="show-the-numbers.html#cb72-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb72-14"><a href="show-the-numbers.html#cb72-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Donor Procurement Rate&quot;</span></span>
<span id="cb72-15"><a href="show-the-numbers.html#cb72-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb72-16"><a href="show-the-numbers.html#cb72-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/organ-donor-sd-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="plot-text-directly" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Plot text directly</h2>
<div id="geom_text" class="section level3" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> <code>geom_text()</code></h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="show-the-numbers.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb73-2"><a href="show-the-numbers.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb73-3"><a href="show-the-numbers.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb73-4"><a href="show-the-numbers.html#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> roads_mean,</span>
<span id="cb73-5"><a href="show-the-numbers.html#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors_mean</span>
<span id="cb73-6"><a href="show-the-numbers.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-7"><a href="show-the-numbers.html#cb73-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb73-8"><a href="show-the-numbers.html#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb73-9"><a href="show-the-numbers.html#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/geom-text-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="show-the-numbers.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb74-2"><a href="show-the-numbers.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb74-3"><a href="show-the-numbers.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb74-4"><a href="show-the-numbers.html#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> roads_mean,</span>
<span id="cb74-5"><a href="show-the-numbers.html#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors_mean</span>
<span id="cb74-6"><a href="show-the-numbers.html#cb74-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb74-7"><a href="show-the-numbers.html#cb74-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb74-8"><a href="show-the-numbers.html#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb74-9"><a href="show-the-numbers.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country), <span class="at">hjust =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/geom-text-adj-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="ggrepelgeom_text_repel" class="section level2" number="2.10">
<h2><span class="header-section-number">2.10</span> <code>ggrepel::geom_text_repel()</code></h2>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="show-the-numbers.html#cb75-1" aria-hidden="true" tabindex="-1"></a>elections_historic <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="show-the-numbers.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb75-3"><a href="show-the-numbers.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 49 × 6</span></span>
<span id="cb75-4"><a href="show-the-numbers.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     year winner                 win_party ec_pct popular_pct popular_margin</span></span>
<span id="cb75-5"><a href="show-the-numbers.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;chr&gt;                  &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span id="cb75-6"><a href="show-the-numbers.html#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  1824 John Quincy Adams      D.-R.      0.322       0.309        -0.104 </span></span>
<span id="cb75-7"><a href="show-the-numbers.html#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  1828 Andrew Jackson         Dem.       0.682       0.559         0.122 </span></span>
<span id="cb75-8"><a href="show-the-numbers.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  1832 Andrew Jackson         Dem.       0.766       0.547         0.178 </span></span>
<span id="cb75-9"><a href="show-the-numbers.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  1836 Martin Van Buren       Dem.       0.578       0.508         0.142 </span></span>
<span id="cb75-10"><a href="show-the-numbers.html#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  1840 William Henry Harrison Whig       0.796       0.529         0.0605</span></span>
<span id="cb75-11"><a href="show-the-numbers.html#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  1844 James Polk             Dem.       0.618       0.495         0.0145</span></span>
<span id="cb75-12"><a href="show-the-numbers.html#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7  1848 Zachary Taylor         Whig       0.562       0.473         0.0479</span></span>
<span id="cb75-13"><a href="show-the-numbers.html#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8  1852 Franklin Pierce        Dem.       0.858       0.508         0.0695</span></span>
<span id="cb75-14"><a href="show-the-numbers.html#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9  1856 James Buchanan         Dem.       0.588       0.453         0.122 </span></span>
<span id="cb75-15"><a href="show-the-numbers.html#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  1860 Abraham Lincoln        Rep.       0.594       0.396         0.101 </span></span>
<span id="cb75-16"><a href="show-the-numbers.html#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 39 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="show-the-numbers.html#cb76-1" aria-hidden="true" tabindex="-1"></a>p_title <span class="ot">&lt;-</span> <span class="st">&quot;Presidential Elections: Popular &amp; Electoral College Margins&quot;</span></span>
<span id="cb76-2"><a href="show-the-numbers.html#cb76-2" aria-hidden="true" tabindex="-1"></a>p_subtitle <span class="ot">&lt;-</span> <span class="st">&quot;1824-2016&quot;</span></span>
<span id="cb76-3"><a href="show-the-numbers.html#cb76-3" aria-hidden="true" tabindex="-1"></a>p_caption <span class="ot">&lt;-</span> <span class="st">&quot;Data for 2016 are provisional.&quot;</span></span>
<span id="cb76-4"><a href="show-the-numbers.html#cb76-4" aria-hidden="true" tabindex="-1"></a>x_label <span class="ot">&lt;-</span> <span class="st">&quot;Winner&#39;s share of Popular Vote&quot;</span></span>
<span id="cb76-5"><a href="show-the-numbers.html#cb76-5" aria-hidden="true" tabindex="-1"></a>y_label <span class="ot">&lt;-</span> <span class="st">&quot;Winner&#39;s share of Electoral College Votes&quot;</span></span>
<span id="cb76-6"><a href="show-the-numbers.html#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7"><a href="show-the-numbers.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb76-8"><a href="show-the-numbers.html#cb76-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a href="show-the-numbers.html#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> elections_historic, <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb76-10"><a href="show-the-numbers.html#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> popular_pct,</span>
<span id="cb76-11"><a href="show-the-numbers.html#cb76-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> ec_pct,</span>
<span id="cb76-12"><a href="show-the-numbers.html#cb76-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> winner_label</span>
<span id="cb76-13"><a href="show-the-numbers.html#cb76-13" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">+</span></span>
<span id="cb76-14"><a href="show-the-numbers.html#cb76-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">1.4</span>, <span class="at">color =</span> <span class="st">&quot;gray80&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-15"><a href="show-the-numbers.html#cb76-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">1.4</span>, <span class="at">color =</span> <span class="st">&quot;gray80&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-16"><a href="show-the-numbers.html#cb76-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb76-17"><a href="show-the-numbers.html#cb76-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>() <span class="sc">+</span></span>
<span id="cb76-18"><a href="show-the-numbers.html#cb76-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb76-19"><a href="show-the-numbers.html#cb76-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb76-20"><a href="show-the-numbers.html#cb76-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb76-21"><a href="show-the-numbers.html#cb76-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x_label, <span class="at">y =</span> y_label, <span class="at">title =</span> p_title, <span class="at">subtitle =</span> p_subtitle,</span>
<span id="cb76-22"><a href="show-the-numbers.html#cb76-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> p_caption</span>
<span id="cb76-23"><a href="show-the-numbers.html#cb76-23" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/elections-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div id="label-outliers-only" class="section level3" number="2.10.1">
<h3><span class="header-section-number">2.10.1</span> Label outliers only</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="show-the-numbers.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb77-2"><a href="show-the-numbers.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb77-3"><a href="show-the-numbers.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_mean, <span class="at">y =</span> health_mean)</span>
<span id="cb77-4"><a href="show-the-numbers.html#cb77-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb77-5"><a href="show-the-numbers.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb77-6"><a href="show-the-numbers.html#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb77-7"><a href="show-the-numbers.html#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">filter</span>(by_country, gdp_mean <span class="sc">&gt;</span> <span class="dv">25000</span>),</span>
<span id="cb77-8"><a href="show-the-numbers.html#cb77-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country)</span>
<span id="cb77-9"><a href="show-the-numbers.html#cb77-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/label-outliers-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="show-the-numbers.html#cb78-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-2"><a href="show-the-numbers.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb78-3"><a href="show-the-numbers.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> by_country,</span>
<span id="cb78-4"><a href="show-the-numbers.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdp_mean, <span class="at">y =</span> health_mean)</span>
<span id="cb78-5"><a href="show-the-numbers.html#cb78-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb78-6"><a href="show-the-numbers.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-7"><a href="show-the-numbers.html#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb78-8"><a href="show-the-numbers.html#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">filter</span>(</span>
<span id="cb78-9"><a href="show-the-numbers.html#cb78-9" aria-hidden="true" tabindex="-1"></a>      by_country,</span>
<span id="cb78-10"><a href="show-the-numbers.html#cb78-10" aria-hidden="true" tabindex="-1"></a>      gdp_mean <span class="sc">&gt;</span> <span class="dv">25000</span> <span class="sc">|</span> health_mean <span class="sc">&lt;</span> <span class="dv">1500</span> <span class="sc">|</span></span>
<span id="cb78-11"><a href="show-the-numbers.html#cb78-11" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="st">&quot;Belgium&quot;</span></span>
<span id="cb78-12"><a href="show-the-numbers.html#cb78-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb78-13"><a href="show-the-numbers.html#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> country)</span>
<span id="cb78-14"><a href="show-the-numbers.html#cb78-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/label-outliers-2.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="scales-guides-and-themes" class="section level2" number="2.11">
<h2><span class="header-section-number">2.11</span> Scales, guides, and themes</h2>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="show-the-numbers.html#cb79-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb79-2"><a href="show-the-numbers.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gapminder,</span>
<span id="cb79-3"><a href="show-the-numbers.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span></span>
<span id="cb79-4"><a href="show-the-numbers.html#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb79-5"><a href="show-the-numbers.html#cb79-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> gdpPercap,</span>
<span id="cb79-6"><a href="show-the-numbers.html#cb79-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> lifeExp,</span>
<span id="cb79-7"><a href="show-the-numbers.html#cb79-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> continent, <span class="at">fill =</span> continent</span>
<span id="cb79-8"><a href="show-the-numbers.html#cb79-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb79-9"><a href="show-the-numbers.html#cb79-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb79-10"><a href="show-the-numbers.html#cb79-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-11"><a href="show-the-numbers.html#cb79-11" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb79-12"><a href="show-the-numbers.html#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="sc">+</span></span>
<span id="cb79-13"><a href="show-the-numbers.html#cb79-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/gapminder-scales-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Scale functions control scale mappings in geoms. Remember: not just <code>x</code> and <code>y</code> but also <code>color</code>, <code>fill</code>, <code>shape</code>, and <code>size</code> are scales. They visually represent quantities or categories in your data – thus, they have a scale associated with that
representation. This means you control things like color schemes for data mappings through <strong>scale functions</strong>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="show-the-numbers.html#cb80-1" aria-hidden="true" tabindex="-1"></a>scale_<span class="sc">&lt;</span>MAPPING<span class="sc">&gt;</span>_<span class="sc">&lt;</span>KIND<span class="sc">&gt;</span>()</span>
<span id="cb80-2"><a href="show-the-numbers.html#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="show-the-numbers.html#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>()</span>
<span id="cb80-4"><a href="show-the-numbers.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>()</span>
<span id="cb80-5"><a href="show-the-numbers.html#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_discrete</span>()</span>
<span id="cb80-6"><a href="show-the-numbers.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_discrete</span>()</span>
<span id="cb80-7"><a href="show-the-numbers.html#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_log10</span>()</span>
<span id="cb80-8"><a href="show-the-numbers.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_sqrt</span>()</span></code></pre></div>
<div id="labels-breaks-and-limits" class="section level3" number="2.11.1">
<h3><span class="header-section-number">2.11.1</span> Labels, breaks, and limits</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="show-the-numbers.html#cb81-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb81-2"><a href="show-the-numbers.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb81-3"><a href="show-the-numbers.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb81-4"><a href="show-the-numbers.html#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> roads,</span>
<span id="cb81-5"><a href="show-the-numbers.html#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors, <span class="at">color =</span> world</span>
<span id="cb81-6"><a href="show-the-numbers.html#cb81-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-7"><a href="show-the-numbers.html#cb81-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-8"><a href="show-the-numbers.html#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="show-the-numbers.html#cb81-9" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb81-10"><a href="show-the-numbers.html#cb81-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(</span>
<span id="cb81-11"><a href="show-the-numbers.html#cb81-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">25</span>),</span>
<span id="cb81-12"><a href="show-the-numbers.html#cb81-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Five&quot;</span>, <span class="st">&quot;Fifteen&quot;</span>, <span class="st">&quot;Twenty Five&quot;</span>)</span>
<span id="cb81-13"><a href="show-the-numbers.html#cb81-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/labs-breaks-limits-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="show-the-numbers.html#cb82-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb82-2"><a href="show-the-numbers.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> organdata,</span>
<span id="cb82-3"><a href="show-the-numbers.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb82-4"><a href="show-the-numbers.html#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> roads,</span>
<span id="cb82-5"><a href="show-the-numbers.html#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> donors, <span class="at">color =</span> world</span>
<span id="cb82-6"><a href="show-the-numbers.html#cb82-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb82-7"><a href="show-the-numbers.html#cb82-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb82-8"><a href="show-the-numbers.html#cb82-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-9"><a href="show-the-numbers.html#cb82-9" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_color_discrete</span>(</span>
<span id="cb82-10"><a href="show-the-numbers.html#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span></span>
<span id="cb82-11"><a href="show-the-numbers.html#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb82-12"><a href="show-the-numbers.html#cb82-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Corporatist&quot;</span>, <span class="st">&quot;Liberal&quot;</span>,</span>
<span id="cb82-13"><a href="show-the-numbers.html#cb82-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Social Democratic&quot;</span>, <span class="st">&quot;Unclassified&quot;</span></span>
<span id="cb82-14"><a href="show-the-numbers.html#cb82-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb82-15"><a href="show-the-numbers.html#cb82-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb82-16"><a href="show-the-numbers.html#cb82-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb82-17"><a href="show-the-numbers.html#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Road Deaths&quot;</span>,</span>
<span id="cb82-18"><a href="show-the-numbers.html#cb82-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Donor Procurement&quot;</span>,</span>
<span id="cb82-19"><a href="show-the-numbers.html#cb82-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Welfare State&quot;</span></span>
<span id="cb82-20"><a href="show-the-numbers.html#cb82-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/scale-color-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="show-the-numbers.html#cb83-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> organdata, <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb83-2"><a href="show-the-numbers.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> roads,</span>
<span id="cb83-3"><a href="show-the-numbers.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> donors, <span class="at">color =</span> world</span>
<span id="cb83-4"><a href="show-the-numbers.html#cb83-4" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb83-5"><a href="show-the-numbers.html#cb83-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb83-6"><a href="show-the-numbers.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb83-7"><a href="show-the-numbers.html#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Road Deaths&quot;</span>,</span>
<span id="cb83-8"><a href="show-the-numbers.html#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Donor Procurement&quot;</span></span>
<span id="cb83-9"><a href="show-the-numbers.html#cb83-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/guides-off-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="mapping-data-to-graphics" class="section level2" number="2.12">
<h2><span class="header-section-number">2.12</span> Mapping data to graphics</h2>

<div class="rmdnote">
<p>Download the necessary data files for the following coding exercises using <code>usethis::use_course("css-data-mining-viz/show-the-numbers")</code>.</p>
</div>
<p>For this example, I’m going to use real world data to demonstrate the typical process for loading data, cleaning it up a bit, and mapping specific columns of the data onto the parts of a graph using the grammar of graphics and <code>ggplot()</code>.</p>
<p>The data I’ll use comes from the BBC’s corporate charity, <a href="https://www.bbcchildreninneed.co.uk/">BBC Children in Need</a>, which makes grants to smaller UK nonprofit organizations that work on issues related to childhood poverty. An organization in the UK named <a href="https://www.threesixtygiving.org/">360Giving</a> helps nonprofits and foundations publish data about their grant giving activities in an open and standardized way, and (as of May 2020) <a href="http://data.threesixtygiving.org/">they list data from 126 different charities</a>, including BBC Children in Need.</p>
<p>If you want to follow along with this example (highly recommended!), you can download the data directly from <a href="https://data-mining-viz.netlify.app/data/360-giving-data.xlsx">the website</a>.</p>
<div id="load-and-clean-data" class="section level3" number="2.12.1">
<h3><span class="header-section-number">2.12.1</span> Load and clean data</h3>
<p>First, we need to load a few libraries: <strong>tidyverse</strong> (as always), along with <strong>readxl</strong> for reading Excel files and <strong>lubridate</strong> for working with dates:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="show-the-numbers.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb84-2"><a href="show-the-numbers.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)  <span class="co"># For ggplot, dplyr, and friends</span></span>
<span id="cb84-3"><a href="show-the-numbers.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)     <span class="co"># For reading Excel files</span></span>
<span id="cb84-4"><a href="show-the-numbers.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)  <span class="co"># For working with dates</span></span></code></pre></div>
<p>We’ll then load the original Excel file. I placed this file in a folder named <code>data</code> in my RStudio Project folder for this example. It’s also good practice to keep a pristine, untouched copy of your data.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="show-the-numbers.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the original Excel file</span></span>
<span id="cb85-2"><a href="show-the-numbers.html#cb85-2" aria-hidden="true" tabindex="-1"></a>bbc_raw <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/360-giving-data.xlsx&quot;</span>)</span></code></pre></div>
<p>There may be some errors reading the file – you can ignore those in this case.</p>
<p>Next we’ll add a couple columns and clean up the data a little.</p>
<p>We’ll extract the year from the Award Date column, rename some of the longer-named columns, and make a new column that shows the duration of grants. We’ll also get rid of 2015 since there are so few observations then.</p>
<p>Note the strange use of <code>`</code>s around column names like <code>`Award Date`</code>. This is because R technically doesn’t allow special characters like spaces in column names. If there are spaces, you have to wrap the column names in backticks. Because typing backticks all the time gets tedious, we’ll use <code>rename()</code> to rename some of the columns:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="show-the-numbers.html#cb86-1" aria-hidden="true" tabindex="-1"></a>bbc <span class="ot">&lt;-</span> bbc_raw <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="show-the-numbers.html#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the year from the award date</span></span>
<span id="cb86-3"><a href="show-the-numbers.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grant_year =</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Award Date</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="show-the-numbers.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename some columns</span></span>
<span id="cb86-5"><a href="show-the-numbers.html#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">grant_amount =</span> <span class="st">`</span><span class="at">Amount Awarded</span><span class="st">`</span>,</span>
<span id="cb86-6"><a href="show-the-numbers.html#cb86-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">grant_program =</span> <span class="st">`</span><span class="at">Grant Programme:Title</span><span class="st">`</span>,</span>
<span id="cb86-7"><a href="show-the-numbers.html#cb86-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">grant_duration =</span> <span class="st">`</span><span class="at">Planned Dates:Duration (months)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-8"><a href="show-the-numbers.html#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make a new text-based version of the duration column, recoding months</span></span>
<span id="cb86-9"><a href="show-the-numbers.html#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># between 12-23, 23-35, and 36+. The case_when() function here lets us use</span></span>
<span id="cb86-10"><a href="show-the-numbers.html#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># multiple if/else conditions at the same time.</span></span>
<span id="cb86-11"><a href="show-the-numbers.html#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grant_duration_text =</span> <span class="fu">case_when</span>(</span>
<span id="cb86-12"><a href="show-the-numbers.html#cb86-12" aria-hidden="true" tabindex="-1"></a>    grant_duration <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">&amp;</span> grant_duration <span class="sc">&lt;</span> <span class="dv">24</span> <span class="sc">~</span> <span class="st">&quot;1 year&quot;</span>,</span>
<span id="cb86-13"><a href="show-the-numbers.html#cb86-13" aria-hidden="true" tabindex="-1"></a>    grant_duration <span class="sc">&gt;=</span> <span class="dv">24</span> <span class="sc">&amp;</span> grant_duration <span class="sc">&lt;</span> <span class="dv">36</span> <span class="sc">~</span> <span class="st">&quot;2 years&quot;</span>,</span>
<span id="cb86-14"><a href="show-the-numbers.html#cb86-14" aria-hidden="true" tabindex="-1"></a>    grant_duration <span class="sc">&gt;=</span> <span class="dv">36</span> <span class="sc">~</span> <span class="st">&quot;3 years&quot;</span></span>
<span id="cb86-15"><a href="show-the-numbers.html#cb86-15" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb86-16"><a href="show-the-numbers.html#cb86-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get rid of anything before 2016</span></span>
<span id="cb86-17"><a href="show-the-numbers.html#cb86-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grant_year <span class="sc">&gt;</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-18"><a href="show-the-numbers.html#cb86-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make a categorical version of the year column</span></span>
<span id="cb86-19"><a href="show-the-numbers.html#cb86-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grant_year_category =</span> <span class="fu">factor</span>(grant_year))</span></code></pre></div>
</div>
<div id="histograms" class="section level3" number="2.12.2">
<h3><span class="header-section-number">2.12.2</span> Histograms</h3>
<p>First let’s look at the distribution of grant amounts with a histogram. Map <code>grant_amount</code> to the x-axis and don’t map anything to the y-axis, since <code>geom_histogram()</code> will calculate the y-axis values for us:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="show-the-numbers.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> bbc, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb87-2"><a href="show-the-numbers.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-basic-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Notice that ggplot warns you about bin widths. By default it will divide the data into 30 equally spaced bins, which will most likely not be the best for your data. You should <em>always</em> set your own bin width to something more appropriate. There are no rules for correct bin widths. Just don’t have them be too wide:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="show-the-numbers.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> bbc, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb88-2"><a href="show-the-numbers.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">100000</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-wide-bin-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Or too small:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="show-the-numbers.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> bbc, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb89-2"><a href="show-the-numbers.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">500</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-tiny-bins-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>£10,000 seems to fit well. It’s often helpful to add a white border to the histogram bars, too:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="show-the-numbers.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> bbc, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb90-2"><a href="show-the-numbers.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10000</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-good-bins-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We can map other variables onto the plot, like mapping <code>grant_year_category</code> to the fill aesthetic:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="show-the-numbers.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_amount, <span class="at">fill =</span> grant_year_category)) <span class="sc">+</span></span>
<span id="cb91-2"><a href="show-the-numbers.html#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10000</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-bad-fill-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>That gets really hard to interpret though, so we can facet by year with <code>facet_wrap()</code>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="show-the-numbers.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_amount, <span class="at">fill =</span> grant_year_category)) <span class="sc">+</span></span>
<span id="cb92-2"><a href="show-the-numbers.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10000</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb92-3"><a href="show-the-numbers.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(grant_year))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/hist-facet-fill-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Neat!</p>
</div>
<div id="points" class="section level3" number="2.12.3">
<h3><span class="header-section-number">2.12.3</span> Points</h3>
<p>Next let’s look at the data using points, mapping year to the x-axis and grant amount to the y-axis:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="show-the-numbers.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb93-2"><a href="show-the-numbers.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/points-initial-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We have some serious overplotting here, with dots so thick that it looks like lines. We can fix this a couple different ways. First, we can make the points semi-transparent using <code>alpha</code>, which ranges from 0 (completely invisible) to 1 (completely solid).</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="show-the-numbers.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb94-2"><a href="show-the-numbers.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/points-alpha-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We can also randomly space the points to spread them out using <code>position_jitter()</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="show-the-numbers.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb95-2"><a href="show-the-numbers.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>())</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/points-jitter-default-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>One issue with this, though, is that the points are jittered along the x-axis (which is fine, since they’re all within the same year) <em>and</em> the y-axis (which is bad, since the amounts are actual numbers). We can tell ggplot to only jitter in one direction by specifying the <code>height</code> argument—we don’t want any up-and-down jittering:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="show-the-numbers.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount)) <span class="sc">+</span></span>
<span id="cb96-2"><a href="show-the-numbers.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/points-jitter-horizontal-only-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>There are some weird clusters around £30,000 and below. Let’s map <code>grant_program</code> to the color aesthetic, which has two categories—regular grants and small grants—and see if that helps explain why:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="show-the-numbers.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount, <span class="at">color =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb97-2"><a href="show-the-numbers.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/points-jitter-color-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>It does! We appear to have two different distributions of grants: small grants have a limit of £30,000, while regular grants have a much higher average amount.</p>
</div>
<div id="boxplots-1" class="section level3" number="2.12.4">
<h3><span class="header-section-number">2.12.4</span> Boxplots</h3>
<p>We can add summary information to the plot by only changing the <code>geom</code> we’re using. Switch from <code>geom_point()</code> to <code>geom_boxplot()</code>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="show-the-numbers.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc, <span class="fu">aes</span>(<span class="at">x =</span> grant_year_category, <span class="at">y =</span> grant_amount, <span class="at">color =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb98-2"><a href="show-the-numbers.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/boxplot-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="summaries" class="section level3" number="2.12.5">
<h3><span class="header-section-number">2.12.5</span> Summaries</h3>
<p>We can also make smaller summarized datasets with <strong>dplyr</strong> functions like <code>group_by()</code> and <code>summarize()</code> and plot those. First let’s look at grant totals, averages, and counts over time:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="show-the-numbers.html#cb99-1" aria-hidden="true" tabindex="-1"></a>bbc_by_year <span class="ot">&lt;-</span> bbc <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="show-the-numbers.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grant_year) <span class="sc">%&gt;%</span>  <span class="co"># Make invisible subgroups for each year</span></span>
<span id="cb99-3"><a href="show-the-numbers.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(grant_amount),  <span class="co"># Find the total awarded in each group</span></span>
<span id="cb99-4"><a href="show-the-numbers.html#cb99-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg =</span> <span class="fu">mean</span>(grant_amount),  <span class="co"># Find the average awarded in each group</span></span>
<span id="cb99-5"><a href="show-the-numbers.html#cb99-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">number =</span> <span class="fu">n</span>())  <span class="co"># n() is a special function that shows the number of rows in each group</span></span>
<span id="cb99-6"><a href="show-the-numbers.html#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="show-the-numbers.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at our summarized data</span></span>
<span id="cb99-8"><a href="show-the-numbers.html#cb99-8" aria-hidden="true" tabindex="-1"></a>bbc_by_year</span>
<span id="cb99-9"><a href="show-the-numbers.html#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4 × 4</span></span>
<span id="cb99-10"><a href="show-the-numbers.html#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   grant_year    total    avg number</span></span>
<span id="cb99-11"><a href="show-the-numbers.html#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="do">##        &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb99-12"><a href="show-the-numbers.html#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 1       2016 17290488 78238.    221</span></span>
<span id="cb99-13"><a href="show-the-numbers.html#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2       2017 62394278 59765.   1044</span></span>
<span id="cb99-14"><a href="show-the-numbers.html#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 3       2018 61349392 60205.   1019</span></span>
<span id="cb99-15"><a href="show-the-numbers.html#cb99-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 4       2019 41388816 61136.    677</span></span></code></pre></div>
<p>Because we used <code>summarize()</code>, R shrank our data down significantly. We now only have a row for each of the subgroups we made: one for each year. We can plot this smaller data. We’ll use <code>geom_col()</code> for now.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="show-the-numbers.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot our summarized data</span></span>
<span id="cb100-2"><a href="show-the-numbers.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_by_year, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> avg)) <span class="sc">+</span></span>
<span id="cb100-3"><a href="show-the-numbers.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-summaries-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="show-the-numbers.html#cb101-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-2"><a href="show-the-numbers.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_by_year, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> total)) <span class="sc">+</span></span>
<span id="cb101-3"><a href="show-the-numbers.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-summaries-2.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="show-the-numbers.html#cb102-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-2"><a href="show-the-numbers.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_by_year, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> number)) <span class="sc">+</span></span>
<span id="cb102-3"><a href="show-the-numbers.html#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-summaries-3.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Based on these charts, it looks like 2016 saw the largest average grant amount. In all other years, grants averaged around £60,000, but in 2016 it jumped up to £80,000. If we look at total grants, though, we can see that there were far fewer grants awarded in 2016—only 221! 2017 and 2018 were much bigger years with far more money awarded.</p>
<p>We can also use multiple aesthetics to reveal more information from the data. First we’ll make a new small summary dataset and group by both year and grant program. With those groups, we’ll again calculate the total, average, and number.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="show-the-numbers.html#cb103-1" aria-hidden="true" tabindex="-1"></a>bbc_year_size <span class="ot">&lt;-</span> bbc <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="show-the-numbers.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grant_year, grant_program) <span class="sc">%&gt;%</span> </span>
<span id="cb103-3"><a href="show-the-numbers.html#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(grant_amount),</span>
<span id="cb103-4"><a href="show-the-numbers.html#cb103-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg =</span> <span class="fu">mean</span>(grant_amount),</span>
<span id="cb103-5"><a href="show-the-numbers.html#cb103-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">number =</span> <span class="fu">n</span>())</span>
<span id="cb103-6"><a href="show-the-numbers.html#cb103-6" aria-hidden="true" tabindex="-1"></a>bbc_year_size</span>
<span id="cb103-7"><a href="show-the-numbers.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8 × 5</span></span>
<span id="cb103-8"><a href="show-the-numbers.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   grant_year [4]</span></span>
<span id="cb103-9"><a href="show-the-numbers.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   grant_year grant_program    total    avg number</span></span>
<span id="cb103-10"><a href="show-the-numbers.html#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="do">##        &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb103-11"><a href="show-the-numbers.html#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1       2016 Main Grants   16405586 86345.    190</span></span>
<span id="cb103-12"><a href="show-the-numbers.html#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2       2016 Small Grants    884902 28545.     31</span></span>
<span id="cb103-13"><a href="show-the-numbers.html#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3       2017 Main Grants   48502923 90154.    538</span></span>
<span id="cb103-14"><a href="show-the-numbers.html#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4       2017 Small Grants  13891355 27453.    506</span></span>
<span id="cb103-15"><a href="show-the-numbers.html#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5       2018 Main Grants   47347789 95652.    495</span></span>
<span id="cb103-16"><a href="show-the-numbers.html#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6       2018 Small Grants  14001603 26721.    524</span></span>
<span id="cb103-17"><a href="show-the-numbers.html#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 7       2019 Main Grants   33019492 96267.    343</span></span>
<span id="cb103-18"><a href="show-the-numbers.html#cb103-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 8       2019 Small Grants   8369324 25058.    334</span></span></code></pre></div>
<p>Next we’ll plot the data, mapping the <code>grant_program</code> column to the <code>fill</code> aesthetic:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="show-the-numbers.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_year_size, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> total, <span class="at">fill =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb104-2"><a href="show-the-numbers.html#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-size-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>By default, ggplot will stack the different fill colors within the same bar, but this makes it a little hard to make comparisons. While we can see that the average small grant amount was a little bigger in 2017 than in 2019, it’s harder to compare average main grant amount, since the bottoms of those sections don’t align.</p>
<p>To fix this, we can use <code>position_dodge()</code> to tell the columns to fit side-by-side:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="show-the-numbers.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_year_size, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> total, <span class="at">fill =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb105-2"><a href="show-the-numbers.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>())</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-size-dodge-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Instead of dodging, we can also facet by <code>grant_program</code> to separate the bars:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="show-the-numbers.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_year_size, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> total, <span class="at">fill =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb106-2"><a href="show-the-numbers.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb106-3"><a href="show-the-numbers.html#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(grant_program))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-size-facet-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We can put these in one column if we want:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="show-the-numbers.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_year_size, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> total, <span class="at">fill =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb107-2"><a href="show-the-numbers.html#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb107-3"><a href="show-the-numbers.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(grant_program), <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-size-col-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Finally, we can include even more variables! We have a lot of aesthetics we can work with (<code>size</code>, <code>alpha</code>, <code>color</code>, <code>fill</code>, <code>linetype</code>, etc.), as well as facets, so let’s add one more to show the duration of the awarded grant.</p>
<p>First we’ll make another smaller summarized dataset, grouping by year, program, and duration and summarizing the total, average, and number of awards.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="show-the-numbers.html#cb108-1" aria-hidden="true" tabindex="-1"></a>bbc_year_size_duration <span class="ot">&lt;-</span> bbc <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="show-the-numbers.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grant_year, grant_program, grant_duration_text) <span class="sc">%&gt;%</span> </span>
<span id="cb108-3"><a href="show-the-numbers.html#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(grant_amount),</span>
<span id="cb108-4"><a href="show-the-numbers.html#cb108-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg =</span> <span class="fu">mean</span>(grant_amount),</span>
<span id="cb108-5"><a href="show-the-numbers.html#cb108-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">number =</span> <span class="fu">n</span>())</span>
<span id="cb108-6"><a href="show-the-numbers.html#cb108-6" aria-hidden="true" tabindex="-1"></a>bbc_year_size_duration</span>
<span id="cb108-7"><a href="show-the-numbers.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 21 × 6</span></span>
<span id="cb108-8"><a href="show-the-numbers.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   grant_year, grant_program [8]</span></span>
<span id="cb108-9"><a href="show-the-numbers.html#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    grant_year grant_program grant_duration_text    total    avg number</span></span>
<span id="cb108-10"><a href="show-the-numbers.html#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="do">##         &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb108-11"><a href="show-the-numbers.html#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  1       2016 Main Grants   2 years                97355 48678.      2</span></span>
<span id="cb108-12"><a href="show-the-numbers.html#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  2       2016 Main Grants   3 years             16308231 86746.    188</span></span>
<span id="cb108-13"><a href="show-the-numbers.html#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  3       2016 Small Grants  3 years               884902 28545.     31</span></span>
<span id="cb108-14"><a href="show-the-numbers.html#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  4       2017 Main Grants   1 year                 59586 29793       2</span></span>
<span id="cb108-15"><a href="show-the-numbers.html#cb108-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  5       2017 Main Grants   2 years               825732 82573.     10</span></span>
<span id="cb108-16"><a href="show-the-numbers.html#cb108-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  6       2017 Main Grants   3 years             47617605 90528.    526</span></span>
<span id="cb108-17"><a href="show-the-numbers.html#cb108-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  7       2017 Small Grants  1 year                 10000 10000       1</span></span>
<span id="cb108-18"><a href="show-the-numbers.html#cb108-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  8       2017 Small Grants  2 years               245227 18864.     13</span></span>
<span id="cb108-19"><a href="show-the-numbers.html#cb108-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  9       2017 Small Grants  3 years             13636128 27716.    492</span></span>
<span id="cb108-20"><a href="show-the-numbers.html#cb108-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 10       2018 Main Grants   1 year                118134 59067       2</span></span>
<span id="cb108-21"><a href="show-the-numbers.html#cb108-21" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 11 more rows</span></span></code></pre></div>
<p>Next, we’ll fill by grant program and facet by duration and show the total number of grants awarded</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="show-the-numbers.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bbc_year_size_duration, <span class="fu">aes</span>(<span class="at">x =</span> grant_year, <span class="at">y =</span> number, <span class="at">fill =</span> grant_program)) <span class="sc">+</span></span>
<span id="cb109-2"><a href="show-the-numbers.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb109-3"><a href="show-the-numbers.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(grant_duration_text), <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-year-size-duration-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The vast majority of BBC Children in Need’s grants last for 3 years. Super neat.</p>
</div>
</div>
<div id="amounts-and-proportions" class="section level2" number="2.13">
<h2><span class="header-section-number">2.13</span> Amounts and proportions</h2>
<p>For this example, we’re going to use real world data to demonstrate some different ways to visualize amounts and proportions. We’ll use data from the CDC and the Social Security Administration about the number of daily births in the United States from 1994–2014. <a href="https://fivethirtyeight.com/features/some-people-are-too-superstitious-to-have-a-baby-on-friday-the-13th/">FiveThirtyEight reported a story using this data in 2016</a> and they posted relatively CSV files <a href="https://github.com/fivethirtyeight/data/tree/master/births">on GitHub</a>, so we can download and use those.</p>
<p>If you want to follow along with this example, you can download the data directly from <a href="https://github.com/fivethirtyeight/data/tree/master/births">GitHub</a> or by using these links (you’ll likely need to right click on these and choose “Save Link As…”):</p>
<ul>
<li><a href="https://raw.githubusercontent.com/fivethirtyeight/data/master/births/US_births_1994-2003_CDC_NCHS.csv"><code>US_births_1994-2003_CDC_NCHS.csv</code></a></li>
<li><a href="https://raw.githubusercontent.com/fivethirtyeight/data/master/births/US_births_2000-2014_SSA.csv"><code>US_births_2000-2014_SSA.csv</code></a></li>
</ul>
<div id="load-data" class="section level3" number="2.13.1">
<h3><span class="header-section-number">2.13.1</span> Load data</h3>
<p>There are two CSV files:</p>
<ul>
<li><code>US_births_1994-2003_CDC_NCHS.csv</code> contains U.S. births data for the years 1994 to 2003, as provided by the Centers for Disease Control and Prevention’s National Center for Health Statistics.</li>
<li><code>US_births_2000-2014_SSA.csv</code> contains U.S. births data for the years 2000 to 2014, as provided by the Social Security Administration.</li>
</ul>
<p>Since the two datasets overlap in 2000–2003, we use Social Security Administration data for those years.</p>
<p>We downloaded the data from GitHub and placed the CSV files in a folder named <code>data</code>. We’ll then load them with <code>read_csv()</code> and combine them into one data frame.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="show-the-numbers.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb110-2"><a href="show-the-numbers.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)   <span class="co"># For nice labels in charts</span></span>
<span id="cb110-3"><a href="show-the-numbers.html#cb110-3" aria-hidden="true" tabindex="-1"></a>births_1994_1999 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/US_births_1994-2003_CDC_NCHS.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-4"><a href="show-the-numbers.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ignore anything after 2000</span></span>
<span id="cb110-5"><a href="show-the-numbers.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>)</span>
<span id="cb110-6"><a href="show-the-numbers.html#cb110-6" aria-hidden="true" tabindex="-1"></a>births_2000_2014 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/US_births_2000-2014_SSA.csv&quot;</span>)</span>
<span id="cb110-7"><a href="show-the-numbers.html#cb110-7" aria-hidden="true" tabindex="-1"></a>births_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(births_1994_1999, births_2000_2014)</span></code></pre></div>
</div>
<div id="wrangle-data" class="section level3" number="2.13.2">
<h3><span class="header-section-number">2.13.2</span> Wrangle data</h3>
<p>Let’s look at the first few rows of the data to see what we’re working with:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="show-the-numbers.html#cb111-1" aria-hidden="true" tabindex="-1"></a>births_combined</span>
<span id="cb111-2"><a href="show-the-numbers.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 7,670 × 5</span></span>
<span id="cb111-3"><a href="show-the-numbers.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="do">##     year month date_of_month day_of_week births</span></span>
<span id="cb111-4"><a href="show-the-numbers.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb111-5"><a href="show-the-numbers.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  1994     1             1           6   8096</span></span>
<span id="cb111-6"><a href="show-the-numbers.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  1994     1             2           7   7772</span></span>
<span id="cb111-7"><a href="show-the-numbers.html#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  1994     1             3           1  10142</span></span>
<span id="cb111-8"><a href="show-the-numbers.html#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  1994     1             4           2  11248</span></span>
<span id="cb111-9"><a href="show-the-numbers.html#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  1994     1             5           3  11053</span></span>
<span id="cb111-10"><a href="show-the-numbers.html#cb111-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  1994     1             6           4  11406</span></span>
<span id="cb111-11"><a href="show-the-numbers.html#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7  1994     1             7           5  11251</span></span>
<span id="cb111-12"><a href="show-the-numbers.html#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8  1994     1             8           6   8653</span></span>
<span id="cb111-13"><a href="show-the-numbers.html#cb111-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9  1994     1             9           7   7910</span></span>
<span id="cb111-14"><a href="show-the-numbers.html#cb111-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  1994     1            10           1  10498</span></span>
<span id="cb111-15"><a href="show-the-numbers.html#cb111-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 7,660 more rows</span></span></code></pre></div>
<p>The columns for year and births seem straightforward and ready to use. The columns for month and day of the week could be improved if we changed them to text (i.e. January instead of 1; Tuesday instead of 3). To fix this, we can convert these columns to categorical variables, or factors in R. We can also specify that these categories (or factors) are ordered, meaning that Feburary comes after January, etc. Without ordering, R will plot them alphabetically, which isn’t very helpful.</p>
<p>We’ll make a new dataset named <code>births</code> that’s based on the combined births data, but with some new columns added:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="show-the-numbers.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The c() function lets us make a list of values</span></span>
<span id="cb112-2"><a href="show-the-numbers.html#cb112-2" aria-hidden="true" tabindex="-1"></a>month_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;February&quot;</span>, <span class="st">&quot;March&quot;</span>, <span class="st">&quot;April&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;June&quot;</span>, <span class="st">&quot;July&quot;</span>,</span>
<span id="cb112-3"><a href="show-the-numbers.html#cb112-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;August&quot;</span>, <span class="st">&quot;September&quot;</span>, <span class="st">&quot;October&quot;</span>, <span class="st">&quot;November&quot;</span>, <span class="st">&quot;December&quot;</span>)</span>
<span id="cb112-4"><a href="show-the-numbers.html#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="show-the-numbers.html#cb112-5" aria-hidden="true" tabindex="-1"></a>day_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>, </span>
<span id="cb112-6"><a href="show-the-numbers.html#cb112-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Thursday&quot;</span>, <span class="st">&quot;Friday&quot;</span>, <span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>)</span>
<span id="cb112-7"><a href="show-the-numbers.html#cb112-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-8"><a href="show-the-numbers.html#cb112-8" aria-hidden="true" tabindex="-1"></a>births <span class="ot">&lt;-</span> births_combined <span class="sc">%&gt;%</span> </span>
<span id="cb112-9"><a href="show-the-numbers.html#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make month an ordered factor, using the month_name list as labels</span></span>
<span id="cb112-10"><a href="show-the-numbers.html#cb112-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month, <span class="at">labels =</span> month_names, <span class="at">ordered =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-11"><a href="show-the-numbers.html#cb112-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">factor</span>(day_of_week, <span class="at">labels =</span> day_names, <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb112-12"><a href="show-the-numbers.html#cb112-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">date_of_month_categorical =</span> <span class="fu">factor</span>(date_of_month)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-13"><a href="show-the-numbers.html#cb112-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a column indicating if the day is on a weekend</span></span>
<span id="cb112-14"><a href="show-the-numbers.html#cb112-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weekend =</span> <span class="fu">ifelse</span>(day_of_week <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb112-15"><a href="show-the-numbers.html#cb112-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-16"><a href="show-the-numbers.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(births)</span>
<span id="cb112-17"><a href="show-the-numbers.html#cb112-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 7</span></span>
<span id="cb112-18"><a href="show-the-numbers.html#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="do">##    year month   date_of_month day_of_week births date_of_month_categori… weekend</span></span>
<span id="cb112-19"><a href="show-the-numbers.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;ord&gt;           &lt;dbl&gt; &lt;ord&gt;        &lt;dbl&gt; &lt;fct&gt;                   &lt;lgl&gt;  </span></span>
<span id="cb112-20"><a href="show-the-numbers.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  1994 January             1 Saturday      8096 1                       TRUE   </span></span>
<span id="cb112-21"><a href="show-the-numbers.html#cb112-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  1994 January             2 Sunday        7772 2                       TRUE   </span></span>
<span id="cb112-22"><a href="show-the-numbers.html#cb112-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  1994 January             3 Monday       10142 3                       FALSE  </span></span>
<span id="cb112-23"><a href="show-the-numbers.html#cb112-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  1994 January             4 Tuesday      11248 4                       FALSE  </span></span>
<span id="cb112-24"><a href="show-the-numbers.html#cb112-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  1994 January             5 Wednesday    11053 5                       FALSE  </span></span>
<span id="cb112-25"><a href="show-the-numbers.html#cb112-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  1994 January             6 Thursday     11406 6                       FALSE</span></span></code></pre></div>
<p>If you look at the data now, you can see the columns are changed and have different types. <code>year</code> and <code>date_of_month</code> are still numbers, but <code>month</code>, and <code>day_of_week</code> are ordered factors (<code>ord</code>) and <code>date_of_month_categorical</code> is a regular factor (<code>fct</code>). Technically it’s also ordered, but because it’s already alphabetical (i.e. 2 naturally comes after 1), we don’t need to force it to be in the right order.</p>
<p>Our <code>births</code> data is now clean and ready to go!</p>
</div>
<div id="bar-plot" class="section level3" number="2.13.3">
<h3><span class="header-section-number">2.13.3</span> Bar plot</h3>
<p>First we can look at a bar chart showing the total number of births each day. We need to make a smaller summarized dataset and then we’ll plot it:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="show-the-numbers.html#cb113-1" aria-hidden="true" tabindex="-1"></a>total_births_weekday <span class="ot">&lt;-</span> births <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="show-the-numbers.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(day_of_week) <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="show-the-numbers.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(births))</span>
<span id="cb113-4"><a href="show-the-numbers.html#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="show-the-numbers.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> total_births_weekday,</span>
<span id="cb113-6"><a href="show-the-numbers.html#cb113-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> total, <span class="at">fill =</span> day_of_week)) <span class="sc">+</span></span>
<span id="cb113-7"><a href="show-the-numbers.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb113-8"><a href="show-the-numbers.html#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Turn off the fill legend because it&#39;s redundant</span></span>
<span id="cb113-9"><a href="show-the-numbers.html#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-bar-chart-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>If we fill by day of the week, we get 7 different colors, which is fine (I guess), but doesn’t really help tell a story. The main story here is that there are far fewer births during weekends. If we create a new column that flags if a row is Saturday or Sunday, we can fill by that column instead:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="show-the-numbers.html#cb114-1" aria-hidden="true" tabindex="-1"></a>total_births_weekday <span class="ot">&lt;-</span> births <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="show-the-numbers.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(day_of_week) <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="show-the-numbers.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(births)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-4"><a href="show-the-numbers.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weekend =</span> day_of_week <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>))</span>
<span id="cb114-5"><a href="show-the-numbers.html#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="show-the-numbers.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> total_births_weekday,</span>
<span id="cb114-7"><a href="show-the-numbers.html#cb114-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> total, <span class="at">fill =</span> weekend)) <span class="sc">+</span></span>
<span id="cb114-8"><a href="show-the-numbers.html#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-bar-chart-weekend-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Neat! Those default colors are kinda ugly, though, so let’s use the principles of preattentive processing and contrast to highlight the weekend bars:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="show-the-numbers.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> total_births_weekday,</span>
<span id="cb115-2"><a href="show-the-numbers.html#cb115-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> total, <span class="at">fill =</span> weekend)) <span class="sc">+</span></span>
<span id="cb115-3"><a href="show-the-numbers.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb115-4"><a href="show-the-numbers.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use grey and orange</span></span>
<span id="cb115-5"><a href="show-the-numbers.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;grey70&quot;</span>, <span class="st">&quot;#f2ad22&quot;</span>)) <span class="sc">+</span></span>
<span id="cb115-6"><a href="show-the-numbers.html#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use commas instead of scientific notation</span></span>
<span id="cb115-7"><a href="show-the-numbers.html#cb115-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb115-8"><a href="show-the-numbers.html#cb115-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Turn off the legend since the title shows what the orange is</span></span>
<span id="cb115-9"><a href="show-the-numbers.html#cb115-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb115-10"><a href="show-the-numbers.html#cb115-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Weekends are unpopular times for giving birth&quot;</span>,</span>
<span id="cb115-11"><a href="show-the-numbers.html#cb115-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Total births&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-bar-chart-weekend-better-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="lollipop-chart" class="section level3" number="2.13.4">
<h3><span class="header-section-number">2.13.4</span> Lollipop chart</h3>
<p>Since the ends of the bars are often the most important part of the graph, we can use a lollipop chart to emphasize them. We’ll keep all the same code from our bar chart and make a few changes:</p>
<ul>
<li>Color by weekend instead of fill by weekend, since points and lines are colored in ggplot, not filled</li>
<li>Switch <code>scale_fill_manual()</code> to <code>scale_color_manual()</code> and turn off the <code>color</code> legend in the <code>guides()</code> layer</li>
<li>Switch <code>geom_col()</code> to <code>geom_pointrange()</code>. The <code>geom_pointrange()</code> layer requires two additional aesthetics: <code>ymin</code> and <code>ymax</code> for the ends of the lines that come out of the point. Here we’ll set <code>ymin</code> to 0 so it starts at the x-axis, and we’ll set <code>ymax</code> to <code>total</code> so it ends at the point.</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="show-the-numbers.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> total_births_weekday,</span>
<span id="cb116-2"><a href="show-the-numbers.html#cb116-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> total, <span class="at">color =</span> weekend)) <span class="sc">+</span></span>
<span id="cb116-3"><a href="show-the-numbers.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> total),</span>
<span id="cb116-4"><a href="show-the-numbers.html#cb116-4" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># Make the lines a little thicker and the dots a little bigger</span></span>
<span id="cb116-5"><a href="show-the-numbers.html#cb116-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fatten =</span> <span class="dv">5</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb116-6"><a href="show-the-numbers.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use grey and orange</span></span>
<span id="cb116-7"><a href="show-the-numbers.html#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;grey70&quot;</span>, <span class="st">&quot;#f2ad22&quot;</span>)) <span class="sc">+</span></span>
<span id="cb116-8"><a href="show-the-numbers.html#cb116-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use commas instead of scientific notation</span></span>
<span id="cb116-9"><a href="show-the-numbers.html#cb116-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb116-10"><a href="show-the-numbers.html#cb116-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Turn off the legend since the title shows what the orange is</span></span>
<span id="cb116-11"><a href="show-the-numbers.html#cb116-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb116-12"><a href="show-the-numbers.html#cb116-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Weekends are unpopular times for giving birth&quot;</span>,</span>
<span id="cb116-13"><a href="show-the-numbers.html#cb116-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Total births&quot;</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-lollipop-chart-weekend-better-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="strip-plot" class="section level3" number="2.13.5">
<h3><span class="header-section-number">2.13.5</span> Strip plot</h3>
<p>Let’s show all the data with points. We’ll use the full dataset now, map <code>x</code> to weekday, <code>y</code> to births, and change <code>geom_col()</code> to <code>geom_point()</code>. We’ll tell <code>geom_point()</code> to jitter the points randomly.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="show-the-numbers.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> births,</span>
<span id="cb117-2"><a href="show-the-numbers.html#cb117-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> births, <span class="at">color =</span> weekend)) <span class="sc">+</span></span>
<span id="cb117-3"><a href="show-the-numbers.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;grey70&quot;</span>, <span class="st">&quot;#f2ad22&quot;</span>)) <span class="sc">+</span></span>
<span id="cb117-4"><a href="show-the-numbers.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb117-5"><a href="show-the-numbers.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/strip-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>There are some interesting points in the low ends, likely because of holidays like Labor Day and Memorial Day (for the Mondays) and Thanksgiving (for the Thursday). If we had a column that indicated whether a day was a holiday, we could color by that and it would probably explain most of those low numbers. Unfortunately we don’t have that column, and it’d be hard to make. Some holidays are constant (Halloween is always October 31), but some aren’t (Thanksgiving is the fourth Thursday in November, so we’d need to find out which November 20-somethingth each year is the fourth Thursday, and good luck doing that at scale).</p>
</div>
<div id="beeswarm-plot" class="section level3" number="2.13.6">
<h3><span class="header-section-number">2.13.6</span> Beeswarm plot</h3>
<p>We can add some structure to these points if we use the <a href="https://github.com/eclarke/ggbeeswarm"><strong>ggbeeswarm</strong> package</a>, with either <code>geom_beeswarm()</code> or <code>geom_quasirandom()</code>. <code>geom_quasirandom()</code> actually works better here since there are so many points – <code>geom_beeswarm()</code> makes the clusters of points way too wide.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="show-the-numbers.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbeeswarm)</span>
<span id="cb118-2"><a href="show-the-numbers.html#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> births,</span>
<span id="cb118-3"><a href="show-the-numbers.html#cb118-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> births, <span class="at">color =</span> weekend)) <span class="sc">+</span></span>
<span id="cb118-4"><a href="show-the-numbers.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;grey70&quot;</span>, <span class="st">&quot;#f2ad22&quot;</span>)) <span class="sc">+</span></span>
<span id="cb118-5"><a href="show-the-numbers.html#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make these points suuuper tiny</span></span>
<span id="cb118-6"><a href="show-the-numbers.html#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quasirandom</span>(<span class="at">size =</span> <span class="fl">0.0001</span>) <span class="sc">+</span></span>
<span id="cb118-7"><a href="show-the-numbers.html#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/beeswarm-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="heatmap" class="section level3" number="2.13.7">
<h3><span class="header-section-number">2.13.7</span> Heatmap</h3>
<p>Finally, let’s use something non-traditional to show the average births by day in a somewhat proportional way. We can calculate the average number of births every day and then make a heatmap that fills each square by that average, thus showing the relative differences in births per day.</p>
<p>To do this, we need to make a summarized data frame with <code>group_by() %&gt;% summarize()</code> to calculate the average number of births by month and day of the month (i.e. average for January 1, January 2, etc.).</p>
<p>We’ll then make a sort of calendar with date of the month on the x axis, month on the y axis, with heat map squares filled by the daily average. We’ll use <code>geom_tile()</code> to add squares for each day, and then add some extra scale, coordinates, and theme layers to clean up the plot:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="show-the-numbers.html#cb119-1" aria-hidden="true" tabindex="-1"></a>avg_births_month_day <span class="ot">&lt;-</span> births <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="show-the-numbers.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month, date_of_month_categorical) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="show-the-numbers.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_births =</span> <span class="fu">mean</span>(births))</span>
<span id="cb119-4"><a href="show-the-numbers.html#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="show-the-numbers.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> avg_births_month_day,</span>
<span id="cb119-6"><a href="show-the-numbers.html#cb119-6" aria-hidden="true" tabindex="-1"></a>       <span class="co"># By default, the y-axis will have December at the top, so use fct_rev() to reverse it</span></span>
<span id="cb119-7"><a href="show-the-numbers.html#cb119-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date_of_month_categorical, <span class="at">y =</span> <span class="fu">fct_rev</span>(month), <span class="at">fill =</span> avg_births)) <span class="sc">+</span></span>
<span id="cb119-8"><a href="show-the-numbers.html#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb119-9"><a href="show-the-numbers.html#cb119-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add viridis colors</span></span>
<span id="cb119-10"><a href="show-the-numbers.html#cb119-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;inferno&quot;</span>, <span class="at">labels =</span> comma) <span class="sc">+</span> </span>
<span id="cb119-11"><a href="show-the-numbers.html#cb119-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add nice labels</span></span>
<span id="cb119-12"><a href="show-the-numbers.html#cb119-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Day of the month&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb119-13"><a href="show-the-numbers.html#cb119-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Average births per day&quot;</span>,</span>
<span id="cb119-14"><a href="show-the-numbers.html#cb119-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;1994-2014&quot;</span>,</span>
<span id="cb119-15"><a href="show-the-numbers.html#cb119-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Average births&quot;</span>) <span class="sc">+</span></span>
<span id="cb119-16"><a href="show-the-numbers.html#cb119-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Force all the tiles to have equal widths and heights</span></span>
<span id="cb119-17"><a href="show-the-numbers.html#cb119-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb119-18"><a href="show-the-numbers.html#cb119-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use a cleaner theme</span></span>
<span id="cb119-19"><a href="show-the-numbers.html#cb119-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/plot-heatmap-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Neat! There are some really interesting trends here. Most obvious, probably, is that very few people are born on New Year’s Day, July 4th, Halloween, Thanksgiving, and Christmas.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="show-the-numbers.html#cb120-1" aria-hidden="true" tabindex="-1"></a>avg_births_month_day <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="show-the-numbers.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(avg_births)</span>
<span id="cb120-3"><a href="show-the-numbers.html#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 366 × 3</span></span>
<span id="cb120-4"><a href="show-the-numbers.html#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   month [12]</span></span>
<span id="cb120-5"><a href="show-the-numbers.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    month    date_of_month_categorical avg_births</span></span>
<span id="cb120-6"><a href="show-the-numbers.html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;ord&gt;    &lt;fct&gt;                          &lt;dbl&gt;</span></span>
<span id="cb120-7"><a href="show-the-numbers.html#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 December 25                             6601.</span></span>
<span id="cb120-8"><a href="show-the-numbers.html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 January  1                              7827.</span></span>
<span id="cb120-9"><a href="show-the-numbers.html#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 December 24                             8103.</span></span>
<span id="cb120-10"><a href="show-the-numbers.html#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 July     4                              8825.</span></span>
<span id="cb120-11"><a href="show-the-numbers.html#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 January  2                              9356.</span></span>
<span id="cb120-12"><a href="show-the-numbers.html#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 December 26                             9599.</span></span>
<span id="cb120-13"><a href="show-the-numbers.html#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 November 27                             9770.</span></span>
<span id="cb120-14"><a href="show-the-numbers.html#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 November 23                             9919.</span></span>
<span id="cb120-15"><a href="show-the-numbers.html#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 November 25                            10001 </span></span>
<span id="cb120-16"><a href="show-the-numbers.html#cb120-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 October  31                            10030.</span></span>
<span id="cb120-17"><a href="show-the-numbers.html#cb120-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 356 more rows</span></span></code></pre></div>
<p>The days with the highest average are in mid-September, likely because that’s about 9 months after the first week of January. July 7th at #7 is odd and I have no idea why it might be so popular.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="show-the-numbers.html#cb121-1" aria-hidden="true" tabindex="-1"></a>avg_births_month_day <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="show-the-numbers.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_births))</span>
<span id="cb121-3"><a href="show-the-numbers.html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 366 × 3</span></span>
<span id="cb121-4"><a href="show-the-numbers.html#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   month [12]</span></span>
<span id="cb121-5"><a href="show-the-numbers.html#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    month     date_of_month_categorical avg_births</span></span>
<span id="cb121-6"><a href="show-the-numbers.html#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;ord&gt;     &lt;fct&gt;                          &lt;dbl&gt;</span></span>
<span id="cb121-7"><a href="show-the-numbers.html#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 September 9                             12344.</span></span>
<span id="cb121-8"><a href="show-the-numbers.html#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 September 19                            12285.</span></span>
<span id="cb121-9"><a href="show-the-numbers.html#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 September 12                            12282.</span></span>
<span id="cb121-10"><a href="show-the-numbers.html#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 September 17                            12201.</span></span>
<span id="cb121-11"><a href="show-the-numbers.html#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 September 10                            12190.</span></span>
<span id="cb121-12"><a href="show-the-numbers.html#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 September 20                            12162.</span></span>
<span id="cb121-13"><a href="show-the-numbers.html#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 July      7                             12147.</span></span>
<span id="cb121-14"><a href="show-the-numbers.html#cb121-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 September 15                            12126.</span></span>
<span id="cb121-15"><a href="show-the-numbers.html#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 September 16                            12114.</span></span>
<span id="cb121-16"><a href="show-the-numbers.html#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 September 18                            12112.</span></span>
<span id="cb121-17"><a href="show-the-numbers.html#cb121-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 356 more rows</span></span></code></pre></div>
<p>The funniest trend is the very visible dark column for the 13th of every month. People <em>really</em> don’t want to give birth on the 13th.</p>
</div>
</div>
<div id="comparisons" class="section level2" number="2.14">
<h2><span class="header-section-number">2.14</span> Comparisons</h2>
<p>For this example, we’re going to use cross-national data, but instead of using the typical <code>gapminder</code> dataset, we’re going to collect data directly from the <a href="https://data.worldbank.org/">World Bank’s Open Data portal</a></p>
<p>If you want to skip the data downloading, you can download the data below (you’ll likely need to right click and choose “Save Link As…”):</p>
<ul>
<li><a href="https://data-mining-viz.netlify.app/data/wdi_raw.csv"><code>wdi_raw.csv</code></a></li>
</ul>
<div id="load-and-clean-data-1" class="section level3" number="2.14.1">
<h3><span class="header-section-number">2.14.1</span> Load and clean data</h3>
<p>First, we load the libraries we’ll be using:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="show-the-numbers.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)  <span class="co"># For ggplot, dplyr, and friends</span></span>
<span id="cb122-2"><a href="show-the-numbers.html#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(WDI)        <span class="co"># For getting data from the World Bank</span></span>
<span id="cb122-3"><a href="show-the-numbers.html#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geofacet)   <span class="co"># For map-shaped facets</span></span>
<span id="cb122-4"><a href="show-the-numbers.html#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)     <span class="co"># For helpful scale functions like dollar()</span></span>
<span id="cb122-5"><a href="show-the-numbers.html#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)    <span class="co"># For non-overlapping labels</span></span></code></pre></div>
<p>The World Bank has a ton of country-level data at <a href="https://data.worldbank.org/">data.worldbank.org</a>. We can use <a href="https://cran.r-project.org/package=WDI">a package named <strong>WDI</strong></a> (<strong>w</strong>orld <strong>d</strong>evelopment <strong>i</strong>ndicators) to access their servers and download the data directly into R.</p>
<p>To do this, we need to find the special World Bank codes for specific variables we want to get. These codes come from the URLs of the World Bank’s website. For instance, if you search for “access to electricity” at the World Bank’s website, you’ll find <a href="https://data.worldbank.org/indicator/EG.ELC.ACCS.ZS">this page</a>. If you look at the end of the URL, you’ll see a cryptic code: <code>EG.ELC.ACCS.ZS</code>. That’s the World Bank’s ID code for the “Access to electricity (% of population)” indicator.</p>
<p>We can feed a list of ID codes to the <code>WDI()</code> function to download data for those specific indicators. We want data from 1995-2015, so we set the start and end years accordingly. The <code>extra=TRUE</code> argument means that it’ll also include other helpful details like region, aid status, etc. Without it, it would only download the indicators we listed.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="show-the-numbers.html#cb123-1" aria-hidden="true" tabindex="-1"></a>indicators <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;SP.DYN.LE00.IN&quot;</span>,  <span class="co"># Life expectancy</span></span>
<span id="cb123-2"><a href="show-the-numbers.html#cb123-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;EG.ELC.ACCS.ZS&quot;</span>,  <span class="co"># Access to electricity</span></span>
<span id="cb123-3"><a href="show-the-numbers.html#cb123-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;EN.ATM.CO2E.PC&quot;</span>,  <span class="co"># CO2 emissions</span></span>
<span id="cb123-4"><a href="show-the-numbers.html#cb123-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;NY.GDP.PCAP.KD&quot;</span>)  <span class="co"># GDP per capita</span></span>
<span id="cb123-5"><a href="show-the-numbers.html#cb123-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-6"><a href="show-the-numbers.html#cb123-6" aria-hidden="true" tabindex="-1"></a>wdi_raw <span class="ot">&lt;-</span> <span class="fu">WDI</span>(<span class="at">country =</span> <span class="st">&quot;all&quot;</span>, indicators, <span class="at">extra =</span> <span class="cn">TRUE</span>, </span>
<span id="cb123-7"><a href="show-the-numbers.html#cb123-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">start =</span> <span class="dv">1995</span>, <span class="at">end =</span> <span class="dv">2015</span>)</span>
<span id="cb123-8"><a href="show-the-numbers.html#cb123-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-9"><a href="show-the-numbers.html#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wdi_raw)</span></code></pre></div>
<p>Downloading data from the World Bank every time you knit will get tedious and take a long time (plus if their servers are temporarily down, you won’t be able to get the data). It’s good practice to save this raw data as a CSV file and then work with that.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="show-the-numbers.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(wdi_raw, <span class="st">&quot;data/wdi_raw.csv&quot;</span>)</span></code></pre></div>
<p>Then we clean up the data a little, filtering out rows that aren’t actually countries and renaming the ugly World Bank code columns to actual words:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="show-the-numbers.html#cb125-1" aria-hidden="true" tabindex="-1"></a>wdi_clean <span class="ot">&lt;-</span> wdi_raw <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="show-the-numbers.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">!=</span> <span class="st">&quot;Aggregates&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="show-the-numbers.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso2c, country, year, </span>
<span id="cb125-4"><a href="show-the-numbers.html#cb125-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">life_expectancy =</span> SP.DYN.LE00.IN, </span>
<span id="cb125-5"><a href="show-the-numbers.html#cb125-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">access_to_electricity =</span> EG.ELC.ACCS.ZS, </span>
<span id="cb125-6"><a href="show-the-numbers.html#cb125-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">co2_emissions =</span> EN.ATM.CO2E.PC, </span>
<span id="cb125-7"><a href="show-the-numbers.html#cb125-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">gdp_per_cap =</span> NY.GDP.PCAP.KD, </span>
<span id="cb125-8"><a href="show-the-numbers.html#cb125-8" aria-hidden="true" tabindex="-1"></a>         region, income)</span>
<span id="cb125-9"><a href="show-the-numbers.html#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="show-the-numbers.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wdi_clean)</span>
<span id="cb125-11"><a href="show-the-numbers.html#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 9</span></span>
<span id="cb125-12"><a href="show-the-numbers.html#cb125-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   iso2c country  year life_expectancy access_to_elect… co2_emissions gdp_per_cap</span></span>
<span id="cb125-13"><a href="show-the-numbers.html#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb125-14"><a href="show-the-numbers.html#cb125-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 AD    Andorra  2015              NA              100         NA         41768.</span></span>
<span id="cb125-15"><a href="show-the-numbers.html#cb125-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 AD    Andorra  2004              NA              100          7.36      47033.</span></span>
<span id="cb125-16"><a href="show-the-numbers.html#cb125-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 AD    Andorra  2001              NA              100          7.79      41421.</span></span>
<span id="cb125-17"><a href="show-the-numbers.html#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 AD    Andorra  2002              NA              100          7.59      42396.</span></span>
<span id="cb125-18"><a href="show-the-numbers.html#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 AD    Andorra  2014              NA              100          5.83      40790.</span></span>
<span id="cb125-19"><a href="show-the-numbers.html#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 AD    Andorra  1995              NA              100          6.66      32918.</span></span>
<span id="cb125-20"><a href="show-the-numbers.html#cb125-20" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 2 more variables: region &lt;chr&gt;, income &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="small-multiples" class="section level3" number="2.14.2">
<h3><span class="header-section-number">2.14.2</span> Small multiples</h3>
<p>First we can make some small multiples plots and show life expectancy over time for a handful of countries. We’ll make a list of some countries chosen at random while I scrolled through the data, and then filter our data to include only those rows. We then plot life expectancy, faceting by country.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="show-the-numbers.html#cb126-1" aria-hidden="true" tabindex="-1"></a>life_expectancy_small <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="show-the-numbers.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Afghanistan&quot;</span>, <span class="st">&quot;Belarus&quot;</span>, <span class="st">&quot;India&quot;</span>,</span>
<span id="cb126-3"><a href="show-the-numbers.html#cb126-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Mexico&quot;</span>, <span class="st">&quot;New Zealand&quot;</span>, <span class="st">&quot;Spain&quot;</span>))</span>
<span id="cb126-4"><a href="show-the-numbers.html#cb126-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-5"><a href="show-the-numbers.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> life_expectancy_small, </span>
<span id="cb126-6"><a href="show-the-numbers.html#cb126-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb126-7"><a href="show-the-numbers.html#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb126-8"><a href="show-the-numbers.html#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(country))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/life-expectancy-small-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Small multiples! That’s all we need to do.</p>
<p>We can do some fancier things, though. We can make this plot hyper minimalist:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="show-the-numbers.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> life_expectancy_small, </span>
<span id="cb127-2"><a href="show-the-numbers.html#cb127-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb127-3"><a href="show-the-numbers.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb127-4"><a href="show-the-numbers.html#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(country), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb127-5"><a href="show-the-numbers.html#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb127-6"><a href="show-the-numbers.html#cb127-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/life-expectancy-small-minimalist-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We can do a whole part of a continent (poor Iraq and Syria)</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="show-the-numbers.html#cb128-1" aria-hidden="true" tabindex="-1"></a>life_expectancy_mena <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="show-the-numbers.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Middle East &amp; North Africa&quot;</span>)</span>
<span id="cb128-3"><a href="show-the-numbers.html#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="show-the-numbers.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> life_expectancy_mena, </span>
<span id="cb128-5"><a href="show-the-numbers.html#cb128-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb128-6"><a href="show-the-numbers.html#cb128-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb128-7"><a href="show-the-numbers.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(country), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb128-8"><a href="show-the-numbers.html#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb128-9"><a href="show-the-numbers.html#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/life-expectancy-mena-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We can use the <a href="https://hafen.github.io/geofacet/"><strong>geofacet</strong> package</a> to arrange these facets by geography:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="show-the-numbers.html#cb129-1" aria-hidden="true" tabindex="-1"></a>life_expectancy_eu <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="show-the-numbers.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Europe &amp; Central Asia&quot;</span>)</span>
<span id="cb129-3"><a href="show-the-numbers.html#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="show-the-numbers.html#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(life_expectancy_eu, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb129-5"><a href="show-the-numbers.html#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb129-6"><a href="show-the-numbers.html#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_geo</span>(<span class="fu">vars</span>(country), <span class="at">grid =</span> <span class="st">&quot;eu_grid1&quot;</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb129-7"><a href="show-the-numbers.html#cb129-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">title =</span> <span class="st">&quot;Life expectancy from 1995–2015&quot;</span>,</span>
<span id="cb129-8"><a href="show-the-numbers.html#cb129-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: The World Bank (SP.DYN.LE00.IN)&quot;</span>) <span class="sc">+</span></span>
<span id="cb129-9"><a href="show-the-numbers.html#cb129-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb129-10"><a href="show-the-numbers.html#cb129-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb129-11"><a href="show-the-numbers.html#cb129-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb129-12"><a href="show-the-numbers.html#cb129-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/life-expectancy-eu-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Neat!</p>
</div>
<div id="sparklines" class="section level3" number="2.14.3">
<h3><span class="header-section-number">2.14.3</span> Sparklines</h3>
<p>Sparklines are just line charts (or bar charts) that are really really small.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="show-the-numbers.html#cb130-1" aria-hidden="true" tabindex="-1"></a>india_co2 <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="show-the-numbers.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;India&quot;</span>)</span>
<span id="cb130-3"><a href="show-the-numbers.html#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="show-the-numbers.html#cb130-4" aria-hidden="true" tabindex="-1"></a>plot_india <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(india_co2, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> co2_emissions)) <span class="sc">+</span></span>
<span id="cb130-5"><a href="show-the-numbers.html#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb130-6"><a href="show-the-numbers.html#cb130-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb130-7"><a href="show-the-numbers.html#cb130-7" aria-hidden="true" tabindex="-1"></a>plot_india</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/india-spark-1.png" width="96" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="show-the-numbers.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;india_co2.pdf&quot;</span>, plot_india, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="fl">0.15</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb131-2"><a href="show-the-numbers.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;india_co2.png&quot;</span>, plot_india, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="fl">0.15</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="show-the-numbers.html#cb132-1" aria-hidden="true" tabindex="-1"></a>china_co2 <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="show-the-numbers.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;China&quot;</span>)</span>
<span id="cb132-3"><a href="show-the-numbers.html#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="show-the-numbers.html#cb132-4" aria-hidden="true" tabindex="-1"></a>plot_china <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(china_co2, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> co2_emissions)) <span class="sc">+</span></span>
<span id="cb132-5"><a href="show-the-numbers.html#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb132-6"><a href="show-the-numbers.html#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb132-7"><a href="show-the-numbers.html#cb132-7" aria-hidden="true" tabindex="-1"></a>plot_china</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/china-spark-1.png" width="96" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="show-the-numbers.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;china_co2.pdf&quot;</span>, plot_china, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="fl">0.15</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb133-2"><a href="show-the-numbers.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;china_co2.png&quot;</span>, plot_china, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="fl">0.15</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span></code></pre></div>
<p>You can then use those saved tiny plots in your text.</p>
<blockquote>
<p>Both India <img class="img-inline" src="https://data-mining-viz.netlify.app/images/india-spark-1.png" width = "100"/> and China <img class="img-inline" src="https://data-mining-viz.netlify.app/images/china-spark-1.png" width = "100"/> have seen increased CO<sub>2</sub> emissions over the past 20 years.</p>
</blockquote>
</div>
<div id="slopegraphs" class="section level3" number="2.14.4">
<h3><span class="header-section-number">2.14.4</span> Slopegraphs</h3>
<p>We can make a slopegraph to show changes in GDP per capita between two time periods. We need to first filter our WDI to include only the start and end years (here 1995 and 2015). Then, to make sure that we’re using complete data, we’ll get rid of any country that has missing data for either 1995 or 2015. The <code>group_by(...) %&gt;% filter(...) %&gt;% ungroup()</code> pipeline does this, with the <code>!any(is.na(gdp_per_cap))</code> test keeping any rows where any of the <code>gdp_per_cap</code> values are not missing for the whole country.</p>
<p>We then add a couple special columns for labels. The <code>paste0()</code> function concatenates strings and variables together, so that <code>paste0("2 + 2 = ", 2 + 2)</code> would show “2 + 2 = 4”. Here we make labels that say either “Country name: $GDP” or “$GDP” depending on the year.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="show-the-numbers.html#cb134-1" aria-hidden="true" tabindex="-1"></a>gdp_south_asia <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="show-the-numbers.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;South Asia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb134-3"><a href="show-the-numbers.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1995</span>, <span class="dv">2015</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb134-4"><a href="show-the-numbers.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Look at each country individually</span></span>
<span id="cb134-5"><a href="show-the-numbers.html#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb134-6"><a href="show-the-numbers.html#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove the country if any of its gdp_per_cap values are missing</span></span>
<span id="cb134-7"><a href="show-the-numbers.html#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">any</span>(<span class="fu">is.na</span>(gdp_per_cap))) <span class="sc">%&gt;%</span></span>
<span id="cb134-8"><a href="show-the-numbers.html#cb134-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb134-9"><a href="show-the-numbers.html#cb134-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make year a factor</span></span>
<span id="cb134-10"><a href="show-the-numbers.html#cb134-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb134-11"><a href="show-the-numbers.html#cb134-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make some nice label columns</span></span>
<span id="cb134-12"><a href="show-the-numbers.html#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If the year is 1995, format it like &quot;Country name: $GDP&quot;. If the year is</span></span>
<span id="cb134-13"><a href="show-the-numbers.html#cb134-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2015, format it like &quot;$GDP&quot;</span></span>
<span id="cb134-14"><a href="show-the-numbers.html#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label_first =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">1995</span>, <span class="fu">str_c</span>(country, <span class="st">&quot;: &quot;</span>, <span class="fu">dollar</span>(<span class="fu">round</span>(gdp_per_cap))), <span class="cn">NA</span>),</span>
<span id="cb134-15"><a href="show-the-numbers.html#cb134-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">label_last =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2015</span>, <span class="fu">dollar</span>(<span class="fu">round</span>(gdp_per_cap, <span class="dv">0</span>)), <span class="cn">NA</span>))</span></code></pre></div>
<p>With the data filtered like this, we can plot it by mapping year to the x-axis, GDP per capita to the y-axis, and coloring by country. To make the lines go across the two categorical labels in the x-axis (since we made year a factor/category), we need to also specify the <code>group</code> aesthetic.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="show-the-numbers.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb135-2"><a href="show-the-numbers.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-simple-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Cool! We’re getting closer. We can definitely see different slopes, but with 7 different colors, it’s hard to see exactly which country is which. Instead, we can directly label each of these lines with <code>geom_text()</code>:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="show-the-numbers.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb136-2"><a href="show-the-numbers.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb136-3"><a href="show-the-numbers.html#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb136-4"><a href="show-the-numbers.html#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-simple-text-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>That gets us a <em>little</em> closer, but the country labels are hard to see, and we could include more information, like the actual values. Remember those <code>label_first</code> and <code>label_last</code> columns we made? Let’s use those instead:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="show-the-numbers.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb137-2"><a href="show-the-numbers.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb137-3"><a href="show-the-numbers.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_first)) <span class="sc">+</span></span>
<span id="cb137-4"><a href="show-the-numbers.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_last)) <span class="sc">+</span></span>
<span id="cb137-5"><a href="show-the-numbers.html#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-simple-text-fancier-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Now we have dollar amounts and country names, but the labels are still overlapping and really hard to read. To fix this, we can make the labels repel away from each other and randomly position in a way that makes them not overlap. The <a href="https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html"><strong>ggrepel</strong> package</a> lets us do this with <code>geom_text_repel()</code></p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="show-the-numbers.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb138-2"><a href="show-the-numbers.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb138-3"><a href="show-the-numbers.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_first)) <span class="sc">+</span></span>
<span id="cb138-4"><a href="show-the-numbers.html#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_last)) <span class="sc">+</span></span>
<span id="cb138-5"><a href="show-the-numbers.html#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-getting-warmer-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Now none of the labels are on top of each other, but the labels are still on top of the lines. Also, some of the labels moved inward and outward along the x-axis, but they don’t need to do that—they just need to shift up and down. We can force the labels to only move up and down by setting the <code>direction = "y"</code> argument, and we can move all the labels to the left or right with the <code>nudge_x</code> argument. The <code>seed</code> argument makes sure that the random label placement is the same every time we run this. It can be whatever number you want—it just has to be a number.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="show-the-numbers.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb139-2"><a href="show-the-numbers.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb139-3"><a href="show-the-numbers.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_first), <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="at">nudge_x =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">seed =</span> <span class="dv">1234</span>) <span class="sc">+</span></span>
<span id="cb139-4"><a href="show-the-numbers.html#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_last), <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="at">nudge_x =</span> <span class="dv">1</span>, <span class="at">seed =</span> <span class="dv">1234</span>) <span class="sc">+</span></span>
<span id="cb139-5"><a href="show-the-numbers.html#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-fancier-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>That’s it! Let’s take the theme off completely, change the colors a little, and it should be perfect.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="show-the-numbers.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gdp_south_asia, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_per_cap, <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb140-2"><a href="show-the-numbers.html#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb140-3"><a href="show-the-numbers.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_first), <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="at">nudge_x =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">seed =</span> <span class="dv">1234</span>) <span class="sc">+</span></span>
<span id="cb140-4"><a href="show-the-numbers.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_last), <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="at">nudge_x =</span> <span class="dv">1</span>, <span class="at">seed =</span> <span class="dv">1234</span>) <span class="sc">+</span></span>
<span id="cb140-5"><a href="show-the-numbers.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb140-6"><a href="show-the-numbers.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;magma&quot;</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb140-7"><a href="show-the-numbers.html#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/slopegraph-sa-done-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="bump-charts" class="section level3" number="2.14.5">
<h3><span class="header-section-number">2.14.5</span> Bump charts</h3>
<p>Finally, we can make a bump chart that shows changes in rankings over time. We’ll look at CO<sub>2</sub> emissions in South Asia. First we need to calculate a new variable that shows the rank of each country within each year. We can do this if we group by year and then use the <code>rank()</code> function to rank countries by the <code>co2_emissions</code> column.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="show-the-numbers.html#cb141-1" aria-hidden="true" tabindex="-1"></a>sa_co2 <span class="ot">&lt;-</span> wdi_clean <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="show-the-numbers.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;South Asia&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="show-the-numbers.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2004</span>, year <span class="sc">&lt;</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb141-4"><a href="show-the-numbers.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb141-5"><a href="show-the-numbers.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">rank</span>(co2_emissions))</span></code></pre></div>
<p>We then plot this with points and lines, reversing the y-axis so 1 is at the top:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="show-the-numbers.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sa_co2, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> rank, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb142-2"><a href="show-the-numbers.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb142-3"><a href="show-the-numbers.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb142-4"><a href="show-the-numbers.html#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/make-bump-plot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Afghanistan and Nepal switched around for the number 1 spot, while India dropped from 4 to 6, switching places with Pakistan.</p>
<p>As with the slopegraph, there are 8 different colors in the legend and it’s hard to line them all up with the different lines, so we can plot the text directly instead. We’ll use <code>geom_text()</code> again. We don’t need to repel anything, since the text should fit in each row just fine. We need to change the <code>data</code> argument in <code>geom_text()</code> though and filter the data to only include one year, otherwise we’ll get labels on every point, which is excessive. We can also adjust the theme and colors to make it cleaner.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="show-the-numbers.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sa_co2, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> rank, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb143-2"><a href="show-the-numbers.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb143-3"><a href="show-the-numbers.html#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb143-4"><a href="show-the-numbers.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">filter</span>(sa_co2, year <span class="sc">==</span> <span class="dv">2004</span>),</span>
<span id="cb143-5"><a href="show-the-numbers.html#cb143-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">label =</span> iso2c, <span class="at">x =</span> <span class="fl">2003.25</span>),</span>
<span id="cb143-6"><a href="show-the-numbers.html#cb143-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-7"><a href="show-the-numbers.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">filter</span>(sa_co2, year <span class="sc">==</span> <span class="dv">2014</span>),</span>
<span id="cb143-8"><a href="show-the-numbers.html#cb143-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">label =</span> iso2c, <span class="at">x =</span> <span class="fl">2014.75</span>),</span>
<span id="cb143-9"><a href="show-the-numbers.html#cb143-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-10"><a href="show-the-numbers.html#cb143-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb143-11"><a href="show-the-numbers.html#cb143-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb143-12"><a href="show-the-numbers.html#cb143-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2004</span><span class="sc">:</span><span class="dv">2014</span>) <span class="sc">+</span></span>
<span id="cb143-13"><a href="show-the-numbers.html#cb143-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;magma&quot;</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb143-14"><a href="show-the-numbers.html#cb143-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Rank&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-15"><a href="show-the-numbers.html#cb143-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb143-16"><a href="show-the-numbers.html#cb143-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-17"><a href="show-the-numbers.html#cb143-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-18"><a href="show-the-numbers.html#cb143-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="02-showing-numbers-customization_files/figure-html/bump-plot-fancier-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>If you want to be <em>super</em> fancy, you can use flags instead of country codes, but that’s a little more complicated (you need to install the <a href="https://github.com/rensa/ggflags"><strong>ggflags</strong> package</a>. <a href="https://dominikkoch.github.io/Bump-Chart/">See here for an example</a>.</p>
</div>
</div>
<div id="acknowledgments" class="section level2 unnumbered">
<h2>Acknowledgments</h2>
<ul>
<li>Coding examples from <a href="https://datavizm20.classes.andrewheiss.com">Andrew Heiss</a></li>
</ul>
</div>
<div id="session-info-1" class="section level2 unnumbered">
<h2>Session info</h2>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="show-the-numbers.html#cb144-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">session_info</span>()</span>
<span id="cb144-2"><a href="show-the-numbers.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="do">## ─ Session info ───────────────────────────────────────────────────────────────</span></span>
<span id="cb144-3"><a href="show-the-numbers.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  setting  value</span></span>
<span id="cb144-4"><a href="show-the-numbers.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  version  R version 4.1.2 (2021-11-01)</span></span>
<span id="cb144-5"><a href="show-the-numbers.html#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  os       macOS Monterey 12.2.1</span></span>
<span id="cb144-6"><a href="show-the-numbers.html#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  system   aarch64, darwin20</span></span>
<span id="cb144-7"><a href="show-the-numbers.html#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  ui       X11</span></span>
<span id="cb144-8"><a href="show-the-numbers.html#cb144-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  language (EN)</span></span>
<span id="cb144-9"><a href="show-the-numbers.html#cb144-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  collate  en_US.UTF-8</span></span>
<span id="cb144-10"><a href="show-the-numbers.html#cb144-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  ctype    en_US.UTF-8</span></span>
<span id="cb144-11"><a href="show-the-numbers.html#cb144-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  tz       America/Chicago</span></span>
<span id="cb144-12"><a href="show-the-numbers.html#cb144-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  date     2022-03-04</span></span>
<span id="cb144-13"><a href="show-the-numbers.html#cb144-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  pandoc   2.17.1.1 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/ (via rmarkdown)</span></span>
<span id="cb144-14"><a href="show-the-numbers.html#cb144-14" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb144-15"><a href="show-the-numbers.html#cb144-15" aria-hidden="true" tabindex="-1"></a><span class="do">## ─ Packages ───────────────────────────────────────────────────────────────────</span></span>
<span id="cb144-16"><a href="show-the-numbers.html#cb144-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  package       * version date (UTC) lib source</span></span>
<span id="cb144-17"><a href="show-the-numbers.html#cb144-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  assertthat      0.2.1   2019-03-21 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-18"><a href="show-the-numbers.html#cb144-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  backports       1.4.1   2021-12-13 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-19"><a href="show-the-numbers.html#cb144-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  beeswarm        0.4.0   2021-06-01 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-20"><a href="show-the-numbers.html#cb144-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  bit             4.0.4   2020-08-04 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-21"><a href="show-the-numbers.html#cb144-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  bit64           4.0.5   2020-08-30 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-22"><a href="show-the-numbers.html#cb144-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  bookdown        0.24    2021-09-02 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-23"><a href="show-the-numbers.html#cb144-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  brio            1.1.3   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-24"><a href="show-the-numbers.html#cb144-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  broom         * 0.7.12  2022-01-28 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-25"><a href="show-the-numbers.html#cb144-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  bslib           0.3.1   2021-10-06 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-26"><a href="show-the-numbers.html#cb144-26" aria-hidden="true" tabindex="-1"></a><span class="do">##  cachem          1.0.6   2021-08-19 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-27"><a href="show-the-numbers.html#cb144-27" aria-hidden="true" tabindex="-1"></a><span class="do">##  callr           3.7.0   2021-04-20 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-28"><a href="show-the-numbers.html#cb144-28" aria-hidden="true" tabindex="-1"></a><span class="do">##  cellranger      1.1.0   2016-07-27 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-29"><a href="show-the-numbers.html#cb144-29" aria-hidden="true" tabindex="-1"></a><span class="do">##  class           7.3-20  2022-01-13 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-30"><a href="show-the-numbers.html#cb144-30" aria-hidden="true" tabindex="-1"></a><span class="do">##  classInt        0.4-3   2020-04-07 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-31"><a href="show-the-numbers.html#cb144-31" aria-hidden="true" tabindex="-1"></a><span class="do">##  cli             3.2.0   2022-02-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-32"><a href="show-the-numbers.html#cb144-32" aria-hidden="true" tabindex="-1"></a><span class="do">##  codetools       0.2-18  2020-11-04 [1] CRAN (R 4.1.2)</span></span>
<span id="cb144-33"><a href="show-the-numbers.html#cb144-33" aria-hidden="true" tabindex="-1"></a><span class="do">##  colorspace      2.0-3   2022-02-21 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-34"><a href="show-the-numbers.html#cb144-34" aria-hidden="true" tabindex="-1"></a><span class="do">##  crayon          1.5.0   2022-02-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-35"><a href="show-the-numbers.html#cb144-35" aria-hidden="true" tabindex="-1"></a><span class="do">##  DBI             1.1.2   2021-12-20 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-36"><a href="show-the-numbers.html#cb144-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  dbplyr          2.1.1   2021-04-06 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-37"><a href="show-the-numbers.html#cb144-37" aria-hidden="true" tabindex="-1"></a><span class="do">##  desc            1.4.0   2021-09-28 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-38"><a href="show-the-numbers.html#cb144-38" aria-hidden="true" tabindex="-1"></a><span class="do">##  devtools        2.4.3   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-39"><a href="show-the-numbers.html#cb144-39" aria-hidden="true" tabindex="-1"></a><span class="do">##  digest          0.6.29  2021-12-01 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-40"><a href="show-the-numbers.html#cb144-40" aria-hidden="true" tabindex="-1"></a><span class="do">##  dplyr         * 1.0.8   2022-02-08 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-41"><a href="show-the-numbers.html#cb144-41" aria-hidden="true" tabindex="-1"></a><span class="do">##  e1071           1.7-9   2021-09-16 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-42"><a href="show-the-numbers.html#cb144-42" aria-hidden="true" tabindex="-1"></a><span class="do">##  ellipsis        0.3.2   2021-04-29 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-43"><a href="show-the-numbers.html#cb144-43" aria-hidden="true" tabindex="-1"></a><span class="do">##  evaluate        0.15    2022-02-18 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-44"><a href="show-the-numbers.html#cb144-44" aria-hidden="true" tabindex="-1"></a><span class="do">##  fansi           1.0.2   2022-01-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-45"><a href="show-the-numbers.html#cb144-45" aria-hidden="true" tabindex="-1"></a><span class="do">##  farver          2.1.0   2021-02-28 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-46"><a href="show-the-numbers.html#cb144-46" aria-hidden="true" tabindex="-1"></a><span class="do">##  fastmap         1.1.0   2021-01-25 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-47"><a href="show-the-numbers.html#cb144-47" aria-hidden="true" tabindex="-1"></a><span class="do">##  forcats       * 0.5.1   2021-01-27 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-48"><a href="show-the-numbers.html#cb144-48" aria-hidden="true" tabindex="-1"></a><span class="do">##  fs              1.5.2   2021-12-08 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-49"><a href="show-the-numbers.html#cb144-49" aria-hidden="true" tabindex="-1"></a><span class="do">##  gapminder     * 0.3.0   2017-10-31 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-50"><a href="show-the-numbers.html#cb144-50" aria-hidden="true" tabindex="-1"></a><span class="do">##  generics        0.1.2   2022-01-31 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-51"><a href="show-the-numbers.html#cb144-51" aria-hidden="true" tabindex="-1"></a><span class="do">##  geofacet      * 0.2.0   2020-05-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-52"><a href="show-the-numbers.html#cb144-52" aria-hidden="true" tabindex="-1"></a><span class="do">##  geogrid         0.1.1   2018-12-11 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-53"><a href="show-the-numbers.html#cb144-53" aria-hidden="true" tabindex="-1"></a><span class="do">##  ggbeeswarm    * 0.6.0   2017-08-07 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-54"><a href="show-the-numbers.html#cb144-54" aria-hidden="true" tabindex="-1"></a><span class="do">##  ggplot2       * 3.3.5   2021-06-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-55"><a href="show-the-numbers.html#cb144-55" aria-hidden="true" tabindex="-1"></a><span class="do">##  ggrepel       * 0.9.1   2021-01-15 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-56"><a href="show-the-numbers.html#cb144-56" aria-hidden="true" tabindex="-1"></a><span class="do">##  glue            1.6.1   2022-01-22 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-57"><a href="show-the-numbers.html#cb144-57" aria-hidden="true" tabindex="-1"></a><span class="do">##  gridExtra       2.3     2017-09-09 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-58"><a href="show-the-numbers.html#cb144-58" aria-hidden="true" tabindex="-1"></a><span class="do">##  gtable          0.3.0   2019-03-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-59"><a href="show-the-numbers.html#cb144-59" aria-hidden="true" tabindex="-1"></a><span class="do">##  haven           2.4.3   2021-08-04 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-60"><a href="show-the-numbers.html#cb144-60" aria-hidden="true" tabindex="-1"></a><span class="do">##  here          * 1.0.1   2020-12-13 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-61"><a href="show-the-numbers.html#cb144-61" aria-hidden="true" tabindex="-1"></a><span class="do">##  highr           0.9     2021-04-16 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-62"><a href="show-the-numbers.html#cb144-62" aria-hidden="true" tabindex="-1"></a><span class="do">##  hms             1.1.1   2021-09-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-63"><a href="show-the-numbers.html#cb144-63" aria-hidden="true" tabindex="-1"></a><span class="do">##  htmltools       0.5.2   2021-08-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-64"><a href="show-the-numbers.html#cb144-64" aria-hidden="true" tabindex="-1"></a><span class="do">##  httr            1.4.2   2020-07-20 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-65"><a href="show-the-numbers.html#cb144-65" aria-hidden="true" tabindex="-1"></a><span class="do">##  imguR           1.0.3   2016-03-29 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-66"><a href="show-the-numbers.html#cb144-66" aria-hidden="true" tabindex="-1"></a><span class="do">##  jpeg            0.1-9   2021-07-24 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-67"><a href="show-the-numbers.html#cb144-67" aria-hidden="true" tabindex="-1"></a><span class="do">##  jquerylib       0.1.4   2021-04-26 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-68"><a href="show-the-numbers.html#cb144-68" aria-hidden="true" tabindex="-1"></a><span class="do">##  jsonlite        1.8.0   2022-02-22 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-69"><a href="show-the-numbers.html#cb144-69" aria-hidden="true" tabindex="-1"></a><span class="do">##  KernSmooth      2.23-20 2021-05-03 [1] CRAN (R 4.1.2)</span></span>
<span id="cb144-70"><a href="show-the-numbers.html#cb144-70" aria-hidden="true" tabindex="-1"></a><span class="do">##  knitr         * 1.37    2021-12-16 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-71"><a href="show-the-numbers.html#cb144-71" aria-hidden="true" tabindex="-1"></a><span class="do">##  labeling        0.4.2   2020-10-20 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-72"><a href="show-the-numbers.html#cb144-72" aria-hidden="true" tabindex="-1"></a><span class="do">##  lattice         0.20-45 2021-09-22 [1] CRAN (R 4.1.2)</span></span>
<span id="cb144-73"><a href="show-the-numbers.html#cb144-73" aria-hidden="true" tabindex="-1"></a><span class="do">##  lifecycle       1.0.1   2021-09-24 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-74"><a href="show-the-numbers.html#cb144-74" aria-hidden="true" tabindex="-1"></a><span class="do">##  lubridate     * 1.8.0   2021-10-07 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-75"><a href="show-the-numbers.html#cb144-75" aria-hidden="true" tabindex="-1"></a><span class="do">##  magrittr        2.0.2   2022-01-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-76"><a href="show-the-numbers.html#cb144-76" aria-hidden="true" tabindex="-1"></a><span class="do">##  Matrix          1.4-0   2021-12-08 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-77"><a href="show-the-numbers.html#cb144-77" aria-hidden="true" tabindex="-1"></a><span class="do">##  memoise         2.0.1   2021-11-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-78"><a href="show-the-numbers.html#cb144-78" aria-hidden="true" tabindex="-1"></a><span class="do">##  mgcv            1.8-38  2021-10-06 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-79"><a href="show-the-numbers.html#cb144-79" aria-hidden="true" tabindex="-1"></a><span class="do">##  modelr          0.1.8   2020-05-19 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-80"><a href="show-the-numbers.html#cb144-80" aria-hidden="true" tabindex="-1"></a><span class="do">##  munsell         0.5.0   2018-06-12 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-81"><a href="show-the-numbers.html#cb144-81" aria-hidden="true" tabindex="-1"></a><span class="do">##  nlme            3.1-155 2022-01-13 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-82"><a href="show-the-numbers.html#cb144-82" aria-hidden="true" tabindex="-1"></a><span class="do">##  pillar          1.7.0   2022-02-01 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-83"><a href="show-the-numbers.html#cb144-83" aria-hidden="true" tabindex="-1"></a><span class="do">##  pkgbuild        1.3.1   2021-12-20 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-84"><a href="show-the-numbers.html#cb144-84" aria-hidden="true" tabindex="-1"></a><span class="do">##  pkgconfig       2.0.3   2019-09-22 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-85"><a href="show-the-numbers.html#cb144-85" aria-hidden="true" tabindex="-1"></a><span class="do">##  pkgload         1.2.4   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-86"><a href="show-the-numbers.html#cb144-86" aria-hidden="true" tabindex="-1"></a><span class="do">##  png             0.1-7   2013-12-03 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-87"><a href="show-the-numbers.html#cb144-87" aria-hidden="true" tabindex="-1"></a><span class="do">##  prettyunits     1.1.1   2020-01-24 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-88"><a href="show-the-numbers.html#cb144-88" aria-hidden="true" tabindex="-1"></a><span class="do">##  processx        3.5.2   2021-04-30 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-89"><a href="show-the-numbers.html#cb144-89" aria-hidden="true" tabindex="-1"></a><span class="do">##  proxy           0.4-26  2021-06-07 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-90"><a href="show-the-numbers.html#cb144-90" aria-hidden="true" tabindex="-1"></a><span class="do">##  ps              1.6.0   2021-02-28 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-91"><a href="show-the-numbers.html#cb144-91" aria-hidden="true" tabindex="-1"></a><span class="do">##  purrr         * 0.3.4   2020-04-17 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-92"><a href="show-the-numbers.html#cb144-92" aria-hidden="true" tabindex="-1"></a><span class="do">##  R6              2.5.1   2021-08-19 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-93"><a href="show-the-numbers.html#cb144-93" aria-hidden="true" tabindex="-1"></a><span class="do">##  Rcpp            1.0.8   2022-01-13 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-94"><a href="show-the-numbers.html#cb144-94" aria-hidden="true" tabindex="-1"></a><span class="do">##  readr         * 2.1.2   2022-01-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-95"><a href="show-the-numbers.html#cb144-95" aria-hidden="true" tabindex="-1"></a><span class="do">##  readxl        * 1.3.1   2019-03-13 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-96"><a href="show-the-numbers.html#cb144-96" aria-hidden="true" tabindex="-1"></a><span class="do">##  remotes         2.4.2   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-97"><a href="show-the-numbers.html#cb144-97" aria-hidden="true" tabindex="-1"></a><span class="do">##  reprex          2.0.1   2021-08-05 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-98"><a href="show-the-numbers.html#cb144-98" aria-hidden="true" tabindex="-1"></a><span class="do">##  rgdal           1.5-28  2021-12-15 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-99"><a href="show-the-numbers.html#cb144-99" aria-hidden="true" tabindex="-1"></a><span class="do">##  rgeos           0.5-9   2021-12-15 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-100"><a href="show-the-numbers.html#cb144-100" aria-hidden="true" tabindex="-1"></a><span class="do">##  RJSONIO         1.3-1.6 2021-09-16 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-101"><a href="show-the-numbers.html#cb144-101" aria-hidden="true" tabindex="-1"></a><span class="do">##  rlang           1.0.1   2022-02-03 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-102"><a href="show-the-numbers.html#cb144-102" aria-hidden="true" tabindex="-1"></a><span class="do">##  rmarkdown       2.11    2021-09-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-103"><a href="show-the-numbers.html#cb144-103" aria-hidden="true" tabindex="-1"></a><span class="do">##  rnaturalearth   0.1.0   2017-03-21 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-104"><a href="show-the-numbers.html#cb144-104" aria-hidden="true" tabindex="-1"></a><span class="do">##  rprojroot       2.0.2   2020-11-15 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-105"><a href="show-the-numbers.html#cb144-105" aria-hidden="true" tabindex="-1"></a><span class="do">##  rstudioapi      0.13    2020-11-12 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-106"><a href="show-the-numbers.html#cb144-106" aria-hidden="true" tabindex="-1"></a><span class="do">##  rvest           1.0.2   2021-10-16 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-107"><a href="show-the-numbers.html#cb144-107" aria-hidden="true" tabindex="-1"></a><span class="do">##  sass            0.4.0   2021-05-12 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-108"><a href="show-the-numbers.html#cb144-108" aria-hidden="true" tabindex="-1"></a><span class="do">##  scales        * 1.1.1   2020-05-11 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-109"><a href="show-the-numbers.html#cb144-109" aria-hidden="true" tabindex="-1"></a><span class="do">##  sessioninfo     1.2.2   2021-12-06 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-110"><a href="show-the-numbers.html#cb144-110" aria-hidden="true" tabindex="-1"></a><span class="do">##  sf              1.0-6   2022-02-04 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-111"><a href="show-the-numbers.html#cb144-111" aria-hidden="true" tabindex="-1"></a><span class="do">##  socviz        * 1.2     2020-06-10 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-112"><a href="show-the-numbers.html#cb144-112" aria-hidden="true" tabindex="-1"></a><span class="do">##  sp              1.4-6   2021-11-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-113"><a href="show-the-numbers.html#cb144-113" aria-hidden="true" tabindex="-1"></a><span class="do">##  stringi         1.7.6   2021-11-29 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-114"><a href="show-the-numbers.html#cb144-114" aria-hidden="true" tabindex="-1"></a><span class="do">##  stringr       * 1.4.0   2019-02-10 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-115"><a href="show-the-numbers.html#cb144-115" aria-hidden="true" tabindex="-1"></a><span class="do">##  testthat        3.1.2   2022-01-20 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-116"><a href="show-the-numbers.html#cb144-116" aria-hidden="true" tabindex="-1"></a><span class="do">##  tibble        * 3.1.6   2021-11-07 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-117"><a href="show-the-numbers.html#cb144-117" aria-hidden="true" tabindex="-1"></a><span class="do">##  tidyr         * 1.2.0   2022-02-01 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-118"><a href="show-the-numbers.html#cb144-118" aria-hidden="true" tabindex="-1"></a><span class="do">##  tidyselect      1.1.2   2022-02-21 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-119"><a href="show-the-numbers.html#cb144-119" aria-hidden="true" tabindex="-1"></a><span class="do">##  tidyverse     * 1.3.1   2021-04-15 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-120"><a href="show-the-numbers.html#cb144-120" aria-hidden="true" tabindex="-1"></a><span class="do">##  tzdb            0.2.0   2021-10-27 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-121"><a href="show-the-numbers.html#cb144-121" aria-hidden="true" tabindex="-1"></a><span class="do">##  units           0.8-0   2022-02-05 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-122"><a href="show-the-numbers.html#cb144-122" aria-hidden="true" tabindex="-1"></a><span class="do">##  usethis         2.1.5   2021-12-09 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-123"><a href="show-the-numbers.html#cb144-123" aria-hidden="true" tabindex="-1"></a><span class="do">##  utf8            1.2.2   2021-07-24 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-124"><a href="show-the-numbers.html#cb144-124" aria-hidden="true" tabindex="-1"></a><span class="do">##  vctrs           0.3.8   2021-04-29 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-125"><a href="show-the-numbers.html#cb144-125" aria-hidden="true" tabindex="-1"></a><span class="do">##  vipor           0.4.5   2017-03-22 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-126"><a href="show-the-numbers.html#cb144-126" aria-hidden="true" tabindex="-1"></a><span class="do">##  viridisLite     0.4.0   2021-04-13 [1] CRAN (R 4.1.0)</span></span>
<span id="cb144-127"><a href="show-the-numbers.html#cb144-127" aria-hidden="true" tabindex="-1"></a><span class="do">##  vroom           1.5.7   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-128"><a href="show-the-numbers.html#cb144-128" aria-hidden="true" tabindex="-1"></a><span class="do">##  WDI           * 2.7.6   2022-02-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-129"><a href="show-the-numbers.html#cb144-129" aria-hidden="true" tabindex="-1"></a><span class="do">##  withr           2.4.3   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-130"><a href="show-the-numbers.html#cb144-130" aria-hidden="true" tabindex="-1"></a><span class="do">##  xfun            0.29    2021-12-14 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-131"><a href="show-the-numbers.html#cb144-131" aria-hidden="true" tabindex="-1"></a><span class="do">##  xml2            1.3.3   2021-11-30 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-132"><a href="show-the-numbers.html#cb144-132" aria-hidden="true" tabindex="-1"></a><span class="do">##  yaml            2.3.5   2022-02-21 [1] CRAN (R 4.1.1)</span></span>
<span id="cb144-133"><a href="show-the-numbers.html#cb144-133" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb144-134"><a href="show-the-numbers.html#cb144-134" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library</span></span>
<span id="cb144-135"><a href="show-the-numbers.html#cb144-135" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb144-136"><a href="show-the-numbers.html#cb144-136" aria-hidden="true" tabindex="-1"></a><span class="do">## ──────────────────────────────────────────────────────────────────────────────</span></span></code></pre></div>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-healy2018data" class="csl-entry">
Healy, Kieran. 2018. <em>Data Visualization: A Practical Introduction</em>. Princeton University Press.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-data-viz.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="science-polish.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"theme": "readable",
"highlight": "pygment"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
